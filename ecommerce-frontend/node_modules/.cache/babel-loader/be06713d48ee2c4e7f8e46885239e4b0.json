{"ast":null,"code":"function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n/* tslint:disable jsx-no-multiline-js */\n\n\nimport * as React from 'react';\nimport * as moment from 'moment';\nimport { polyfill } from 'react-lifecycles-compat';\nimport RangeCalendar from \"rc-calendar/es/RangeCalendar\";\nimport RcDatePicker from \"rc-calendar/es/Picker\";\nimport classNames from 'classnames';\nimport shallowequal from 'shallowequal';\nimport Icon from '../icon';\nimport Tag from '../tag';\nimport { ConfigConsumer } from '../config-provider';\nimport warning from '../_util/warning';\nimport interopDefault from '../_util/interopDefault';\nimport { formatDate } from './utils';\nimport InputIcon from './InputIcon';\n\nfunction getShowDateFromValue(value, mode) {\n  var _value = _slicedToArray(value, 2),\n      start = _value[0],\n      end = _value[1]; // value could be an empty array, then we should not reset showDate\n\n\n  if (!start && !end) {\n    return;\n  }\n\n  if (mode && mode[0] === 'month') {\n    return [start, end];\n  }\n\n  var newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\n  return [start, newEnd];\n}\n\nfunction pickerValueAdapter(value) {\n  if (!value) {\n    return;\n  }\n\n  if (Array.isArray(value)) {\n    return value;\n  }\n\n  return [value, value.clone().add(1, 'month')];\n}\n\nfunction isEmptyArray(arr) {\n  if (Array.isArray(arr)) {\n    return arr.length === 0 || arr.every(function (i) {\n      return !i;\n    });\n  }\n\n  return false;\n}\n\nfunction fixLocale(value, localeCode) {\n  if (!localeCode) {\n    return;\n  }\n\n  if (!value || value.length === 0) {\n    return;\n  }\n\n  var _value2 = _slicedToArray(value, 2),\n      start = _value2[0],\n      end = _value2[1];\n\n  if (start) {\n    start.locale(localeCode);\n  }\n\n  if (end) {\n    end.locale(localeCode);\n  }\n}\n\nvar RangePicker =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(RangePicker, _React$Component);\n\n  function RangePicker(props) {\n    var _this;\n\n    _classCallCheck(this, RangePicker);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RangePicker).call(this, props));\n\n    _this.savePicker = function (node) {\n      _this.picker = node;\n    };\n\n    _this.clearSelection = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _this.setState({\n        value: []\n      });\n\n      _this.handleChange([]);\n    };\n\n    _this.clearHoverValue = function () {\n      return _this.setState({\n        hoverValue: []\n      });\n    };\n\n    _this.handleChange = function (value) {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          props = _assertThisInitialize.props;\n\n      if (!('value' in props)) {\n        _this.setState(function (_ref) {\n          var showDate = _ref.showDate;\n          return {\n            value: value,\n            showDate: getShowDateFromValue(value) || showDate\n          };\n        });\n      }\n\n      if (value[0] && value[1] && value[0].diff(value[1]) > 0) {\n        value[1] = undefined;\n      }\n\n      var _value3 = _slicedToArray(value, 2),\n          start = _value3[0],\n          end = _value3[1];\n\n      if (typeof props.onChange === 'function') {\n        props.onChange(value, [formatDate(start, props.format), formatDate(end, props.format)]);\n      }\n    };\n\n    _this.handleOpenChange = function (open) {\n      if (!('open' in _this.props)) {\n        _this.setState({\n          open: open\n        });\n      }\n\n      if (open === false) {\n        _this.clearHoverValue();\n      }\n\n      var onOpenChange = _this.props.onOpenChange;\n\n      if (onOpenChange) {\n        onOpenChange(open);\n      }\n    };\n\n    _this.handleShowDateChange = function (showDate) {\n      return _this.setState({\n        showDate: showDate\n      });\n    };\n\n    _this.handleHoverChange = function (hoverValue) {\n      return _this.setState({\n        hoverValue: hoverValue\n      });\n    };\n\n    _this.handleRangeMouseLeave = function () {\n      if (_this.state.open) {\n        _this.clearHoverValue();\n      }\n    };\n\n    _this.handleCalendarInputSelect = function (value) {\n      var _value4 = _slicedToArray(value, 1),\n          start = _value4[0];\n\n      if (!start) {\n        return;\n      }\n\n      _this.setState(function (_ref2) {\n        var showDate = _ref2.showDate;\n        return {\n          value: value,\n          showDate: getShowDateFromValue(value) || showDate\n        };\n      });\n    };\n\n    _this.handleRangeClick = function (value) {\n      if (typeof value === 'function') {\n        value = value();\n      }\n\n      _this.setValue(value, true);\n\n      var _this$props = _this.props,\n          onOk = _this$props.onOk,\n          onOpenChange = _this$props.onOpenChange;\n\n      if (onOk) {\n        onOk(value);\n      }\n\n      if (onOpenChange) {\n        onOpenChange(false);\n      }\n    };\n\n    _this.renderFooter = function () {\n      var _this$props2 = _this.props,\n          ranges = _this$props2.ranges,\n          renderExtraFooter = _this$props2.renderExtraFooter;\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          prefixCls = _assertThisInitialize2.prefixCls,\n          tagPrefixCls = _assertThisInitialize2.tagPrefixCls;\n\n      if (!ranges && !renderExtraFooter) {\n        return null;\n      }\n\n      var customFooter = renderExtraFooter ? React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-footer-extra\"),\n        key: \"extra\"\n      }, renderExtraFooter()) : null;\n      var operations = ranges && Object.keys(ranges).map(function (range) {\n        var value = ranges[range];\n        var hoverValue = typeof value === 'function' ? value.call(_assertThisInitialized(_this)) : value;\n        return React.createElement(Tag, {\n          key: range,\n          prefixCls: tagPrefixCls,\n          color: \"blue\",\n          onClick: function onClick() {\n            return _this.handleRangeClick(value);\n          },\n          onMouseEnter: function onMouseEnter() {\n            return _this.setState({\n              hoverValue: hoverValue\n            });\n          },\n          onMouseLeave: _this.handleRangeMouseLeave\n        }, range);\n      });\n      var rangeNode = operations && operations.length > 0 ? React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-footer-extra \").concat(prefixCls, \"-range-quick-selector\"),\n        key: \"range\"\n      }, operations) : null;\n      return [rangeNode, customFooter];\n    };\n\n    _this.renderRangePicker = function (_ref3) {\n      var _classNames;\n\n      var getPrefixCls = _ref3.getPrefixCls;\n\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          state = _assertThisInitialize3.state,\n          props = _assertThisInitialize3.props;\n\n      var value = state.value,\n          showDate = state.showDate,\n          hoverValue = state.hoverValue,\n          open = state.open;\n      var customizePrefixCls = props.prefixCls,\n          customizeTagPrefixCls = props.tagPrefixCls,\n          popupStyle = props.popupStyle,\n          style = props.style,\n          disabledDate = props.disabledDate,\n          disabledTime = props.disabledTime,\n          showTime = props.showTime,\n          showToday = props.showToday,\n          ranges = props.ranges,\n          onOk = props.onOk,\n          locale = props.locale,\n          localeCode = props.localeCode,\n          format = props.format,\n          dateRender = props.dateRender,\n          onCalendarChange = props.onCalendarChange,\n          suffixIcon = props.suffixIcon,\n          separator = props.separator;\n      var prefixCls = getPrefixCls('calendar', customizePrefixCls);\n      var tagPrefixCls = getPrefixCls('tag', customizeTagPrefixCls); // To support old version react.\n      // Have to add prefixCls on the instance.\n      // https://github.com/facebook/react/issues/12397\n\n      _this.prefixCls = prefixCls;\n      _this.tagPrefixCls = tagPrefixCls;\n      fixLocale(value, localeCode);\n      fixLocale(showDate, localeCode);\n      warning(!('onOK' in props), 'RangePicker', 'It should be `RangePicker[onOk]`, instead of `onOK`!');\n      var calendarClassName = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-time\"), showTime), _defineProperty(_classNames, \"\".concat(prefixCls, \"-range-with-ranges\"), ranges), _classNames)); // 需要选择时间时，点击 ok 时才触发 onChange\n\n      var pickerChangeHandler = {\n        onChange: _this.handleChange\n      };\n      var calendarProps = {\n        onOk: _this.handleChange\n      };\n\n      if (props.timePicker) {\n        pickerChangeHandler.onChange = function (changedValue) {\n          return _this.handleChange(changedValue);\n        };\n      } else {\n        calendarProps = {};\n      }\n\n      if ('mode' in props) {\n        calendarProps.mode = props.mode;\n      }\n\n      var startPlaceholder = Array.isArray(props.placeholder) ? props.placeholder[0] : locale.lang.rangePlaceholder[0];\n      var endPlaceholder = Array.isArray(props.placeholder) ? props.placeholder[1] : locale.lang.rangePlaceholder[1];\n      var calendar = React.createElement(RangeCalendar, _extends({}, calendarProps, {\n        seperator: separator,\n        onChange: onCalendarChange,\n        format: format,\n        prefixCls: prefixCls,\n        className: calendarClassName,\n        renderFooter: _this.renderFooter,\n        timePicker: props.timePicker,\n        disabledDate: disabledDate,\n        disabledTime: disabledTime,\n        dateInputPlaceholder: [startPlaceholder, endPlaceholder],\n        locale: locale.lang,\n        onOk: onOk,\n        dateRender: dateRender,\n        value: showDate,\n        onValueChange: _this.handleShowDateChange,\n        hoverValue: hoverValue,\n        onHoverChange: _this.handleHoverChange,\n        onPanelChange: props.onPanelChange,\n        showToday: showToday,\n        onInputSelect: _this.handleCalendarInputSelect\n      })); // default width for showTime\n\n      var pickerStyle = {};\n\n      if (props.showTime) {\n        pickerStyle.width = style && style.width || 350;\n      }\n\n      var _value5 = _slicedToArray(value, 2),\n          startValue = _value5[0],\n          endValue = _value5[1];\n\n      var clearIcon = !props.disabled && props.allowClear && value && (startValue || endValue) ? React.createElement(Icon, {\n        type: \"close-circle\",\n        className: \"\".concat(prefixCls, \"-picker-clear\"),\n        onClick: _this.clearSelection,\n        theme: \"filled\"\n      }) : null;\n      var inputIcon = React.createElement(InputIcon, {\n        suffixIcon: suffixIcon,\n        prefixCls: prefixCls\n      });\n\n      var input = function input(_ref4) {\n        var inputValue = _ref4.value;\n\n        var _inputValue = _slicedToArray(inputValue, 2),\n            start = _inputValue[0],\n            end = _inputValue[1];\n\n        return React.createElement(\"span\", {\n          className: props.pickerInputClass\n        }, React.createElement(\"input\", {\n          disabled: props.disabled,\n          readOnly: true,\n          value: formatDate(start, props.format),\n          placeholder: startPlaceholder,\n          className: \"\".concat(prefixCls, \"-range-picker-input\"),\n          tabIndex: -1\n        }), React.createElement(\"span\", {\n          className: \"\".concat(prefixCls, \"-range-picker-separator\")\n        }, \" \", separator, \" \"), React.createElement(\"input\", {\n          disabled: props.disabled,\n          readOnly: true,\n          value: formatDate(end, props.format),\n          placeholder: endPlaceholder,\n          className: \"\".concat(prefixCls, \"-range-picker-input\"),\n          tabIndex: -1\n        }), clearIcon, inputIcon);\n      };\n\n      return React.createElement(\"span\", {\n        ref: _this.savePicker,\n        id: typeof props.id === 'number' ? props.id.toString() : props.id,\n        className: classNames(props.className, props.pickerClass),\n        style: _extends(_extends({}, style), pickerStyle),\n        tabIndex: props.disabled ? -1 : 0,\n        onFocus: props.onFocus,\n        onBlur: props.onBlur,\n        onMouseEnter: props.onMouseEnter,\n        onMouseLeave: props.onMouseLeave\n      }, React.createElement(RcDatePicker, _extends({}, props, pickerChangeHandler, {\n        calendar: calendar,\n        value: value,\n        open: open,\n        onOpenChange: _this.handleOpenChange,\n        prefixCls: \"\".concat(prefixCls, \"-picker-container\"),\n        style: popupStyle\n      }), input));\n    };\n\n    var value = props.value || props.defaultValue || [];\n\n    var _value6 = _slicedToArray(value, 2),\n        start = _value6[0],\n        end = _value6[1];\n\n    if (start && !interopDefault(moment).isMoment(start) || end && !interopDefault(moment).isMoment(end)) {\n      throw new Error('The value/defaultValue of RangePicker must be a moment object array after `antd@2.0`, ' + 'see: https://u.ant.design/date-picker-value');\n    }\n\n    var pickerValue = !value || isEmptyArray(value) ? props.defaultPickerValue : value;\n    _this.state = {\n      value: value,\n      showDate: pickerValueAdapter(pickerValue || interopDefault(moment)()),\n      open: props.open,\n      hoverValue: []\n    };\n    return _this;\n  }\n\n  _createClass(RangePicker, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_, prevState) {\n      if (!('open' in this.props) && prevState.open && !this.state.open) {\n        this.focus();\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value, hidePanel) {\n      this.handleChange(value);\n\n      if ((hidePanel || !this.props.showTime) && !('open' in this.props)) {\n        this.setState({\n          open: false\n        });\n      }\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.picker.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.picker.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderRangePicker);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var state = null;\n\n      if ('value' in nextProps) {\n        var value = nextProps.value || [];\n        state = {\n          value: value\n        };\n\n        if (!shallowequal(nextProps.value, prevState.value)) {\n          state = _extends(_extends({}, state), {\n            showDate: getShowDateFromValue(value, nextProps.mode) || prevState.showDate\n          });\n        }\n      }\n\n      if ('open' in nextProps && prevState.open !== nextProps.open) {\n        state = _extends(_extends({}, state), {\n          open: nextProps.open\n        });\n      }\n\n      return state;\n    }\n  }]);\n\n  return RangePicker;\n}(React.Component);\n\nRangePicker.defaultProps = {\n  allowClear: true,\n  showToday: false,\n  separator: '~'\n};\npolyfill(RangePicker);\nexport default RangePicker;","map":{"version":3,"sources":["date-picker/RangePicker.jsx"],"names":["start","end","mode","newEnd","Array","value","arr","RangePicker","React","Component","e","hoverValue","props","showDate","getShowDateFromValue","formatDate","open","onOpenChange","onOk","ranges","renderExtraFooter","prefixCls","tagPrefixCls","customFooter","operations","handleRangeMouseLeave","rangeNode","getPrefixCls","state","customizePrefixCls","customizeTagPrefixCls","popupStyle","style","disabledDate","disabledTime","showTime","showToday","locale","localeCode","format","dateRender","onCalendarChange","suffixIcon","separator","fixLocale","warning","calendarClassName","classNames","pickerChangeHandler","onChange","handleChange","calendarProps","startPlaceholder","endPlaceholder","calendar","handleCalendarInputSelect","pickerStyle","startValue","endValue","clearIcon","inputIcon","input","inputValue","pickerInputClass","onMouseLeave","interopDefault","pickerValue","isEmptyArray","pickerValueAdapter","nextProps","prevState","shallowequal","_","hidePanel","allowClear","polyfill"],"mappings":"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","sourcesContent":["/* tslint:disable jsx-no-multiline-js */\nimport * as React from 'react';\nimport * as moment from 'moment';\nimport { polyfill } from 'react-lifecycles-compat';\nimport RangeCalendar from 'rc-calendar/lib/RangeCalendar';\nimport RcDatePicker from 'rc-calendar/lib/Picker';\nimport classNames from 'classnames';\nimport shallowequal from 'shallowequal';\nimport Icon from '../icon';\nimport Tag from '../tag';\nimport { ConfigConsumer } from '../config-provider';\nimport warning from '../_util/warning';\nimport interopDefault from '../_util/interopDefault';\nimport { formatDate } from './utils';\nimport InputIcon from './InputIcon';\nfunction getShowDateFromValue(value, mode) {\n    const [start, end] = value;\n    // value could be an empty array, then we should not reset showDate\n    if (!start && !end) {\n        return;\n    }\n    if (mode && mode[0] === 'month') {\n        return [start, end];\n    }\n    const newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\n    return [start, newEnd];\n}\nfunction pickerValueAdapter(value) {\n    if (!value) {\n        return;\n    }\n    if (Array.isArray(value)) {\n        return value;\n    }\n    return [value, value.clone().add(1, 'month')];\n}\nfunction isEmptyArray(arr) {\n    if (Array.isArray(arr)) {\n        return arr.length === 0 || arr.every(i => !i);\n    }\n    return false;\n}\nfunction fixLocale(value, localeCode) {\n    if (!localeCode) {\n        return;\n    }\n    if (!value || value.length === 0) {\n        return;\n    }\n    const [start, end] = value;\n    if (start) {\n        start.locale(localeCode);\n    }\n    if (end) {\n        end.locale(localeCode);\n    }\n}\nclass RangePicker extends React.Component {\n    constructor(props) {\n        super(props);\n        this.savePicker = (node) => {\n            this.picker = node;\n        };\n        this.clearSelection = (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            this.setState({ value: [] });\n            this.handleChange([]);\n        };\n        this.clearHoverValue = () => this.setState({ hoverValue: [] });\n        this.handleChange = (value) => {\n            const { props } = this;\n            if (!('value' in props)) {\n                this.setState(({ showDate }) => ({\n                    value,\n                    showDate: getShowDateFromValue(value) || showDate,\n                }));\n            }\n            if (value[0] && value[1] && value[0].diff(value[1]) > 0) {\n                value[1] = undefined;\n            }\n            const [start, end] = value;\n            if (typeof props.onChange === 'function') {\n                props.onChange(value, [formatDate(start, props.format), formatDate(end, props.format)]);\n            }\n        };\n        this.handleOpenChange = (open) => {\n            if (!('open' in this.props)) {\n                this.setState({ open });\n            }\n            if (open === false) {\n                this.clearHoverValue();\n            }\n            const { onOpenChange } = this.props;\n            if (onOpenChange) {\n                onOpenChange(open);\n            }\n        };\n        this.handleShowDateChange = (showDate) => this.setState({ showDate });\n        this.handleHoverChange = (hoverValue) => this.setState({ hoverValue });\n        this.handleRangeMouseLeave = () => {\n            if (this.state.open) {\n                this.clearHoverValue();\n            }\n        };\n        this.handleCalendarInputSelect = (value) => {\n            const [start] = value;\n            if (!start) {\n                return;\n            }\n            this.setState(({ showDate }) => ({\n                value,\n                showDate: getShowDateFromValue(value) || showDate,\n            }));\n        };\n        this.handleRangeClick = (value) => {\n            if (typeof value === 'function') {\n                value = value();\n            }\n            this.setValue(value, true);\n            const { onOk, onOpenChange } = this.props;\n            if (onOk) {\n                onOk(value);\n            }\n            if (onOpenChange) {\n                onOpenChange(false);\n            }\n        };\n        this.renderFooter = () => {\n            const { ranges, renderExtraFooter } = this.props;\n            const { prefixCls, tagPrefixCls } = this;\n            if (!ranges && !renderExtraFooter) {\n                return null;\n            }\n            const customFooter = renderExtraFooter ? (<div className={`${prefixCls}-footer-extra`} key=\"extra\">\n        {renderExtraFooter()}\n      </div>) : null;\n            const operations = ranges &&\n                Object.keys(ranges).map(range => {\n                    const value = ranges[range];\n                    const hoverValue = typeof value === 'function' ? value.call(this) : value;\n                    return (<Tag key={range} prefixCls={tagPrefixCls} color=\"blue\" onClick={() => this.handleRangeClick(value)} onMouseEnter={() => this.setState({ hoverValue })} onMouseLeave={this.handleRangeMouseLeave}>\n            {range}\n          </Tag>);\n                });\n            const rangeNode = operations && operations.length > 0 ? (<div className={`${prefixCls}-footer-extra ${prefixCls}-range-quick-selector`} key=\"range\">\n          {operations}\n        </div>) : null;\n            return [rangeNode, customFooter];\n        };\n        this.renderRangePicker = ({ getPrefixCls }) => {\n            const { state, props } = this;\n            const { value, showDate, hoverValue, open } = state;\n            const { prefixCls: customizePrefixCls, tagPrefixCls: customizeTagPrefixCls, popupStyle, style, disabledDate, disabledTime, showTime, showToday, ranges, onOk, locale, \n            // @ts-ignore\n            localeCode, format, dateRender, onCalendarChange, suffixIcon, separator, } = props;\n            const prefixCls = getPrefixCls('calendar', customizePrefixCls);\n            const tagPrefixCls = getPrefixCls('tag', customizeTagPrefixCls);\n            // To support old version react.\n            // Have to add prefixCls on the instance.\n            // https://github.com/facebook/react/issues/12397\n            this.prefixCls = prefixCls;\n            this.tagPrefixCls = tagPrefixCls;\n            fixLocale(value, localeCode);\n            fixLocale(showDate, localeCode);\n            warning(!('onOK' in props), 'RangePicker', 'It should be `RangePicker[onOk]`, instead of `onOK`!');\n            const calendarClassName = classNames({\n                [`${prefixCls}-time`]: showTime,\n                [`${prefixCls}-range-with-ranges`]: ranges,\n            });\n            // 需要选择时间时，点击 ok 时才触发 onChange\n            const pickerChangeHandler = {\n                onChange: this.handleChange,\n            };\n            let calendarProps = {\n                onOk: this.handleChange,\n            };\n            if (props.timePicker) {\n                pickerChangeHandler.onChange = changedValue => this.handleChange(changedValue);\n            }\n            else {\n                calendarProps = {};\n            }\n            if ('mode' in props) {\n                calendarProps.mode = props.mode;\n            }\n            const startPlaceholder = Array.isArray(props.placeholder)\n                ? props.placeholder[0]\n                : locale.lang.rangePlaceholder[0];\n            const endPlaceholder = Array.isArray(props.placeholder)\n                ? props.placeholder[1]\n                : locale.lang.rangePlaceholder[1];\n            const calendar = (<RangeCalendar {...calendarProps} seperator={separator} onChange={onCalendarChange} format={format} prefixCls={prefixCls} className={calendarClassName} renderFooter={this.renderFooter} timePicker={props.timePicker} disabledDate={disabledDate} disabledTime={disabledTime} dateInputPlaceholder={[startPlaceholder, endPlaceholder]} locale={locale.lang} onOk={onOk} dateRender={dateRender} value={showDate} onValueChange={this.handleShowDateChange} hoverValue={hoverValue} onHoverChange={this.handleHoverChange} onPanelChange={props.onPanelChange} showToday={showToday} onInputSelect={this.handleCalendarInputSelect}/>);\n            // default width for showTime\n            const pickerStyle = {};\n            if (props.showTime) {\n                pickerStyle.width = (style && style.width) || 350;\n            }\n            const [startValue, endValue] = value;\n            const clearIcon = !props.disabled && props.allowClear && value && (startValue || endValue) ? (<Icon type=\"close-circle\" className={`${prefixCls}-picker-clear`} onClick={this.clearSelection} theme=\"filled\"/>) : null;\n            const inputIcon = <InputIcon suffixIcon={suffixIcon} prefixCls={prefixCls}/>;\n            const input = ({ value: inputValue }) => {\n                const [start, end] = inputValue;\n                return (<span className={props.pickerInputClass}>\n          <input disabled={props.disabled} readOnly value={formatDate(start, props.format)} placeholder={startPlaceholder} className={`${prefixCls}-range-picker-input`} tabIndex={-1}/>\n          <span className={`${prefixCls}-range-picker-separator`}> {separator} </span>\n          <input disabled={props.disabled} readOnly value={formatDate(end, props.format)} placeholder={endPlaceholder} className={`${prefixCls}-range-picker-input`} tabIndex={-1}/>\n          {clearIcon}\n          {inputIcon}\n        </span>);\n            };\n            return (<span ref={this.savePicker} id={typeof props.id === 'number' ? props.id.toString() : props.id} className={classNames(props.className, props.pickerClass)} style={Object.assign(Object.assign({}, style), pickerStyle)} tabIndex={props.disabled ? -1 : 0} onFocus={props.onFocus} onBlur={props.onBlur} onMouseEnter={props.onMouseEnter} onMouseLeave={props.onMouseLeave}>\n        <RcDatePicker {...props} {...pickerChangeHandler} calendar={calendar} value={value} open={open} onOpenChange={this.handleOpenChange} prefixCls={`${prefixCls}-picker-container`} style={popupStyle}>\n          {input}\n        </RcDatePicker>\n      </span>);\n        };\n        const value = props.value || props.defaultValue || [];\n        const [start, end] = value;\n        if ((start && !interopDefault(moment).isMoment(start)) ||\n            (end && !interopDefault(moment).isMoment(end))) {\n            throw new Error('The value/defaultValue of RangePicker must be a moment object array after `antd@2.0`, ' +\n                'see: https://u.ant.design/date-picker-value');\n        }\n        const pickerValue = !value || isEmptyArray(value) ? props.defaultPickerValue : value;\n        this.state = {\n            value,\n            showDate: pickerValueAdapter(pickerValue || interopDefault(moment)()),\n            open: props.open,\n            hoverValue: [],\n        };\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        let state = null;\n        if ('value' in nextProps) {\n            const value = nextProps.value || [];\n            state = {\n                value,\n            };\n            if (!shallowequal(nextProps.value, prevState.value)) {\n                state = Object.assign(Object.assign({}, state), { showDate: getShowDateFromValue(value, nextProps.mode) || prevState.showDate });\n            }\n        }\n        if ('open' in nextProps && prevState.open !== nextProps.open) {\n            state = Object.assign(Object.assign({}, state), { open: nextProps.open });\n        }\n        return state;\n    }\n    componentDidUpdate(_, prevState) {\n        if (!('open' in this.props) && prevState.open && !this.state.open) {\n            this.focus();\n        }\n    }\n    setValue(value, hidePanel) {\n        this.handleChange(value);\n        if ((hidePanel || !this.props.showTime) && !('open' in this.props)) {\n            this.setState({ open: false });\n        }\n    }\n    focus() {\n        this.picker.focus();\n    }\n    blur() {\n        this.picker.blur();\n    }\n    render() {\n        return <ConfigConsumer>{this.renderRangePicker}</ConfigConsumer>;\n    }\n}\nRangePicker.defaultProps = {\n    allowClear: true,\n    showToday: false,\n    separator: '~',\n};\npolyfill(RangePicker);\nexport default RangePicker;\n"]},"metadata":{},"sourceType":"module"}