{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * ARIA: https://www.w3.org/TR/wai-aria/#combobox\n * Sample 1: https://www.w3.org/TR/2017/NOTE-wai-aria-practices-1.1-20171214/examples/combobox/aria1.1pattern/listbox-combo.html\n * Sample 2: https://www.w3.org/blog/wai-components-gallery/widget/combobox-with-aria-autocompleteinline/\n *\n * Tab logic:\n * Popup is close\n * 1. Focus input (mark component as focused)\n * 2. Press enter to show the popup\n * 3. If popup has input, focus it\n *\n * Popup is open\n * 1. press tab to close the popup\n * 2. Focus back to the selection input box\n * 3. Let the native tab going on\n *\n * TreeSelect use 2 design type.\n * In single mode, we should focus on the `span`\n * In multiple mode, we should focus on the `input`\n */\n\n\nimport React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { polyfill } from 'react-lifecycles-compat';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport shallowEqual from 'shallowequal';\nimport raf from 'raf';\nimport scrollIntoView from 'dom-scroll-into-view';\nimport SelectTrigger from './SelectTrigger';\nimport { selectorContextTypes } from './Base/BaseSelector';\nimport { popupContextTypes } from './Base/BasePopup';\nimport SingleSelector from './Selector/SingleSelector';\nimport MultipleSelector, { multipleSelectorContextTypes } from './Selector/MultipleSelector';\nimport SinglePopup from './Popup/SinglePopup';\nimport MultiplePopup from './Popup/MultiplePopup';\nimport { SHOW_ALL, SHOW_PARENT, SHOW_CHILD } from './strategies';\nimport { createRef, generateAriaId, formatInternalValue, formatSelectorValue, parseSimpleTreeData, convertDataToTree, convertTreeToEntities, conductCheck, getHalfCheckedKeys, flatToHierarchy, isPosRelated, isLabelInValue, getFilterTree, cleanEntity, findPopupContainer } from './util';\nimport { valueProp } from './propTypes';\nimport SelectNode from './SelectNode';\n\nvar Select =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Select, _React$Component);\n\n  function Select(_props) {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Select).call(this, _props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectorFocus\", function () {\n      _this.setState({\n        focused: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectorBlur\", function () {\n      _this.setState({\n        focused: false\n      }); // TODO: Close when Popup is also not focused\n      // this.setState({ open: false });\n\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onComponentKeyDown\", function (event) {\n      var open = _this.state.open;\n      var keyCode = event.keyCode;\n\n      if (!open) {\n        if ([KeyCode.ENTER, KeyCode.DOWN].indexOf(keyCode) !== -1) {\n          _this.setOpenState(true);\n        }\n      } else if (KeyCode.ESC === keyCode) {\n        _this.setOpenState(false);\n      } else if ([KeyCode.UP, KeyCode.DOWN, KeyCode.LEFT, KeyCode.RIGHT].indexOf(keyCode) !== -1) {\n        // TODO: Handle `open` state\n        event.stopPropagation();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDeselect\", function (wrappedValue, node, nodeEventInfo) {\n      var onDeselect = _this.props.onDeselect;\n      if (!onDeselect) return;\n      onDeselect(wrappedValue, node, nodeEventInfo);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectorClear\", function (event) {\n      var disabled = _this.props.disabled;\n      if (disabled) return;\n\n      _this.triggerChange([], []);\n\n      if (!_this.isSearchValueControlled()) {\n        _this.setUncontrolledState({\n          searchValue: '',\n          filteredTreeNodes: null\n        });\n      }\n\n      event.stopPropagation();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMultipleSelectorRemove\", function (event, removeValue) {\n      event.stopPropagation();\n      var _this$state = _this.state,\n          valueList = _this$state.valueList,\n          missValueList = _this$state.missValueList,\n          valueEntities = _this$state.valueEntities;\n      var _this$props = _this.props,\n          treeCheckable = _this$props.treeCheckable,\n          treeCheckStrictly = _this$props.treeCheckStrictly,\n          treeNodeLabelProp = _this$props.treeNodeLabelProp,\n          disabled = _this$props.disabled;\n      if (disabled) return; // Find trigger entity\n\n      var triggerEntity = valueEntities[removeValue]; // Clean up value\n\n      var newValueList = valueList;\n\n      if (triggerEntity) {\n        // If value is in tree\n        if (treeCheckable && !treeCheckStrictly) {\n          newValueList = valueList.filter(function (_ref) {\n            var value = _ref.value;\n            var entity = valueEntities[value];\n            return !isPosRelated(entity.pos, triggerEntity.pos);\n          });\n        } else {\n          newValueList = valueList.filter(function (_ref2) {\n            var value = _ref2.value;\n            return value !== removeValue;\n          });\n        }\n      }\n\n      var triggerNode = triggerEntity ? triggerEntity.node : null;\n      var extraInfo = {\n        triggerValue: removeValue,\n        triggerNode: triggerNode\n      };\n      var deselectInfo = {\n        node: triggerNode\n      }; // [Legacy] Little hack on this to make same action as `onCheck` event.\n\n      if (treeCheckable) {\n        var filteredEntityList = newValueList.map(function (_ref3) {\n          var value = _ref3.value;\n          return valueEntities[value];\n        });\n        deselectInfo.event = 'check';\n        deselectInfo.checked = false;\n        deselectInfo.checkedNodes = filteredEntityList.map(function (_ref4) {\n          var node = _ref4.node;\n          return node;\n        });\n        deselectInfo.checkedNodesPositions = filteredEntityList.map(function (_ref5) {\n          var node = _ref5.node,\n              pos = _ref5.pos;\n          return {\n            node: node,\n            pos: pos\n          };\n        });\n\n        if (treeCheckStrictly) {\n          extraInfo.allCheckedNodes = deselectInfo.checkedNodes;\n        } else {\n          // TODO: It's too expansive to get `halfCheckedKeys` in onDeselect. Not pass this.\n          extraInfo.allCheckedNodes = flatToHierarchy(filteredEntityList).map(function (_ref6) {\n            var node = _ref6.node;\n            return node;\n          });\n        }\n      } else {\n        deselectInfo.event = 'select';\n        deselectInfo.selected = false;\n        deselectInfo.selectedNodes = newValueList.map(function (_ref7) {\n          var value = _ref7.value;\n          return (valueEntities[value] || {}).node;\n        });\n      } // Some value user pass prop is not in the tree, we also need clean it\n\n\n      var newMissValueList = missValueList.filter(function (_ref8) {\n        var value = _ref8.value;\n        return value !== removeValue;\n      });\n      var wrappedValue;\n\n      if (_this.isLabelInValue()) {\n        wrappedValue = {\n          label: triggerNode ? triggerNode.props[treeNodeLabelProp] : null,\n          value: removeValue\n        };\n      } else {\n        wrappedValue = removeValue;\n      }\n\n      _this.onDeselect(wrappedValue, triggerNode, deselectInfo);\n\n      _this.triggerChange(newMissValueList, newValueList, extraInfo);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onValueTrigger\", function (isAdd, nodeList, nodeEventInfo, nodeExtraInfo) {\n      var node = nodeEventInfo.node;\n      var value = node.props.value;\n      var _this$state2 = _this.state,\n          missValueList = _this$state2.missValueList,\n          valueEntities = _this$state2.valueEntities,\n          keyEntities = _this$state2.keyEntities,\n          searchValue = _this$state2.searchValue;\n      var _this$props2 = _this.props,\n          disabled = _this$props2.disabled,\n          inputValue = _this$props2.inputValue,\n          treeNodeLabelProp = _this$props2.treeNodeLabelProp,\n          onSelect = _this$props2.onSelect,\n          onSearch = _this$props2.onSearch,\n          multiple = _this$props2.multiple,\n          treeCheckable = _this$props2.treeCheckable,\n          treeCheckStrictly = _this$props2.treeCheckStrictly,\n          autoClearSearchValue = _this$props2.autoClearSearchValue;\n      var label = node.props[treeNodeLabelProp];\n      if (disabled) return; // Wrap the return value for user\n\n      var wrappedValue;\n\n      if (_this.isLabelInValue()) {\n        wrappedValue = {\n          value: value,\n          label: label\n        };\n      } else {\n        wrappedValue = value;\n      } // [Legacy] Origin code not trigger `onDeselect` every time. Let's align the behaviour.\n\n\n      if (isAdd) {\n        if (onSelect) {\n          onSelect(wrappedValue, node, nodeEventInfo);\n        }\n      } else {\n        _this.onDeselect(wrappedValue, node, nodeEventInfo);\n      } // Get wrapped value list.\n      // This is a bit hack cause we use key to match the value.\n\n\n      var newValueList = nodeList.map(function (_ref9) {\n        var props = _ref9.props;\n        return {\n          value: props.value,\n          label: props[treeNodeLabelProp]\n        };\n      }); // When is `treeCheckable` and with `searchValue`, `valueList` is not full filled.\n      // We need calculate the missing nodes.\n\n      if (treeCheckable && !treeCheckStrictly) {\n        var keyList = newValueList.map(function (_ref10) {\n          var val = _ref10.value;\n          return valueEntities[val].key;\n        });\n\n        if (isAdd) {\n          keyList = conductCheck(keyList, true, keyEntities).checkedKeys;\n        } else {\n          keyList = conductCheck([valueEntities[value].key], false, keyEntities, {\n            checkedKeys: keyList\n          }).checkedKeys;\n        }\n\n        newValueList = keyList.map(function (key) {\n          var props = keyEntities[key].node.props;\n          return {\n            value: props.value,\n            label: props[treeNodeLabelProp]\n          };\n        });\n      } // Clean up `searchValue` when this prop is set\n\n\n      if (autoClearSearchValue || inputValue === null) {\n        // Clean state `searchValue` if uncontrolled\n        if (!_this.isSearchValueControlled() && (multiple || treeCheckable)) {\n          _this.setUncontrolledState({\n            searchValue: '',\n            filteredTreeNodes: null\n          });\n        } // Trigger onSearch if `searchValue` to be empty.\n        // We should also trigger onSearch with empty string here\n        // since if user use `treeExpandedKeys`, it need user have the ability to reset it.\n\n\n        if (onSearch && searchValue && searchValue.length) {\n          onSearch('');\n        }\n      } // [Legacy] Provide extra info\n\n\n      var extraInfo = _objectSpread({}, nodeExtraInfo, {\n        triggerValue: value,\n        triggerNode: node\n      });\n\n      _this.triggerChange(missValueList, newValueList, extraInfo);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTreeNodeSelect\", function (_, nodeEventInfo) {\n      var _this$state3 = _this.state,\n          valueList = _this$state3.valueList,\n          valueEntities = _this$state3.valueEntities;\n      var _this$props3 = _this.props,\n          treeCheckable = _this$props3.treeCheckable,\n          multiple = _this$props3.multiple;\n      if (treeCheckable) return;\n\n      if (!multiple) {\n        _this.setOpenState(false);\n      }\n\n      var isAdd = nodeEventInfo.selected;\n      var selectedValue = nodeEventInfo.node.props.value;\n      var newValueList;\n\n      if (!multiple) {\n        newValueList = [{\n          value: selectedValue\n        }];\n      } else {\n        newValueList = valueList.filter(function (_ref11) {\n          var value = _ref11.value;\n          return value !== selectedValue;\n        });\n\n        if (isAdd) {\n          newValueList.push({\n            value: selectedValue\n          });\n        }\n      }\n\n      var selectedNodes = newValueList.map(function (_ref12) {\n        var value = _ref12.value;\n        return valueEntities[value];\n      }).filter(function (entity) {\n        return entity;\n      }).map(function (_ref13) {\n        var node = _ref13.node;\n        return node;\n      });\n\n      _this.onValueTrigger(isAdd, selectedNodes, nodeEventInfo, {\n        selected: isAdd\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTreeNodeCheck\", function (_, nodeEventInfo) {\n      var _this$state4 = _this.state,\n          searchValue = _this$state4.searchValue,\n          keyEntities = _this$state4.keyEntities,\n          valueEntities = _this$state4.valueEntities,\n          valueList = _this$state4.valueList;\n      var treeCheckStrictly = _this.props.treeCheckStrictly;\n      var checkedNodes = nodeEventInfo.checkedNodes,\n          checkedNodesPositions = nodeEventInfo.checkedNodesPositions;\n      var isAdd = nodeEventInfo.checked;\n      var extraInfo = {\n        checked: isAdd\n      };\n      var checkedNodeList = checkedNodes; // [Legacy] Check event provide `allCheckedNodes`.\n      // When `treeCheckStrictly` or internal `searchValue` is set, TreeNode will be unrelated:\n      // - Related: Show the top checked nodes and has children prop.\n      // - Unrelated: Show all the checked nodes.\n\n      if (searchValue) {\n        var oriKeyList = valueList.map(function (_ref14) {\n          var value = _ref14.value;\n          return valueEntities[value];\n        }).filter(function (entity) {\n          return entity;\n        }).map(function (_ref15) {\n          var key = _ref15.key;\n          return key;\n        });\n        var keyList;\n\n        if (isAdd) {\n          keyList = Array.from(new Set([].concat(_toConsumableArray(oriKeyList), _toConsumableArray(checkedNodeList.map(function (_ref16) {\n            var value = _ref16.props.value;\n            return valueEntities[value].key;\n          })))));\n        } else {\n          keyList = conductCheck([nodeEventInfo.node.props.eventKey], false, keyEntities, {\n            checkedKeys: oriKeyList\n          }).checkedKeys;\n        }\n\n        checkedNodeList = keyList.map(function (key) {\n          return keyEntities[key].node;\n        }); // Let's follow as not `treeCheckStrictly` format\n\n        extraInfo.allCheckedNodes = keyList.map(function (key) {\n          return cleanEntity(keyEntities[key]);\n        });\n      } else if (treeCheckStrictly) {\n        extraInfo.allCheckedNodes = nodeEventInfo.checkedNodes;\n      } else {\n        extraInfo.allCheckedNodes = flatToHierarchy(checkedNodesPositions);\n      }\n\n      _this.onValueTrigger(isAdd, checkedNodeList, nodeEventInfo, extraInfo);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDropdownVisibleChange\", function (open) {\n      var _this$props4 = _this.props,\n          multiple = _this$props4.multiple,\n          treeCheckable = _this$props4.treeCheckable;\n      var searchValue = _this.state.searchValue; // When set open success and single mode,\n      // we will reset the input content.\n\n      if (open && !multiple && !treeCheckable && searchValue) {\n        _this.setUncontrolledState({\n          searchValue: '',\n          filteredTreeNodes: null\n        });\n      }\n\n      _this.setOpenState(open, true);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSearchInputChange\", function (_ref17) {\n      var value = _ref17.target.value;\n      var _this$state5 = _this.state,\n          treeNodes = _this$state5.treeNodes,\n          valueEntities = _this$state5.valueEntities;\n      var _this$props5 = _this.props,\n          onSearch = _this$props5.onSearch,\n          filterTreeNode = _this$props5.filterTreeNode,\n          treeNodeFilterProp = _this$props5.treeNodeFilterProp;\n\n      if (onSearch) {\n        onSearch(value);\n      }\n\n      var isSet = false;\n\n      if (!_this.isSearchValueControlled()) {\n        isSet = _this.setUncontrolledState({\n          searchValue: value\n        });\n\n        _this.setOpenState(true);\n      }\n\n      if (isSet) {\n        // Do the search logic\n        var upperSearchValue = String(value).toUpperCase();\n        var filterTreeNodeFn = filterTreeNode;\n\n        if (filterTreeNode === false) {\n          // Don't filter if is false\n          filterTreeNodeFn = function filterTreeNodeFn() {\n            return true;\n          };\n        } else if (typeof filterTreeNodeFn !== 'function') {\n          // When is not function (true or undefined), use inner filter\n          filterTreeNodeFn = function filterTreeNodeFn(_, node) {\n            var nodeValue = String(node.props[treeNodeFilterProp]).toUpperCase();\n            return nodeValue.indexOf(upperSearchValue) !== -1;\n          };\n        }\n\n        _this.setState({\n          filteredTreeNodes: getFilterTree(treeNodes, value, filterTreeNodeFn, valueEntities, SelectNode)\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSearchInputKeyDown\", function (event) {\n      var _this$state6 = _this.state,\n          searchValue = _this$state6.searchValue,\n          valueList = _this$state6.valueList;\n      var keyCode = event.keyCode;\n\n      if (KeyCode.BACKSPACE === keyCode && _this.isMultiple() && !searchValue && valueList.length) {\n        var lastValue = valueList[valueList.length - 1].value;\n\n        _this.onMultipleSelectorRemove(event, lastValue);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChoiceAnimationLeave\", function () {\n      raf(function () {\n        _this.forcePopupAlign();\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setPopupRef\", function (popup) {\n      _this.popup = popup;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setUncontrolledState\", function (state) {\n      var needSync = false;\n      var newState = {};\n      Object.keys(state).forEach(function (name) {\n        if (name in _this.props) return;\n        needSync = true;\n        newState[name] = state[name];\n      });\n\n      if (needSync) {\n        _this.setState(newState);\n      }\n\n      return needSync;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setOpenState\", function (open) {\n      var byTrigger = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var onDropdownVisibleChange = _this.props.onDropdownVisibleChange;\n\n      if (onDropdownVisibleChange && onDropdownVisibleChange(open, {\n        documentClickClose: !open && byTrigger\n      }) === false) {\n        return;\n      }\n\n      _this.setUncontrolledState({\n        open: open\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isMultiple\", function () {\n      var _this$props6 = _this.props,\n          multiple = _this$props6.multiple,\n          treeCheckable = _this$props6.treeCheckable;\n      return !!(multiple || treeCheckable);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isLabelInValue\", function () {\n      return isLabelInValue(_this.props);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isSearchValueControlled\", function () {\n      var inputValue = _this.props.inputValue;\n      if ('searchValue' in _this.props) return true;\n      return 'inputValue' in _this.props && inputValue !== null;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"forcePopupAlign\", function () {\n      var $trigger = _this.selectTriggerRef.current;\n\n      if ($trigger) {\n        $trigger.forcePopupAlign();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"delayForcePopupAlign\", function () {\n      // Wait 2 frame to avoid dom update & dom algin in the same time\n      // https://github.com/ant-design/ant-design/issues/12031\n      raf(function () {\n        raf(_this.forcePopupAlign);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"triggerChange\", function (missValueList, valueList) {\n      var extraInfo = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var _this$state7 = _this.state,\n          valueEntities = _this$state7.valueEntities,\n          searchValue = _this$state7.searchValue,\n          prevSelectorValueList = _this$state7.selectorValueList;\n      var _this$props7 = _this.props,\n          onChange = _this$props7.onChange,\n          disabled = _this$props7.disabled,\n          treeCheckable = _this$props7.treeCheckable,\n          treeCheckStrictly = _this$props7.treeCheckStrictly;\n      if (disabled) return; // Trigger\n\n      var extra = _objectSpread({\n        // [Legacy] Always return as array contains label & value\n        preValue: prevSelectorValueList.map(function (_ref18) {\n          var label = _ref18.label,\n              value = _ref18.value;\n          return {\n            label: label,\n            value: value\n          };\n        })\n      }, extraInfo); // Format value by `treeCheckStrictly`\n\n\n      var selectorValueList = formatSelectorValue(valueList, _this.props, valueEntities);\n\n      if (!('value' in _this.props)) {\n        var newState = {\n          missValueList: missValueList,\n          valueList: valueList,\n          selectorValueList: selectorValueList\n        };\n\n        if (searchValue && treeCheckable && !treeCheckStrictly) {\n          newState.searchHalfCheckedKeys = getHalfCheckedKeys(valueList, valueEntities);\n        }\n\n        _this.setState(newState);\n      } // Only do the logic when `onChange` function provided\n\n\n      if (onChange) {\n        var connectValueList; // Get value by mode\n\n        if (_this.isMultiple()) {\n          connectValueList = [].concat(_toConsumableArray(missValueList), _toConsumableArray(selectorValueList));\n        } else {\n          connectValueList = selectorValueList.slice(0, 1);\n        }\n\n        var labelList = null;\n        var returnValue;\n\n        if (_this.isLabelInValue()) {\n          returnValue = connectValueList.map(function (_ref19) {\n            var label = _ref19.label,\n                value = _ref19.value;\n            return {\n              label: label,\n              value: value\n            };\n          });\n        } else {\n          labelList = [];\n          returnValue = connectValueList.map(function (_ref20) {\n            var label = _ref20.label,\n                value = _ref20.value;\n            labelList.push(label);\n            return value;\n          });\n        }\n\n        if (!_this.isMultiple()) {\n          returnValue = returnValue[0];\n        }\n\n        onChange(returnValue, labelList, extra);\n      }\n    });\n\n    var prefixAria = _props.prefixAria,\n        defaultOpen = _props.defaultOpen,\n        _open = _props.open;\n    _this.state = {\n      open: _open || defaultOpen,\n      valueList: [],\n      searchHalfCheckedKeys: [],\n      missValueList: [],\n      // Contains the value not in the tree\n      selectorValueList: [],\n      // Used for multiple selector\n      valueEntities: {},\n      keyEntities: {},\n      searchValue: '',\n      init: true\n    };\n    _this.selectorRef = createRef();\n    _this.selectTriggerRef = createRef(); // ARIA need `aria-controls` props mapping\n    // Since this need user input. Let's generate ourselves\n\n    _this.ariaId = generateAriaId(\"\".concat(prefixAria, \"-list\"));\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      return {\n        rcTreeSelect: {\n          onSelectorFocus: this.onSelectorFocus,\n          onSelectorBlur: this.onSelectorBlur,\n          onSelectorKeyDown: this.onComponentKeyDown,\n          onSelectorClear: this.onSelectorClear,\n          onMultipleSelectorRemove: this.onMultipleSelectorRemove,\n          onTreeNodeSelect: this.onTreeNodeSelect,\n          onTreeNodeCheck: this.onTreeNodeCheck,\n          onPopupKeyDown: this.onComponentKeyDown,\n          onSearchInputChange: this.onSearchInputChange,\n          onSearchInputKeyDown: this.onSearchInputKeyDown\n        }\n      };\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props8 = this.props,\n          autoFocus = _this$props8.autoFocus,\n          disabled = _this$props8.disabled;\n\n      if (autoFocus && !disabled) {\n        this.focus();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_, prevState) {\n      var _this2 = this;\n\n      var prefixCls = this.props.prefixCls;\n      var _this$state8 = this.state,\n          valueList = _this$state8.valueList,\n          open = _this$state8.open,\n          selectorValueList = _this$state8.selectorValueList,\n          valueEntities = _this$state8.valueEntities;\n      var isMultiple = this.isMultiple();\n\n      if (prevState.valueList !== valueList) {\n        this.forcePopupAlign();\n      } // Scroll to value position, only need sync on single mode\n\n\n      if (!isMultiple && selectorValueList.length && !prevState.open && open && this.popup) {\n        var value = selectorValueList[0].value;\n\n        var _this$popup$getTree = this.popup.getTree(),\n            domTreeNodes = _this$popup$getTree.domTreeNodes;\n\n        var _ref21 = valueEntities[value] || {},\n            key = _ref21.key;\n\n        var treeNode = domTreeNodes[key];\n\n        if (treeNode) {\n          var domNode = findDOMNode(treeNode);\n          raf(function () {\n            var popupNode = findDOMNode(_this2.popup);\n            var triggerContainer = findPopupContainer(popupNode, \"\".concat(prefixCls, \"-dropdown\"));\n            var searchNode = _this2.popup.searchRef.current;\n\n            if (domNode && triggerContainer && searchNode) {\n              scrollIntoView(domNode, triggerContainer, {\n                onlyScrollIfNeeded: true,\n                offsetTop: searchNode.offsetHeight\n              });\n            }\n          });\n        }\n      }\n    } // ==================== Selector ====================\n\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.selectorRef.current.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.selectorRef.current.blur();\n    } // ===================== Render =====================\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state9 = this.state,\n          valueList = _this$state9.valueList,\n          missValueList = _this$state9.missValueList,\n          selectorValueList = _this$state9.selectorValueList,\n          searchHalfCheckedKeys = _this$state9.searchHalfCheckedKeys,\n          valueEntities = _this$state9.valueEntities,\n          keyEntities = _this$state9.keyEntities,\n          searchValue = _this$state9.searchValue,\n          open = _this$state9.open,\n          focused = _this$state9.focused,\n          treeNodes = _this$state9.treeNodes,\n          filteredTreeNodes = _this$state9.filteredTreeNodes;\n      var _this$props9 = this.props,\n          prefixCls = _this$props9.prefixCls,\n          treeExpandedKeys = _this$props9.treeExpandedKeys,\n          onTreeExpand = _this$props9.onTreeExpand;\n      var isMultiple = this.isMultiple();\n\n      var passProps = _objectSpread({}, this.props, {\n        isMultiple: isMultiple,\n        valueList: valueList,\n        searchHalfCheckedKeys: searchHalfCheckedKeys,\n        selectorValueList: [].concat(_toConsumableArray(missValueList), _toConsumableArray(selectorValueList)),\n        valueEntities: valueEntities,\n        keyEntities: keyEntities,\n        searchValue: searchValue,\n        upperSearchValue: (searchValue || '').toUpperCase(),\n        // Perf save\n        open: open,\n        focused: focused,\n        onChoiceAnimationLeave: this.onChoiceAnimationLeave,\n        dropdownPrefixCls: \"\".concat(prefixCls, \"-dropdown\"),\n        ariaId: this.ariaId\n      });\n\n      var Popup = isMultiple ? MultiplePopup : SinglePopup;\n      var $popup = React.createElement(Popup, _extends({\n        ref: this.setPopupRef\n      }, passProps, {\n        onTreeExpanded: this.delayForcePopupAlign,\n        treeNodes: treeNodes,\n        filteredTreeNodes: filteredTreeNodes // Tree expanded control\n        ,\n        treeExpandedKeys: treeExpandedKeys,\n        onTreeExpand: onTreeExpand\n      }));\n      var Selector = isMultiple ? MultipleSelector : SingleSelector;\n      var $selector = React.createElement(Selector, _extends({}, passProps, {\n        ref: this.selectorRef\n      }));\n      return React.createElement(SelectTrigger, _extends({}, passProps, {\n        ref: this.selectTriggerRef,\n        popupElement: $popup,\n        onKeyDown: this.onKeyDown,\n        onDropdownVisibleChange: this.onDropdownVisibleChange\n      }), $selector);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var _prevState$prevProps = prevState.prevProps,\n          prevProps = _prevState$prevProps === void 0 ? {} : _prevState$prevProps;\n      var treeCheckable = nextProps.treeCheckable,\n          treeCheckStrictly = nextProps.treeCheckStrictly,\n          filterTreeNode = nextProps.filterTreeNode,\n          treeNodeFilterProp = nextProps.treeNodeFilterProp,\n          treeDataSimpleMode = nextProps.treeDataSimpleMode;\n      var newState = {\n        prevProps: nextProps,\n        init: false\n      }; // Process the state when props updated\n\n      function processState(propName, updater) {\n        if (prevProps[propName] !== nextProps[propName]) {\n          updater(nextProps[propName], prevProps[propName]);\n          return true;\n        }\n\n        return false;\n      }\n\n      var valueRefresh = false; // Open\n\n      processState('open', function (propValue) {\n        newState.open = propValue;\n      }); // Tree Nodes\n\n      var treeNodes;\n      var treeDataChanged = false;\n      var treeDataModeChanged = false;\n      processState('treeData', function (propValue) {\n        treeNodes = convertDataToTree(propValue);\n        treeDataChanged = true;\n      });\n      processState('treeDataSimpleMode', function (propValue, prevValue) {\n        if (!propValue) return;\n        var prev = !prevValue || prevValue === true ? {} : prevValue; // Shallow equal to avoid dynamic prop object\n\n        if (!shallowEqual(propValue, prev)) {\n          treeDataModeChanged = true;\n        }\n      }); // Parse by `treeDataSimpleMode`\n\n      if (treeDataSimpleMode && (treeDataChanged || treeDataModeChanged)) {\n        var simpleMapper = _objectSpread({\n          id: 'id',\n          pId: 'pId',\n          rootPId: null\n        }, treeDataSimpleMode !== true ? treeDataSimpleMode : {});\n\n        treeNodes = convertDataToTree(parseSimpleTreeData(nextProps.treeData, simpleMapper));\n      } // If `treeData` not provide, use children TreeNodes\n\n\n      if (!nextProps.treeData) {\n        processState('children', function (propValue) {\n          treeNodes = Array.isArray(propValue) ? propValue : [propValue];\n        });\n      } // Convert `treeData` to entities\n\n\n      if (treeNodes) {\n        var entitiesMap = convertTreeToEntities(treeNodes);\n        newState.treeNodes = treeNodes;\n        newState.posEntities = entitiesMap.posEntities;\n        newState.valueEntities = entitiesMap.valueEntities;\n        newState.keyEntities = entitiesMap.keyEntities;\n        valueRefresh = true;\n      } // Value List\n\n\n      if (prevState.init) {\n        processState('defaultValue', function (propValue) {\n          newState.valueList = formatInternalValue(propValue, nextProps);\n          valueRefresh = true;\n        });\n      }\n\n      processState('value', function (propValue) {\n        newState.valueList = formatInternalValue(propValue, nextProps);\n        valueRefresh = true;\n      }); // Selector Value List\n\n      if (valueRefresh) {\n        // Find out that value not exist in the tree\n        var missValueList = [];\n        var filteredValueList = [];\n        var keyList = []; // Get latest value list\n\n        var latestValueList = newState.valueList;\n\n        if (!latestValueList) {\n          // Also need add prev missValueList to avoid new treeNodes contains the value\n          latestValueList = [].concat(_toConsumableArray(prevState.valueList), _toConsumableArray(prevState.missValueList));\n        } // Get key by value\n\n\n        var valueLabels = {};\n        latestValueList.forEach(function (wrapperValue) {\n          var value = wrapperValue.value,\n              label = wrapperValue.label;\n          var entity = (newState.valueEntities || prevState.valueEntities)[value];\n          valueLabels[value] = label;\n\n          if (entity) {\n            keyList.push(entity.key);\n            filteredValueList.push(wrapperValue);\n            return;\n          } // If not match, it may caused by ajax load. We need keep this\n\n\n          missValueList.push(wrapperValue);\n        }); // We need calculate the value when tree is checked tree\n\n        if (treeCheckable && !treeCheckStrictly) {\n          // Calculate the keys need to be checked\n          var _conductCheck = conductCheck(keyList, true, newState.keyEntities || prevState.keyEntities),\n              checkedKeys = _conductCheck.checkedKeys; // Format value list again for internal usage\n\n\n          newState.valueList = checkedKeys.map(function (key) {\n            var val = (newState.keyEntities || prevState.keyEntities)[key].value;\n            var wrappedValue = {\n              value: val\n            };\n\n            if (valueLabels[val] !== undefined) {\n              wrappedValue.label = valueLabels[val];\n            }\n\n            return wrappedValue;\n          });\n        } else {\n          newState.valueList = filteredValueList;\n        } // Fill the missValueList, we still need display in the selector\n\n\n        newState.missValueList = missValueList; // Calculate the value list for `Selector` usage\n\n        newState.selectorValueList = formatSelectorValue(newState.valueList, nextProps, newState.valueEntities || prevState.valueEntities);\n      } // [Legacy] To align with `Select` component,\n      // We use `searchValue` instead of `inputValue` but still keep the api\n      // `inputValue` support `null` to work as `autoClearSearchValue`\n\n\n      processState('inputValue', function (propValue) {\n        if (propValue !== null) {\n          newState.searchValue = propValue;\n        }\n      }); // Search value\n\n      processState('searchValue', function (propValue) {\n        newState.searchValue = propValue;\n      }); // Do the search logic\n\n      if (newState.searchValue !== undefined || prevState.searchValue && treeNodes) {\n        var searchValue = newState.searchValue !== undefined ? newState.searchValue : prevState.searchValue;\n        var upperSearchValue = String(searchValue).toUpperCase();\n        var filterTreeNodeFn = filterTreeNode;\n\n        if (filterTreeNode === false) {\n          // Don't filter if is false\n          filterTreeNodeFn = function filterTreeNodeFn() {\n            return true;\n          };\n        } else if (typeof filterTreeNodeFn !== 'function') {\n          // When is not function (true or undefined), use inner filter\n          filterTreeNodeFn = function filterTreeNodeFn(_, node) {\n            var nodeValue = String(node.props[treeNodeFilterProp]).toUpperCase();\n            return nodeValue.indexOf(upperSearchValue) !== -1;\n          };\n        }\n\n        newState.filteredTreeNodes = getFilterTree(newState.treeNodes || prevState.treeNodes, searchValue, filterTreeNodeFn, newState.valueEntities || prevState.valueEntities, SelectNode);\n      } // We should re-calculate the halfCheckedKeys when in search mode\n\n\n      if (valueRefresh && treeCheckable && !treeCheckStrictly && (newState.searchValue || prevState.searchValue)) {\n        newState.searchHalfCheckedKeys = getHalfCheckedKeys(newState.valueList, newState.valueEntities || prevState.valueEntities);\n      } // Checked Strategy\n\n\n      processState('showCheckedStrategy', function () {\n        newState.selectorValueList = newState.selectorValueList || formatSelectorValue(newState.valueList || prevState.valueList, nextProps, newState.valueEntities || prevState.valueEntities);\n      });\n      return newState;\n    }\n  }]);\n\n  return Select;\n}(React.Component);\n\n_defineProperty(Select, \"propTypes\", {\n  prefixCls: PropTypes.string,\n  prefixAria: PropTypes.string,\n  multiple: PropTypes.bool,\n  showArrow: PropTypes.bool,\n  open: PropTypes.bool,\n  value: valueProp,\n  autoFocus: PropTypes.bool,\n  defaultOpen: PropTypes.bool,\n  defaultValue: valueProp,\n  showSearch: PropTypes.bool,\n  placeholder: PropTypes.node,\n  inputValue: PropTypes.string,\n  // [Legacy] Deprecated. Use `searchValue` instead.\n  searchValue: PropTypes.string,\n  autoClearSearchValue: PropTypes.bool,\n  searchPlaceholder: PropTypes.node,\n  // [Legacy] Confuse with placeholder\n  disabled: PropTypes.bool,\n  children: PropTypes.node,\n  labelInValue: PropTypes.bool,\n  maxTagCount: PropTypes.number,\n  maxTagPlaceholder: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  maxTagTextLength: PropTypes.number,\n  showCheckedStrategy: PropTypes.oneOf([SHOW_ALL, SHOW_PARENT, SHOW_CHILD]),\n  dropdownMatchSelectWidth: PropTypes.bool,\n  treeData: PropTypes.array,\n  treeDataSimpleMode: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n  treeNodeFilterProp: PropTypes.string,\n  treeNodeLabelProp: PropTypes.string,\n  treeCheckable: PropTypes.oneOfType([PropTypes.bool, PropTypes.node]),\n  treeCheckStrictly: PropTypes.bool,\n  treeIcon: PropTypes.bool,\n  treeLine: PropTypes.bool,\n  treeDefaultExpandAll: PropTypes.bool,\n  treeDefaultExpandedKeys: PropTypes.array,\n  treeExpandedKeys: PropTypes.array,\n  loadData: PropTypes.func,\n  filterTreeNode: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\n  notFoundContent: PropTypes.node,\n  onSearch: PropTypes.func,\n  onSelect: PropTypes.func,\n  onDeselect: PropTypes.func,\n  onChange: PropTypes.func,\n  onDropdownVisibleChange: PropTypes.func,\n  onTreeExpand: PropTypes.func,\n  inputIcon: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  clearIcon: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  removeIcon: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  switcherIcon: PropTypes.oneOfType([PropTypes.node, PropTypes.func])\n});\n\n_defineProperty(Select, \"childContextTypes\", {\n  rcTreeSelect: PropTypes.shape(_objectSpread({}, selectorContextTypes, {}, multipleSelectorContextTypes, {}, popupContextTypes, {\n    onSearchInputChange: PropTypes.func,\n    onSearchInputKeyDown: PropTypes.func\n  }))\n});\n\n_defineProperty(Select, \"defaultProps\", {\n  prefixCls: 'rc-tree-select',\n  prefixAria: 'rc-tree-select',\n  showArrow: true,\n  showSearch: true,\n  autoClearSearchValue: true,\n  showCheckedStrategy: SHOW_CHILD,\n  // dropdownMatchSelectWidth change the origin design, set to false now\n  // ref: https://github.com/react-component/select/blob/4cad95e098a341a09de239ad6981067188842020/src/Select.jsx#L344\n  // ref: https://github.com/react-component/select/pull/71\n  treeNodeFilterProp: 'value',\n  treeNodeLabelProp: 'title',\n  treeIcon: false,\n  notFoundContent: 'Not Found'\n});\n\nSelect.TreeNode = SelectNode;\nSelect.SHOW_ALL = SHOW_ALL;\nSelect.SHOW_PARENT = SHOW_PARENT;\nSelect.SHOW_CHILD = SHOW_CHILD; // Let warning show correct component name\n\nSelect.displayName = 'TreeSelect';\npolyfill(Select);\nexport default Select;","map":{"version":3,"sources":["/home/devrobot/Escritorio/ecommerce-frontend/node_modules/rc-tree-select/es/Select.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","toString","Array","from","isArray","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","constructor","value","_setPrototypeOf","p","obj","React","findDOMNode","PropTypes","polyfill","KeyCode","shallowEqual","raf","scrollIntoView","SelectTrigger","selectorContextTypes","popupContextTypes","SingleSelector","MultipleSelector","multipleSelectorContextTypes","SinglePopup","MultiplePopup","SHOW_ALL","SHOW_PARENT","SHOW_CHILD","createRef","generateAriaId","formatInternalValue","formatSelectorValue","parseSimpleTreeData","convertDataToTree","convertTreeToEntities","conductCheck","getHalfCheckedKeys","flatToHierarchy","isPosRelated","isLabelInValue","getFilterTree","cleanEntity","findPopupContainer","valueProp","SelectNode","Select","_React$Component","_props","_this","setState","focused","event","open","state","keyCode","ENTER","DOWN","indexOf","setOpenState","ESC","UP","LEFT","RIGHT","stopPropagation","wrappedValue","node","nodeEventInfo","onDeselect","disabled","triggerChange","isSearchValueControlled","setUncontrolledState","searchValue","filteredTreeNodes","removeValue","_this$state","valueList","missValueList","valueEntities","_this$props","treeCheckable","treeCheckStrictly","treeNodeLabelProp","triggerEntity","newValueList","_ref","entity","pos","_ref2","triggerNode","extraInfo","triggerValue","deselectInfo","filteredEntityList","map","_ref3","checked","checkedNodes","_ref4","checkedNodesPositions","_ref5","allCheckedNodes","_ref6","selected","selectedNodes","_ref7","newMissValueList","_ref8","label","isAdd","nodeList","nodeExtraInfo","_this$state2","keyEntities","_this$props2","inputValue","onSelect","onSearch","multiple","autoClearSearchValue","_ref9","keyList","_ref10","val","checkedKeys","_","_this$state3","_this$props3","selectedValue","_ref11","_ref12","_ref13","onValueTrigger","_this$state4","checkedNodeList","oriKeyList","_ref14","_ref15","Set","concat","_ref16","eventKey","_this$props4","_ref17","_this$state5","treeNodes","_this$props5","filterTreeNode","treeNodeFilterProp","isSet","upperSearchValue","String","toUpperCase","filterTreeNodeFn","nodeValue","_this$state6","BACKSPACE","isMultiple","lastValue","onMultipleSelectorRemove","forcePopupAlign","popup","needSync","newState","name","byTrigger","undefined","onDropdownVisibleChange","documentClickClose","_this$props6","$trigger","selectTriggerRef","current","_this$state7","prevSelectorValueList","selectorValueList","_this$props7","onChange","extra","preValue","_ref18","searchHalfCheckedKeys","connectValueList","slice","labelList","returnValue","_ref19","_ref20","prefixAria","defaultOpen","_open","init","selectorRef","ariaId","getChildContext","rcTreeSelect","onSelectorFocus","onSelectorBlur","onSelectorKeyDown","onComponentKeyDown","onSelectorClear","onTreeNodeSelect","onTreeNodeCheck","onPopupKeyDown","onSearchInputChange","onSearchInputKeyDown","componentDidMount","_this$props8","autoFocus","focus","componentDidUpdate","prevState","_this2","prefixCls","_this$state8","_this$popup$getTree","getTree","domTreeNodes","_ref21","treeNode","domNode","popupNode","triggerContainer","searchNode","searchRef","onlyScrollIfNeeded","offsetTop","offsetHeight","blur","render","_this$state9","_this$props9","treeExpandedKeys","onTreeExpand","passProps","onChoiceAnimationLeave","dropdownPrefixCls","Popup","$popup","createElement","ref","setPopupRef","onTreeExpanded","delayForcePopupAlign","Selector","$selector","popupElement","onKeyDown","getDerivedStateFromProps","nextProps","_prevState$prevProps","prevProps","treeDataSimpleMode","processState","propName","updater","valueRefresh","propValue","treeDataChanged","treeDataModeChanged","prevValue","prev","simpleMapper","id","pId","rootPId","treeData","entitiesMap","posEntities","filteredValueList","latestValueList","valueLabels","wrapperValue","_conductCheck","Component","string","bool","showArrow","defaultValue","showSearch","placeholder","searchPlaceholder","children","labelInValue","maxTagCount","number","maxTagPlaceholder","oneOfType","func","maxTagTextLength","showCheckedStrategy","oneOf","dropdownMatchSelectWidth","array","treeIcon","treeLine","treeDefaultExpandAll","treeDefaultExpandedKeys","loadData","notFoundContent","inputIcon","clearIcon","removeIcon","switcherIcon","shape","TreeNode","displayName"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * ARIA: https://www.w3.org/TR/wai-aria/#combobox\n * Sample 1: https://www.w3.org/TR/2017/NOTE-wai-aria-practices-1.1-20171214/examples/combobox/aria1.1pattern/listbox-combo.html\n * Sample 2: https://www.w3.org/blog/wai-components-gallery/widget/combobox-with-aria-autocompleteinline/\n *\n * Tab logic:\n * Popup is close\n * 1. Focus input (mark component as focused)\n * 2. Press enter to show the popup\n * 3. If popup has input, focus it\n *\n * Popup is open\n * 1. press tab to close the popup\n * 2. Focus back to the selection input box\n * 3. Let the native tab going on\n *\n * TreeSelect use 2 design type.\n * In single mode, we should focus on the `span`\n * In multiple mode, we should focus on the `input`\n */\nimport React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { polyfill } from 'react-lifecycles-compat';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport shallowEqual from 'shallowequal';\nimport raf from 'raf';\nimport scrollIntoView from 'dom-scroll-into-view';\nimport SelectTrigger from './SelectTrigger';\nimport { selectorContextTypes } from './Base/BaseSelector';\nimport { popupContextTypes } from './Base/BasePopup';\nimport SingleSelector from './Selector/SingleSelector';\nimport MultipleSelector, { multipleSelectorContextTypes } from './Selector/MultipleSelector';\nimport SinglePopup from './Popup/SinglePopup';\nimport MultiplePopup from './Popup/MultiplePopup';\nimport { SHOW_ALL, SHOW_PARENT, SHOW_CHILD } from './strategies';\nimport { createRef, generateAriaId, formatInternalValue, formatSelectorValue, parseSimpleTreeData, convertDataToTree, convertTreeToEntities, conductCheck, getHalfCheckedKeys, flatToHierarchy, isPosRelated, isLabelInValue, getFilterTree, cleanEntity, findPopupContainer } from './util';\nimport { valueProp } from './propTypes';\nimport SelectNode from './SelectNode';\n\nvar Select =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Select, _React$Component);\n\n  function Select(_props) {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Select).call(this, _props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectorFocus\", function () {\n      _this.setState({\n        focused: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectorBlur\", function () {\n      _this.setState({\n        focused: false\n      }); // TODO: Close when Popup is also not focused\n      // this.setState({ open: false });\n\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onComponentKeyDown\", function (event) {\n      var open = _this.state.open;\n      var keyCode = event.keyCode;\n\n      if (!open) {\n        if ([KeyCode.ENTER, KeyCode.DOWN].indexOf(keyCode) !== -1) {\n          _this.setOpenState(true);\n        }\n      } else if (KeyCode.ESC === keyCode) {\n        _this.setOpenState(false);\n      } else if ([KeyCode.UP, KeyCode.DOWN, KeyCode.LEFT, KeyCode.RIGHT].indexOf(keyCode) !== -1) {\n        // TODO: Handle `open` state\n        event.stopPropagation();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDeselect\", function (wrappedValue, node, nodeEventInfo) {\n      var onDeselect = _this.props.onDeselect;\n      if (!onDeselect) return;\n      onDeselect(wrappedValue, node, nodeEventInfo);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectorClear\", function (event) {\n      var disabled = _this.props.disabled;\n      if (disabled) return;\n\n      _this.triggerChange([], []);\n\n      if (!_this.isSearchValueControlled()) {\n        _this.setUncontrolledState({\n          searchValue: '',\n          filteredTreeNodes: null\n        });\n      }\n\n      event.stopPropagation();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMultipleSelectorRemove\", function (event, removeValue) {\n      event.stopPropagation();\n      var _this$state = _this.state,\n          valueList = _this$state.valueList,\n          missValueList = _this$state.missValueList,\n          valueEntities = _this$state.valueEntities;\n      var _this$props = _this.props,\n          treeCheckable = _this$props.treeCheckable,\n          treeCheckStrictly = _this$props.treeCheckStrictly,\n          treeNodeLabelProp = _this$props.treeNodeLabelProp,\n          disabled = _this$props.disabled;\n      if (disabled) return; // Find trigger entity\n\n      var triggerEntity = valueEntities[removeValue]; // Clean up value\n\n      var newValueList = valueList;\n\n      if (triggerEntity) {\n        // If value is in tree\n        if (treeCheckable && !treeCheckStrictly) {\n          newValueList = valueList.filter(function (_ref) {\n            var value = _ref.value;\n            var entity = valueEntities[value];\n            return !isPosRelated(entity.pos, triggerEntity.pos);\n          });\n        } else {\n          newValueList = valueList.filter(function (_ref2) {\n            var value = _ref2.value;\n            return value !== removeValue;\n          });\n        }\n      }\n\n      var triggerNode = triggerEntity ? triggerEntity.node : null;\n      var extraInfo = {\n        triggerValue: removeValue,\n        triggerNode: triggerNode\n      };\n      var deselectInfo = {\n        node: triggerNode\n      }; // [Legacy] Little hack on this to make same action as `onCheck` event.\n\n      if (treeCheckable) {\n        var filteredEntityList = newValueList.map(function (_ref3) {\n          var value = _ref3.value;\n          return valueEntities[value];\n        });\n        deselectInfo.event = 'check';\n        deselectInfo.checked = false;\n        deselectInfo.checkedNodes = filteredEntityList.map(function (_ref4) {\n          var node = _ref4.node;\n          return node;\n        });\n        deselectInfo.checkedNodesPositions = filteredEntityList.map(function (_ref5) {\n          var node = _ref5.node,\n              pos = _ref5.pos;\n          return {\n            node: node,\n            pos: pos\n          };\n        });\n\n        if (treeCheckStrictly) {\n          extraInfo.allCheckedNodes = deselectInfo.checkedNodes;\n        } else {\n          // TODO: It's too expansive to get `halfCheckedKeys` in onDeselect. Not pass this.\n          extraInfo.allCheckedNodes = flatToHierarchy(filteredEntityList).map(function (_ref6) {\n            var node = _ref6.node;\n            return node;\n          });\n        }\n      } else {\n        deselectInfo.event = 'select';\n        deselectInfo.selected = false;\n        deselectInfo.selectedNodes = newValueList.map(function (_ref7) {\n          var value = _ref7.value;\n          return (valueEntities[value] || {}).node;\n        });\n      } // Some value user pass prop is not in the tree, we also need clean it\n\n\n      var newMissValueList = missValueList.filter(function (_ref8) {\n        var value = _ref8.value;\n        return value !== removeValue;\n      });\n      var wrappedValue;\n\n      if (_this.isLabelInValue()) {\n        wrappedValue = {\n          label: triggerNode ? triggerNode.props[treeNodeLabelProp] : null,\n          value: removeValue\n        };\n      } else {\n        wrappedValue = removeValue;\n      }\n\n      _this.onDeselect(wrappedValue, triggerNode, deselectInfo);\n\n      _this.triggerChange(newMissValueList, newValueList, extraInfo);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onValueTrigger\", function (isAdd, nodeList, nodeEventInfo, nodeExtraInfo) {\n      var node = nodeEventInfo.node;\n      var value = node.props.value;\n      var _this$state2 = _this.state,\n          missValueList = _this$state2.missValueList,\n          valueEntities = _this$state2.valueEntities,\n          keyEntities = _this$state2.keyEntities,\n          searchValue = _this$state2.searchValue;\n      var _this$props2 = _this.props,\n          disabled = _this$props2.disabled,\n          inputValue = _this$props2.inputValue,\n          treeNodeLabelProp = _this$props2.treeNodeLabelProp,\n          onSelect = _this$props2.onSelect,\n          onSearch = _this$props2.onSearch,\n          multiple = _this$props2.multiple,\n          treeCheckable = _this$props2.treeCheckable,\n          treeCheckStrictly = _this$props2.treeCheckStrictly,\n          autoClearSearchValue = _this$props2.autoClearSearchValue;\n      var label = node.props[treeNodeLabelProp];\n      if (disabled) return; // Wrap the return value for user\n\n      var wrappedValue;\n\n      if (_this.isLabelInValue()) {\n        wrappedValue = {\n          value: value,\n          label: label\n        };\n      } else {\n        wrappedValue = value;\n      } // [Legacy] Origin code not trigger `onDeselect` every time. Let's align the behaviour.\n\n\n      if (isAdd) {\n        if (onSelect) {\n          onSelect(wrappedValue, node, nodeEventInfo);\n        }\n      } else {\n        _this.onDeselect(wrappedValue, node, nodeEventInfo);\n      } // Get wrapped value list.\n      // This is a bit hack cause we use key to match the value.\n\n\n      var newValueList = nodeList.map(function (_ref9) {\n        var props = _ref9.props;\n        return {\n          value: props.value,\n          label: props[treeNodeLabelProp]\n        };\n      }); // When is `treeCheckable` and with `searchValue`, `valueList` is not full filled.\n      // We need calculate the missing nodes.\n\n      if (treeCheckable && !treeCheckStrictly) {\n        var keyList = newValueList.map(function (_ref10) {\n          var val = _ref10.value;\n          return valueEntities[val].key;\n        });\n\n        if (isAdd) {\n          keyList = conductCheck(keyList, true, keyEntities).checkedKeys;\n        } else {\n          keyList = conductCheck([valueEntities[value].key], false, keyEntities, {\n            checkedKeys: keyList\n          }).checkedKeys;\n        }\n\n        newValueList = keyList.map(function (key) {\n          var props = keyEntities[key].node.props;\n          return {\n            value: props.value,\n            label: props[treeNodeLabelProp]\n          };\n        });\n      } // Clean up `searchValue` when this prop is set\n\n\n      if (autoClearSearchValue || inputValue === null) {\n        // Clean state `searchValue` if uncontrolled\n        if (!_this.isSearchValueControlled() && (multiple || treeCheckable)) {\n          _this.setUncontrolledState({\n            searchValue: '',\n            filteredTreeNodes: null\n          });\n        } // Trigger onSearch if `searchValue` to be empty.\n        // We should also trigger onSearch with empty string here\n        // since if user use `treeExpandedKeys`, it need user have the ability to reset it.\n\n\n        if (onSearch && searchValue && searchValue.length) {\n          onSearch('');\n        }\n      } // [Legacy] Provide extra info\n\n\n      var extraInfo = _objectSpread({}, nodeExtraInfo, {\n        triggerValue: value,\n        triggerNode: node\n      });\n\n      _this.triggerChange(missValueList, newValueList, extraInfo);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTreeNodeSelect\", function (_, nodeEventInfo) {\n      var _this$state3 = _this.state,\n          valueList = _this$state3.valueList,\n          valueEntities = _this$state3.valueEntities;\n      var _this$props3 = _this.props,\n          treeCheckable = _this$props3.treeCheckable,\n          multiple = _this$props3.multiple;\n      if (treeCheckable) return;\n\n      if (!multiple) {\n        _this.setOpenState(false);\n      }\n\n      var isAdd = nodeEventInfo.selected;\n      var selectedValue = nodeEventInfo.node.props.value;\n      var newValueList;\n\n      if (!multiple) {\n        newValueList = [{\n          value: selectedValue\n        }];\n      } else {\n        newValueList = valueList.filter(function (_ref11) {\n          var value = _ref11.value;\n          return value !== selectedValue;\n        });\n\n        if (isAdd) {\n          newValueList.push({\n            value: selectedValue\n          });\n        }\n      }\n\n      var selectedNodes = newValueList.map(function (_ref12) {\n        var value = _ref12.value;\n        return valueEntities[value];\n      }).filter(function (entity) {\n        return entity;\n      }).map(function (_ref13) {\n        var node = _ref13.node;\n        return node;\n      });\n\n      _this.onValueTrigger(isAdd, selectedNodes, nodeEventInfo, {\n        selected: isAdd\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTreeNodeCheck\", function (_, nodeEventInfo) {\n      var _this$state4 = _this.state,\n          searchValue = _this$state4.searchValue,\n          keyEntities = _this$state4.keyEntities,\n          valueEntities = _this$state4.valueEntities,\n          valueList = _this$state4.valueList;\n      var treeCheckStrictly = _this.props.treeCheckStrictly;\n      var checkedNodes = nodeEventInfo.checkedNodes,\n          checkedNodesPositions = nodeEventInfo.checkedNodesPositions;\n      var isAdd = nodeEventInfo.checked;\n      var extraInfo = {\n        checked: isAdd\n      };\n      var checkedNodeList = checkedNodes; // [Legacy] Check event provide `allCheckedNodes`.\n      // When `treeCheckStrictly` or internal `searchValue` is set, TreeNode will be unrelated:\n      // - Related: Show the top checked nodes and has children prop.\n      // - Unrelated: Show all the checked nodes.\n\n      if (searchValue) {\n        var oriKeyList = valueList.map(function (_ref14) {\n          var value = _ref14.value;\n          return valueEntities[value];\n        }).filter(function (entity) {\n          return entity;\n        }).map(function (_ref15) {\n          var key = _ref15.key;\n          return key;\n        });\n        var keyList;\n\n        if (isAdd) {\n          keyList = Array.from(new Set([].concat(_toConsumableArray(oriKeyList), _toConsumableArray(checkedNodeList.map(function (_ref16) {\n            var value = _ref16.props.value;\n            return valueEntities[value].key;\n          })))));\n        } else {\n          keyList = conductCheck([nodeEventInfo.node.props.eventKey], false, keyEntities, {\n            checkedKeys: oriKeyList\n          }).checkedKeys;\n        }\n\n        checkedNodeList = keyList.map(function (key) {\n          return keyEntities[key].node;\n        }); // Let's follow as not `treeCheckStrictly` format\n\n        extraInfo.allCheckedNodes = keyList.map(function (key) {\n          return cleanEntity(keyEntities[key]);\n        });\n      } else if (treeCheckStrictly) {\n        extraInfo.allCheckedNodes = nodeEventInfo.checkedNodes;\n      } else {\n        extraInfo.allCheckedNodes = flatToHierarchy(checkedNodesPositions);\n      }\n\n      _this.onValueTrigger(isAdd, checkedNodeList, nodeEventInfo, extraInfo);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDropdownVisibleChange\", function (open) {\n      var _this$props4 = _this.props,\n          multiple = _this$props4.multiple,\n          treeCheckable = _this$props4.treeCheckable;\n      var searchValue = _this.state.searchValue; // When set open success and single mode,\n      // we will reset the input content.\n\n      if (open && !multiple && !treeCheckable && searchValue) {\n        _this.setUncontrolledState({\n          searchValue: '',\n          filteredTreeNodes: null\n        });\n      }\n\n      _this.setOpenState(open, true);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSearchInputChange\", function (_ref17) {\n      var value = _ref17.target.value;\n      var _this$state5 = _this.state,\n          treeNodes = _this$state5.treeNodes,\n          valueEntities = _this$state5.valueEntities;\n      var _this$props5 = _this.props,\n          onSearch = _this$props5.onSearch,\n          filterTreeNode = _this$props5.filterTreeNode,\n          treeNodeFilterProp = _this$props5.treeNodeFilterProp;\n\n      if (onSearch) {\n        onSearch(value);\n      }\n\n      var isSet = false;\n\n      if (!_this.isSearchValueControlled()) {\n        isSet = _this.setUncontrolledState({\n          searchValue: value\n        });\n\n        _this.setOpenState(true);\n      }\n\n      if (isSet) {\n        // Do the search logic\n        var upperSearchValue = String(value).toUpperCase();\n        var filterTreeNodeFn = filterTreeNode;\n\n        if (filterTreeNode === false) {\n          // Don't filter if is false\n          filterTreeNodeFn = function filterTreeNodeFn() {\n            return true;\n          };\n        } else if (typeof filterTreeNodeFn !== 'function') {\n          // When is not function (true or undefined), use inner filter\n          filterTreeNodeFn = function filterTreeNodeFn(_, node) {\n            var nodeValue = String(node.props[treeNodeFilterProp]).toUpperCase();\n            return nodeValue.indexOf(upperSearchValue) !== -1;\n          };\n        }\n\n        _this.setState({\n          filteredTreeNodes: getFilterTree(treeNodes, value, filterTreeNodeFn, valueEntities, SelectNode)\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSearchInputKeyDown\", function (event) {\n      var _this$state6 = _this.state,\n          searchValue = _this$state6.searchValue,\n          valueList = _this$state6.valueList;\n      var keyCode = event.keyCode;\n\n      if (KeyCode.BACKSPACE === keyCode && _this.isMultiple() && !searchValue && valueList.length) {\n        var lastValue = valueList[valueList.length - 1].value;\n\n        _this.onMultipleSelectorRemove(event, lastValue);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChoiceAnimationLeave\", function () {\n      raf(function () {\n        _this.forcePopupAlign();\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setPopupRef\", function (popup) {\n      _this.popup = popup;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setUncontrolledState\", function (state) {\n      var needSync = false;\n      var newState = {};\n      Object.keys(state).forEach(function (name) {\n        if (name in _this.props) return;\n        needSync = true;\n        newState[name] = state[name];\n      });\n\n      if (needSync) {\n        _this.setState(newState);\n      }\n\n      return needSync;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setOpenState\", function (open) {\n      var byTrigger = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var onDropdownVisibleChange = _this.props.onDropdownVisibleChange;\n\n      if (onDropdownVisibleChange && onDropdownVisibleChange(open, {\n        documentClickClose: !open && byTrigger\n      }) === false) {\n        return;\n      }\n\n      _this.setUncontrolledState({\n        open: open\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isMultiple\", function () {\n      var _this$props6 = _this.props,\n          multiple = _this$props6.multiple,\n          treeCheckable = _this$props6.treeCheckable;\n      return !!(multiple || treeCheckable);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isLabelInValue\", function () {\n      return isLabelInValue(_this.props);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isSearchValueControlled\", function () {\n      var inputValue = _this.props.inputValue;\n      if ('searchValue' in _this.props) return true;\n      return 'inputValue' in _this.props && inputValue !== null;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"forcePopupAlign\", function () {\n      var $trigger = _this.selectTriggerRef.current;\n\n      if ($trigger) {\n        $trigger.forcePopupAlign();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"delayForcePopupAlign\", function () {\n      // Wait 2 frame to avoid dom update & dom algin in the same time\n      // https://github.com/ant-design/ant-design/issues/12031\n      raf(function () {\n        raf(_this.forcePopupAlign);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"triggerChange\", function (missValueList, valueList) {\n      var extraInfo = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var _this$state7 = _this.state,\n          valueEntities = _this$state7.valueEntities,\n          searchValue = _this$state7.searchValue,\n          prevSelectorValueList = _this$state7.selectorValueList;\n      var _this$props7 = _this.props,\n          onChange = _this$props7.onChange,\n          disabled = _this$props7.disabled,\n          treeCheckable = _this$props7.treeCheckable,\n          treeCheckStrictly = _this$props7.treeCheckStrictly;\n      if (disabled) return; // Trigger\n\n      var extra = _objectSpread({\n        // [Legacy] Always return as array contains label & value\n        preValue: prevSelectorValueList.map(function (_ref18) {\n          var label = _ref18.label,\n              value = _ref18.value;\n          return {\n            label: label,\n            value: value\n          };\n        })\n      }, extraInfo); // Format value by `treeCheckStrictly`\n\n\n      var selectorValueList = formatSelectorValue(valueList, _this.props, valueEntities);\n\n      if (!('value' in _this.props)) {\n        var newState = {\n          missValueList: missValueList,\n          valueList: valueList,\n          selectorValueList: selectorValueList\n        };\n\n        if (searchValue && treeCheckable && !treeCheckStrictly) {\n          newState.searchHalfCheckedKeys = getHalfCheckedKeys(valueList, valueEntities);\n        }\n\n        _this.setState(newState);\n      } // Only do the logic when `onChange` function provided\n\n\n      if (onChange) {\n        var connectValueList; // Get value by mode\n\n        if (_this.isMultiple()) {\n          connectValueList = [].concat(_toConsumableArray(missValueList), _toConsumableArray(selectorValueList));\n        } else {\n          connectValueList = selectorValueList.slice(0, 1);\n        }\n\n        var labelList = null;\n        var returnValue;\n\n        if (_this.isLabelInValue()) {\n          returnValue = connectValueList.map(function (_ref19) {\n            var label = _ref19.label,\n                value = _ref19.value;\n            return {\n              label: label,\n              value: value\n            };\n          });\n        } else {\n          labelList = [];\n          returnValue = connectValueList.map(function (_ref20) {\n            var label = _ref20.label,\n                value = _ref20.value;\n            labelList.push(label);\n            return value;\n          });\n        }\n\n        if (!_this.isMultiple()) {\n          returnValue = returnValue[0];\n        }\n\n        onChange(returnValue, labelList, extra);\n      }\n    });\n\n    var prefixAria = _props.prefixAria,\n        defaultOpen = _props.defaultOpen,\n        _open = _props.open;\n    _this.state = {\n      open: _open || defaultOpen,\n      valueList: [],\n      searchHalfCheckedKeys: [],\n      missValueList: [],\n      // Contains the value not in the tree\n      selectorValueList: [],\n      // Used for multiple selector\n      valueEntities: {},\n      keyEntities: {},\n      searchValue: '',\n      init: true\n    };\n    _this.selectorRef = createRef();\n    _this.selectTriggerRef = createRef(); // ARIA need `aria-controls` props mapping\n    // Since this need user input. Let's generate ourselves\n\n    _this.ariaId = generateAriaId(\"\".concat(prefixAria, \"-list\"));\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      return {\n        rcTreeSelect: {\n          onSelectorFocus: this.onSelectorFocus,\n          onSelectorBlur: this.onSelectorBlur,\n          onSelectorKeyDown: this.onComponentKeyDown,\n          onSelectorClear: this.onSelectorClear,\n          onMultipleSelectorRemove: this.onMultipleSelectorRemove,\n          onTreeNodeSelect: this.onTreeNodeSelect,\n          onTreeNodeCheck: this.onTreeNodeCheck,\n          onPopupKeyDown: this.onComponentKeyDown,\n          onSearchInputChange: this.onSearchInputChange,\n          onSearchInputKeyDown: this.onSearchInputKeyDown\n        }\n      };\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props8 = this.props,\n          autoFocus = _this$props8.autoFocus,\n          disabled = _this$props8.disabled;\n\n      if (autoFocus && !disabled) {\n        this.focus();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_, prevState) {\n      var _this2 = this;\n\n      var prefixCls = this.props.prefixCls;\n      var _this$state8 = this.state,\n          valueList = _this$state8.valueList,\n          open = _this$state8.open,\n          selectorValueList = _this$state8.selectorValueList,\n          valueEntities = _this$state8.valueEntities;\n      var isMultiple = this.isMultiple();\n\n      if (prevState.valueList !== valueList) {\n        this.forcePopupAlign();\n      } // Scroll to value position, only need sync on single mode\n\n\n      if (!isMultiple && selectorValueList.length && !prevState.open && open && this.popup) {\n        var value = selectorValueList[0].value;\n\n        var _this$popup$getTree = this.popup.getTree(),\n            domTreeNodes = _this$popup$getTree.domTreeNodes;\n\n        var _ref21 = valueEntities[value] || {},\n            key = _ref21.key;\n\n        var treeNode = domTreeNodes[key];\n\n        if (treeNode) {\n          var domNode = findDOMNode(treeNode);\n          raf(function () {\n            var popupNode = findDOMNode(_this2.popup);\n            var triggerContainer = findPopupContainer(popupNode, \"\".concat(prefixCls, \"-dropdown\"));\n            var searchNode = _this2.popup.searchRef.current;\n\n            if (domNode && triggerContainer && searchNode) {\n              scrollIntoView(domNode, triggerContainer, {\n                onlyScrollIfNeeded: true,\n                offsetTop: searchNode.offsetHeight\n              });\n            }\n          });\n        }\n      }\n    } // ==================== Selector ====================\n\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.selectorRef.current.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.selectorRef.current.blur();\n    } // ===================== Render =====================\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state9 = this.state,\n          valueList = _this$state9.valueList,\n          missValueList = _this$state9.missValueList,\n          selectorValueList = _this$state9.selectorValueList,\n          searchHalfCheckedKeys = _this$state9.searchHalfCheckedKeys,\n          valueEntities = _this$state9.valueEntities,\n          keyEntities = _this$state9.keyEntities,\n          searchValue = _this$state9.searchValue,\n          open = _this$state9.open,\n          focused = _this$state9.focused,\n          treeNodes = _this$state9.treeNodes,\n          filteredTreeNodes = _this$state9.filteredTreeNodes;\n      var _this$props9 = this.props,\n          prefixCls = _this$props9.prefixCls,\n          treeExpandedKeys = _this$props9.treeExpandedKeys,\n          onTreeExpand = _this$props9.onTreeExpand;\n      var isMultiple = this.isMultiple();\n\n      var passProps = _objectSpread({}, this.props, {\n        isMultiple: isMultiple,\n        valueList: valueList,\n        searchHalfCheckedKeys: searchHalfCheckedKeys,\n        selectorValueList: [].concat(_toConsumableArray(missValueList), _toConsumableArray(selectorValueList)),\n        valueEntities: valueEntities,\n        keyEntities: keyEntities,\n        searchValue: searchValue,\n        upperSearchValue: (searchValue || '').toUpperCase(),\n        // Perf save\n        open: open,\n        focused: focused,\n        onChoiceAnimationLeave: this.onChoiceAnimationLeave,\n        dropdownPrefixCls: \"\".concat(prefixCls, \"-dropdown\"),\n        ariaId: this.ariaId\n      });\n\n      var Popup = isMultiple ? MultiplePopup : SinglePopup;\n      var $popup = React.createElement(Popup, _extends({\n        ref: this.setPopupRef\n      }, passProps, {\n        onTreeExpanded: this.delayForcePopupAlign,\n        treeNodes: treeNodes,\n        filteredTreeNodes: filteredTreeNodes // Tree expanded control\n        ,\n        treeExpandedKeys: treeExpandedKeys,\n        onTreeExpand: onTreeExpand\n      }));\n      var Selector = isMultiple ? MultipleSelector : SingleSelector;\n      var $selector = React.createElement(Selector, _extends({}, passProps, {\n        ref: this.selectorRef\n      }));\n      return React.createElement(SelectTrigger, _extends({}, passProps, {\n        ref: this.selectTriggerRef,\n        popupElement: $popup,\n        onKeyDown: this.onKeyDown,\n        onDropdownVisibleChange: this.onDropdownVisibleChange\n      }), $selector);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var _prevState$prevProps = prevState.prevProps,\n          prevProps = _prevState$prevProps === void 0 ? {} : _prevState$prevProps;\n      var treeCheckable = nextProps.treeCheckable,\n          treeCheckStrictly = nextProps.treeCheckStrictly,\n          filterTreeNode = nextProps.filterTreeNode,\n          treeNodeFilterProp = nextProps.treeNodeFilterProp,\n          treeDataSimpleMode = nextProps.treeDataSimpleMode;\n      var newState = {\n        prevProps: nextProps,\n        init: false\n      }; // Process the state when props updated\n\n      function processState(propName, updater) {\n        if (prevProps[propName] !== nextProps[propName]) {\n          updater(nextProps[propName], prevProps[propName]);\n          return true;\n        }\n\n        return false;\n      }\n\n      var valueRefresh = false; // Open\n\n      processState('open', function (propValue) {\n        newState.open = propValue;\n      }); // Tree Nodes\n\n      var treeNodes;\n      var treeDataChanged = false;\n      var treeDataModeChanged = false;\n      processState('treeData', function (propValue) {\n        treeNodes = convertDataToTree(propValue);\n        treeDataChanged = true;\n      });\n      processState('treeDataSimpleMode', function (propValue, prevValue) {\n        if (!propValue) return;\n        var prev = !prevValue || prevValue === true ? {} : prevValue; // Shallow equal to avoid dynamic prop object\n\n        if (!shallowEqual(propValue, prev)) {\n          treeDataModeChanged = true;\n        }\n      }); // Parse by `treeDataSimpleMode`\n\n      if (treeDataSimpleMode && (treeDataChanged || treeDataModeChanged)) {\n        var simpleMapper = _objectSpread({\n          id: 'id',\n          pId: 'pId',\n          rootPId: null\n        }, treeDataSimpleMode !== true ? treeDataSimpleMode : {});\n\n        treeNodes = convertDataToTree(parseSimpleTreeData(nextProps.treeData, simpleMapper));\n      } // If `treeData` not provide, use children TreeNodes\n\n\n      if (!nextProps.treeData) {\n        processState('children', function (propValue) {\n          treeNodes = Array.isArray(propValue) ? propValue : [propValue];\n        });\n      } // Convert `treeData` to entities\n\n\n      if (treeNodes) {\n        var entitiesMap = convertTreeToEntities(treeNodes);\n        newState.treeNodes = treeNodes;\n        newState.posEntities = entitiesMap.posEntities;\n        newState.valueEntities = entitiesMap.valueEntities;\n        newState.keyEntities = entitiesMap.keyEntities;\n        valueRefresh = true;\n      } // Value List\n\n\n      if (prevState.init) {\n        processState('defaultValue', function (propValue) {\n          newState.valueList = formatInternalValue(propValue, nextProps);\n          valueRefresh = true;\n        });\n      }\n\n      processState('value', function (propValue) {\n        newState.valueList = formatInternalValue(propValue, nextProps);\n        valueRefresh = true;\n      }); // Selector Value List\n\n      if (valueRefresh) {\n        // Find out that value not exist in the tree\n        var missValueList = [];\n        var filteredValueList = [];\n        var keyList = []; // Get latest value list\n\n        var latestValueList = newState.valueList;\n\n        if (!latestValueList) {\n          // Also need add prev missValueList to avoid new treeNodes contains the value\n          latestValueList = [].concat(_toConsumableArray(prevState.valueList), _toConsumableArray(prevState.missValueList));\n        } // Get key by value\n\n\n        var valueLabels = {};\n        latestValueList.forEach(function (wrapperValue) {\n          var value = wrapperValue.value,\n              label = wrapperValue.label;\n          var entity = (newState.valueEntities || prevState.valueEntities)[value];\n          valueLabels[value] = label;\n\n          if (entity) {\n            keyList.push(entity.key);\n            filteredValueList.push(wrapperValue);\n            return;\n          } // If not match, it may caused by ajax load. We need keep this\n\n\n          missValueList.push(wrapperValue);\n        }); // We need calculate the value when tree is checked tree\n\n        if (treeCheckable && !treeCheckStrictly) {\n          // Calculate the keys need to be checked\n          var _conductCheck = conductCheck(keyList, true, newState.keyEntities || prevState.keyEntities),\n              checkedKeys = _conductCheck.checkedKeys; // Format value list again for internal usage\n\n\n          newState.valueList = checkedKeys.map(function (key) {\n            var val = (newState.keyEntities || prevState.keyEntities)[key].value;\n            var wrappedValue = {\n              value: val\n            };\n\n            if (valueLabels[val] !== undefined) {\n              wrappedValue.label = valueLabels[val];\n            }\n\n            return wrappedValue;\n          });\n        } else {\n          newState.valueList = filteredValueList;\n        } // Fill the missValueList, we still need display in the selector\n\n\n        newState.missValueList = missValueList; // Calculate the value list for `Selector` usage\n\n        newState.selectorValueList = formatSelectorValue(newState.valueList, nextProps, newState.valueEntities || prevState.valueEntities);\n      } // [Legacy] To align with `Select` component,\n      // We use `searchValue` instead of `inputValue` but still keep the api\n      // `inputValue` support `null` to work as `autoClearSearchValue`\n\n\n      processState('inputValue', function (propValue) {\n        if (propValue !== null) {\n          newState.searchValue = propValue;\n        }\n      }); // Search value\n\n      processState('searchValue', function (propValue) {\n        newState.searchValue = propValue;\n      }); // Do the search logic\n\n      if (newState.searchValue !== undefined || prevState.searchValue && treeNodes) {\n        var searchValue = newState.searchValue !== undefined ? newState.searchValue : prevState.searchValue;\n        var upperSearchValue = String(searchValue).toUpperCase();\n        var filterTreeNodeFn = filterTreeNode;\n\n        if (filterTreeNode === false) {\n          // Don't filter if is false\n          filterTreeNodeFn = function filterTreeNodeFn() {\n            return true;\n          };\n        } else if (typeof filterTreeNodeFn !== 'function') {\n          // When is not function (true or undefined), use inner filter\n          filterTreeNodeFn = function filterTreeNodeFn(_, node) {\n            var nodeValue = String(node.props[treeNodeFilterProp]).toUpperCase();\n            return nodeValue.indexOf(upperSearchValue) !== -1;\n          };\n        }\n\n        newState.filteredTreeNodes = getFilterTree(newState.treeNodes || prevState.treeNodes, searchValue, filterTreeNodeFn, newState.valueEntities || prevState.valueEntities, SelectNode);\n      } // We should re-calculate the halfCheckedKeys when in search mode\n\n\n      if (valueRefresh && treeCheckable && !treeCheckStrictly && (newState.searchValue || prevState.searchValue)) {\n        newState.searchHalfCheckedKeys = getHalfCheckedKeys(newState.valueList, newState.valueEntities || prevState.valueEntities);\n      } // Checked Strategy\n\n\n      processState('showCheckedStrategy', function () {\n        newState.selectorValueList = newState.selectorValueList || formatSelectorValue(newState.valueList || prevState.valueList, nextProps, newState.valueEntities || prevState.valueEntities);\n      });\n      return newState;\n    }\n  }]);\n\n  return Select;\n}(React.Component);\n\n_defineProperty(Select, \"propTypes\", {\n  prefixCls: PropTypes.string,\n  prefixAria: PropTypes.string,\n  multiple: PropTypes.bool,\n  showArrow: PropTypes.bool,\n  open: PropTypes.bool,\n  value: valueProp,\n  autoFocus: PropTypes.bool,\n  defaultOpen: PropTypes.bool,\n  defaultValue: valueProp,\n  showSearch: PropTypes.bool,\n  placeholder: PropTypes.node,\n  inputValue: PropTypes.string,\n  // [Legacy] Deprecated. Use `searchValue` instead.\n  searchValue: PropTypes.string,\n  autoClearSearchValue: PropTypes.bool,\n  searchPlaceholder: PropTypes.node,\n  // [Legacy] Confuse with placeholder\n  disabled: PropTypes.bool,\n  children: PropTypes.node,\n  labelInValue: PropTypes.bool,\n  maxTagCount: PropTypes.number,\n  maxTagPlaceholder: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  maxTagTextLength: PropTypes.number,\n  showCheckedStrategy: PropTypes.oneOf([SHOW_ALL, SHOW_PARENT, SHOW_CHILD]),\n  dropdownMatchSelectWidth: PropTypes.bool,\n  treeData: PropTypes.array,\n  treeDataSimpleMode: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n  treeNodeFilterProp: PropTypes.string,\n  treeNodeLabelProp: PropTypes.string,\n  treeCheckable: PropTypes.oneOfType([PropTypes.bool, PropTypes.node]),\n  treeCheckStrictly: PropTypes.bool,\n  treeIcon: PropTypes.bool,\n  treeLine: PropTypes.bool,\n  treeDefaultExpandAll: PropTypes.bool,\n  treeDefaultExpandedKeys: PropTypes.array,\n  treeExpandedKeys: PropTypes.array,\n  loadData: PropTypes.func,\n  filterTreeNode: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\n  notFoundContent: PropTypes.node,\n  onSearch: PropTypes.func,\n  onSelect: PropTypes.func,\n  onDeselect: PropTypes.func,\n  onChange: PropTypes.func,\n  onDropdownVisibleChange: PropTypes.func,\n  onTreeExpand: PropTypes.func,\n  inputIcon: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  clearIcon: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  removeIcon: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  switcherIcon: PropTypes.oneOfType([PropTypes.node, PropTypes.func])\n});\n\n_defineProperty(Select, \"childContextTypes\", {\n  rcTreeSelect: PropTypes.shape(_objectSpread({}, selectorContextTypes, {}, multipleSelectorContextTypes, {}, popupContextTypes, {\n    onSearchInputChange: PropTypes.func,\n    onSearchInputKeyDown: PropTypes.func\n  }))\n});\n\n_defineProperty(Select, \"defaultProps\", {\n  prefixCls: 'rc-tree-select',\n  prefixAria: 'rc-tree-select',\n  showArrow: true,\n  showSearch: true,\n  autoClearSearchValue: true,\n  showCheckedStrategy: SHOW_CHILD,\n  // dropdownMatchSelectWidth change the origin design, set to false now\n  // ref: https://github.com/react-component/select/blob/4cad95e098a341a09de239ad6981067188842020/src/Select.jsx#L344\n  // ref: https://github.com/react-component/select/pull/71\n  treeNodeFilterProp: 'value',\n  treeNodeLabelProp: 'title',\n  treeIcon: false,\n  notFoundContent: 'Not Found'\n});\n\nSelect.TreeNode = SelectNode;\nSelect.SHOW_ALL = SHOW_ALL;\nSelect.SHOW_PARENT = SHOW_PARENT;\nSelect.SHOW_CHILD = SHOW_CHILD; // Let warning show correct component name\n\nSelect.displayName = 'TreeSelect';\npolyfill(Select);\nexport default Select;"]},"metadata":{},"sourceType":"module"}