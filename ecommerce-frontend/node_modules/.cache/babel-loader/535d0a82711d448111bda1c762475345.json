{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { polyfill } from 'react-lifecycles-compat';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport findDOMNode from \"rc-util/es/Dom/findDOMNode\";\nimport copy from 'copy-to-clipboard';\nimport omit from 'omit.js';\nimport ResizeObserver from 'rc-resize-observer';\nimport { configConsumerProps } from '../config-provider';\nimport { withConfigConsumer } from '../config-provider/context';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport warning from '../_util/warning';\nimport TransButton from '../_util/transButton';\nimport raf from '../_util/raf';\nimport isStyleSupport from '../_util/styleChecker';\nimport Icon from '../icon';\nimport Tooltip from '../tooltip';\nimport Typography from './Typography';\nimport Editable from './Editable';\nimport measure from './util';\nvar isLineClampSupport = isStyleSupport('webkitLineClamp');\nvar isTextOverflowSupport = isStyleSupport('textOverflow');\n\nfunction wrapperDecorations(_ref, content) {\n  var mark = _ref.mark,\n      code = _ref.code,\n      underline = _ref.underline,\n      del = _ref[\"delete\"],\n      strong = _ref.strong;\n  var currentContent = content;\n\n  function wrap(needed, tag) {\n    if (!needed) return;\n    currentContent = React.createElement(tag, {}, currentContent);\n  }\n\n  wrap(strong, 'strong');\n  wrap(underline, 'u');\n  wrap(del, 'del');\n  wrap(code, 'code');\n  wrap(mark, 'mark');\n  return currentContent;\n}\n\nvar ELLIPSIS_STR = '...';\n\nvar Base =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Base, _React$Component);\n\n  function Base() {\n    var _this;\n\n    _classCallCheck(this, Base);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Base).apply(this, arguments));\n    _this.state = {\n      edit: false,\n      copied: false,\n      ellipsisText: '',\n      ellipsisContent: null,\n      isEllipsis: false,\n      expanded: false,\n      clientRendered: false\n    }; // =============== Expend ===============\n\n    _this.onExpandClick = function () {\n      var _this$getEllipsis = _this.getEllipsis(),\n          onExpand = _this$getEllipsis.onExpand;\n\n      _this.setState({\n        expanded: true\n      });\n\n      if (onExpand) {\n        onExpand();\n      }\n    }; // ================ Edit ================\n\n\n    _this.onEditClick = function () {\n      _this.triggerEdit(true);\n    };\n\n    _this.onEditChange = function (value) {\n      var _this$getEditable = _this.getEditable(),\n          onChange = _this$getEditable.onChange;\n\n      if (onChange) {\n        onChange(value);\n      }\n\n      _this.triggerEdit(false);\n    };\n\n    _this.onEditCancel = function () {\n      _this.triggerEdit(false);\n    }; // ================ Copy ================\n\n\n    _this.onCopyClick = function () {\n      var _this$props = _this.props,\n          children = _this$props.children,\n          copyable = _this$props.copyable;\n\n      var copyConfig = _extends({}, _typeof(copyable) === 'object' ? copyable : null);\n\n      if (copyConfig.text === undefined) {\n        copyConfig.text = String(children);\n      }\n\n      copy(copyConfig.text || '');\n\n      _this.setState({\n        copied: true\n      }, function () {\n        if (copyConfig.onCopy) {\n          copyConfig.onCopy();\n        }\n\n        _this.copyId = window.setTimeout(function () {\n          _this.setState({\n            copied: false\n          });\n        }, 3000);\n      });\n    };\n\n    _this.setContentRef = function (node) {\n      _this.content = node;\n    };\n\n    _this.setEditRef = function (node) {\n      _this.editIcon = node;\n    };\n\n    _this.triggerEdit = function (edit) {\n      var _this$getEditable2 = _this.getEditable(),\n          onStart = _this$getEditable2.onStart;\n\n      if (edit && onStart) {\n        onStart();\n      }\n\n      _this.setState({\n        edit: edit\n      }, function () {\n        if (!edit && _this.editIcon) {\n          _this.editIcon.focus();\n        }\n      });\n    }; // ============== Ellipsis ==============\n\n\n    _this.resizeOnNextFrame = function () {\n      raf.cancel(_this.rafId);\n      _this.rafId = raf(function () {\n        // Do not bind `syncEllipsis`. It need for test usage on prototype\n        _this.syncEllipsis();\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Base, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        clientRendered: true\n      });\n      this.resizeOnNextFrame();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var children = this.props.children;\n      var ellipsis = this.getEllipsis();\n      var prevEllipsis = this.getEllipsis(prevProps);\n\n      if (children !== prevProps.children || ellipsis.rows !== prevEllipsis.rows) {\n        this.resizeOnNextFrame();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.clearTimeout(this.copyId);\n      raf.cancel(this.rafId);\n    }\n  }, {\n    key: \"getEditable\",\n    value: function getEditable(props) {\n      var edit = this.state.edit;\n\n      var _ref2 = props || this.props,\n          editable = _ref2.editable;\n\n      if (!editable) return {\n        editing: edit\n      };\n      return _extends({\n        editing: edit\n      }, _typeof(editable) === 'object' ? editable : null);\n    }\n  }, {\n    key: \"getEllipsis\",\n    value: function getEllipsis(props) {\n      var _ref3 = props || this.props,\n          ellipsis = _ref3.ellipsis;\n\n      if (!ellipsis) return {};\n      return _extends({\n        rows: 1,\n        expandable: false\n      }, _typeof(ellipsis) === 'object' ? ellipsis : null);\n    }\n  }, {\n    key: \"canUseCSSEllipsis\",\n    value: function canUseCSSEllipsis() {\n      var clientRendered = this.state.clientRendered;\n      var _this$props2 = this.props,\n          editable = _this$props2.editable,\n          copyable = _this$props2.copyable;\n\n      var _this$getEllipsis2 = this.getEllipsis(),\n          rows = _this$getEllipsis2.rows,\n          expandable = _this$getEllipsis2.expandable; // Can't use css ellipsis since we need to provide the place for button\n\n\n      if (editable || copyable || expandable || !clientRendered) {\n        return false;\n      }\n\n      if (rows === 1) {\n        return isTextOverflowSupport;\n      }\n\n      return isLineClampSupport;\n    }\n  }, {\n    key: \"syncEllipsis\",\n    value: function syncEllipsis() {\n      var _this$state = this.state,\n          ellipsisText = _this$state.ellipsisText,\n          isEllipsis = _this$state.isEllipsis,\n          expanded = _this$state.expanded;\n\n      var _this$getEllipsis3 = this.getEllipsis(),\n          rows = _this$getEllipsis3.rows;\n\n      var children = this.props.children;\n      if (!rows || rows < 0 || !this.content || expanded) return; // Do not measure if css already support ellipsis\n\n      if (this.canUseCSSEllipsis()) return;\n      warning(toArray(children).every(function (child) {\n        return typeof child === 'string';\n      }), 'Typography', '`ellipsis` should use string as children only.');\n\n      var _measure = measure(findDOMNode(this.content), rows, children, this.renderOperations(true), ELLIPSIS_STR),\n          content = _measure.content,\n          text = _measure.text,\n          ellipsis = _measure.ellipsis;\n\n      if (ellipsisText !== text || isEllipsis !== ellipsis) {\n        this.setState({\n          ellipsisText: text,\n          ellipsisContent: content,\n          isEllipsis: ellipsis\n        });\n      }\n    }\n  }, {\n    key: \"renderExpand\",\n    value: function renderExpand(forceRender) {\n      var _this$getEllipsis4 = this.getEllipsis(),\n          expandable = _this$getEllipsis4.expandable;\n\n      var prefixCls = this.props.prefixCls;\n      var _this$state2 = this.state,\n          expanded = _this$state2.expanded,\n          isEllipsis = _this$state2.isEllipsis;\n      if (!expandable) return null; // force render expand icon for measure usage or it will cause dead loop\n\n      if (!forceRender && (expanded || !isEllipsis)) return null;\n      return React.createElement(\"a\", {\n        key: \"expand\",\n        className: \"\".concat(prefixCls, \"-expand\"),\n        onClick: this.onExpandClick,\n        \"aria-label\": this.expandStr\n      }, this.expandStr);\n    }\n  }, {\n    key: \"renderEdit\",\n    value: function renderEdit() {\n      var _this$props3 = this.props,\n          editable = _this$props3.editable,\n          prefixCls = _this$props3.prefixCls;\n      if (!editable) return;\n      return React.createElement(Tooltip, {\n        key: \"edit\",\n        title: this.editStr\n      }, React.createElement(TransButton, {\n        ref: this.setEditRef,\n        className: \"\".concat(prefixCls, \"-edit\"),\n        onClick: this.onEditClick,\n        \"aria-label\": this.editStr\n      }, React.createElement(Icon, {\n        role: \"button\",\n        type: \"edit\"\n      })));\n    }\n  }, {\n    key: \"renderCopy\",\n    value: function renderCopy() {\n      var copied = this.state.copied;\n      var _this$props4 = this.props,\n          copyable = _this$props4.copyable,\n          prefixCls = _this$props4.prefixCls;\n      if (!copyable) return;\n      var title = copied ? this.copiedStr : this.copyStr;\n      return React.createElement(Tooltip, {\n        key: \"copy\",\n        title: title\n      }, React.createElement(TransButton, {\n        className: classNames(\"\".concat(prefixCls, \"-copy\"), copied && \"\".concat(prefixCls, \"-copy-success\")),\n        onClick: this.onCopyClick,\n        \"aria-label\": title\n      }, React.createElement(Icon, {\n        role: \"button\",\n        type: copied ? 'check' : 'copy'\n      })));\n    }\n  }, {\n    key: \"renderEditInput\",\n    value: function renderEditInput() {\n      var _this$props5 = this.props,\n          children = _this$props5.children,\n          prefixCls = _this$props5.prefixCls,\n          className = _this$props5.className,\n          style = _this$props5.style;\n      return React.createElement(Editable, {\n        value: typeof children === 'string' ? children : '',\n        onSave: this.onEditChange,\n        onCancel: this.onEditCancel,\n        prefixCls: prefixCls,\n        className: className,\n        style: style\n      });\n    }\n  }, {\n    key: \"renderOperations\",\n    value: function renderOperations(forceRenderExpanded) {\n      return [this.renderExpand(forceRenderExpanded), this.renderEdit(), this.renderCopy()].filter(function (node) {\n        return node;\n      });\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var _this2 = this;\n\n      var _this$state3 = this.state,\n          ellipsisContent = _this$state3.ellipsisContent,\n          isEllipsis = _this$state3.isEllipsis,\n          expanded = _this$state3.expanded;\n\n      var _a = this.props,\n          component = _a.component,\n          children = _a.children,\n          className = _a.className,\n          prefixCls = _a.prefixCls,\n          type = _a.type,\n          disabled = _a.disabled,\n          style = _a.style,\n          restProps = __rest(_a, [\"component\", \"children\", \"className\", \"prefixCls\", \"type\", \"disabled\", \"style\"]);\n\n      var _this$getEllipsis5 = this.getEllipsis(),\n          rows = _this$getEllipsis5.rows;\n\n      var textProps = omit(restProps, ['prefixCls', 'editable', 'copyable', 'ellipsis', 'mark', 'underline', 'mark', 'code', 'delete', 'underline', 'strong'].concat(_toConsumableArray(configConsumerProps)));\n      var cssEllipsis = this.canUseCSSEllipsis();\n      var cssTextOverflow = rows === 1 && cssEllipsis;\n      var cssLineClamp = rows && rows > 1 && cssEllipsis;\n      var textNode = children;\n      var ariaLabel = null; // Only use js ellipsis when css ellipsis not support\n\n      if (rows && isEllipsis && !expanded && !cssEllipsis) {\n        ariaLabel = String(children); // We move full content to outer element to avoid repeat read the content by accessibility\n\n        textNode = React.createElement(\"span\", {\n          title: String(children),\n          \"aria-hidden\": \"true\"\n        }, ellipsisContent, ELLIPSIS_STR);\n      }\n\n      textNode = wrapperDecorations(this.props, textNode);\n      return React.createElement(LocaleReceiver, {\n        componentName: \"Text\"\n      }, function (_ref4) {\n        var _classNames;\n\n        var edit = _ref4.edit,\n            copyStr = _ref4.copy,\n            copied = _ref4.copied,\n            expand = _ref4.expand;\n        _this2.editStr = edit;\n        _this2.copyStr = copyStr;\n        _this2.copiedStr = copied;\n        _this2.expandStr = expand;\n        return React.createElement(ResizeObserver, {\n          onResize: _this2.resizeOnNextFrame,\n          disabled: !rows\n        }, React.createElement(Typography, _extends({\n          className: classNames(className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(type), type), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(prefixCls, \"-ellipsis\"), rows), _defineProperty(_classNames, \"\".concat(prefixCls, \"-ellipsis-single-line\"), cssTextOverflow), _defineProperty(_classNames, \"\".concat(prefixCls, \"-ellipsis-multiple-line\"), cssLineClamp), _classNames)),\n          style: _extends(_extends({}, style), {\n            WebkitLineClamp: cssLineClamp ? rows : null\n          }),\n          component: component,\n          ref: _this2.setContentRef,\n          \"aria-label\": ariaLabel\n        }, textProps), textNode, _this2.renderOperations()));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$getEditable3 = this.getEditable(),\n          editing = _this$getEditable3.editing;\n\n      if (editing) {\n        return this.renderEditInput();\n      }\n\n      return this.renderContent();\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps) {\n      var children = nextProps.children,\n          editable = nextProps.editable;\n      warning(!editable || typeof children === 'string', 'Typography', 'When `editable` is enabled, the `children` should use string.');\n      return {};\n    }\n  }]);\n\n  return Base;\n}(React.Component);\n\nBase.defaultProps = {\n  children: ''\n};\npolyfill(Base);\nexport default withConfigConsumer({\n  prefixCls: 'typography'\n})(Base);","map":{"version":3,"sources":["typography/Base.jsx"],"names":["__rest","t","Object","e","s","i","p","isLineClampSupport","isStyleSupport","isTextOverflowSupport","mark","code","underline","del","strong","currentContent","React","wrap","ELLIPSIS_STR","Base","Component","edit","copied","ellipsisText","ellipsisContent","isEllipsis","expanded","clientRendered","onExpand","onChange","children","copyable","copyConfig","String","copy","onStart","raf","nextProps","editable","warning","prevProps","ellipsis","prevEllipsis","window","props","editing","rows","expandable","content","text","measure","findDOMNode","forceRender","prefixCls","expandStr","editStr","title","classNames","className","style","forceRenderExpanded","component","type","disabled","_a","restProps","textProps","omit","cssEllipsis","cssTextOverflow","cssLineClamp","textNode","ariaLabel","wrapperDecorations","copyStr","expand","WebkitLineClamp","polyfill"],"mappings":"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","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { polyfill } from 'react-lifecycles-compat';\nimport toArray from 'rc-util/lib/Children/toArray';\nimport findDOMNode from 'rc-util/lib/Dom/findDOMNode';\nimport copy from 'copy-to-clipboard';\nimport omit from 'omit.js';\nimport ResizeObserver from 'rc-resize-observer';\nimport { configConsumerProps } from '../config-provider';\nimport { withConfigConsumer } from '../config-provider/context';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport warning from '../_util/warning';\nimport TransButton from '../_util/transButton';\nimport raf from '../_util/raf';\nimport isStyleSupport from '../_util/styleChecker';\nimport Icon from '../icon';\nimport Tooltip from '../tooltip';\nimport Typography from './Typography';\nimport Editable from './Editable';\nimport measure from './util';\nconst isLineClampSupport = isStyleSupport('webkitLineClamp');\nconst isTextOverflowSupport = isStyleSupport('textOverflow');\nfunction wrapperDecorations({ mark, code, underline, delete: del, strong }, content) {\n    let currentContent = content;\n    function wrap(needed, tag) {\n        if (!needed)\n            return;\n        currentContent = React.createElement(tag, {}, currentContent);\n    }\n    wrap(strong, 'strong');\n    wrap(underline, 'u');\n    wrap(del, 'del');\n    wrap(code, 'code');\n    wrap(mark, 'mark');\n    return currentContent;\n}\nconst ELLIPSIS_STR = '...';\nclass Base extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            edit: false,\n            copied: false,\n            ellipsisText: '',\n            ellipsisContent: null,\n            isEllipsis: false,\n            expanded: false,\n            clientRendered: false,\n        };\n        // =============== Expend ===============\n        this.onExpandClick = () => {\n            const { onExpand } = this.getEllipsis();\n            this.setState({ expanded: true });\n            if (onExpand) {\n                onExpand();\n            }\n        };\n        // ================ Edit ================\n        this.onEditClick = () => {\n            this.triggerEdit(true);\n        };\n        this.onEditChange = (value) => {\n            const { onChange } = this.getEditable();\n            if (onChange) {\n                onChange(value);\n            }\n            this.triggerEdit(false);\n        };\n        this.onEditCancel = () => {\n            this.triggerEdit(false);\n        };\n        // ================ Copy ================\n        this.onCopyClick = () => {\n            const { children, copyable } = this.props;\n            const copyConfig = Object.assign({}, (typeof copyable === 'object' ? copyable : null));\n            if (copyConfig.text === undefined) {\n                copyConfig.text = String(children);\n            }\n            copy(copyConfig.text || '');\n            this.setState({ copied: true }, () => {\n                if (copyConfig.onCopy) {\n                    copyConfig.onCopy();\n                }\n                this.copyId = window.setTimeout(() => {\n                    this.setState({ copied: false });\n                }, 3000);\n            });\n        };\n        this.setContentRef = (node) => {\n            this.content = node;\n        };\n        this.setEditRef = (node) => {\n            this.editIcon = node;\n        };\n        this.triggerEdit = (edit) => {\n            const { onStart } = this.getEditable();\n            if (edit && onStart) {\n                onStart();\n            }\n            this.setState({ edit }, () => {\n                if (!edit && this.editIcon) {\n                    this.editIcon.focus();\n                }\n            });\n        };\n        // ============== Ellipsis ==============\n        this.resizeOnNextFrame = () => {\n            raf.cancel(this.rafId);\n            this.rafId = raf(() => {\n                // Do not bind `syncEllipsis`. It need for test usage on prototype\n                this.syncEllipsis();\n            });\n        };\n    }\n    static getDerivedStateFromProps(nextProps) {\n        const { children, editable } = nextProps;\n        warning(!editable || typeof children === 'string', 'Typography', 'When `editable` is enabled, the `children` should use string.');\n        return {};\n    }\n    componentDidMount() {\n        this.setState({ clientRendered: true });\n        this.resizeOnNextFrame();\n    }\n    componentDidUpdate(prevProps) {\n        const { children } = this.props;\n        const ellipsis = this.getEllipsis();\n        const prevEllipsis = this.getEllipsis(prevProps);\n        if (children !== prevProps.children || ellipsis.rows !== prevEllipsis.rows) {\n            this.resizeOnNextFrame();\n        }\n    }\n    componentWillUnmount() {\n        window.clearTimeout(this.copyId);\n        raf.cancel(this.rafId);\n    }\n    getEditable(props) {\n        const { edit } = this.state;\n        const { editable } = props || this.props;\n        if (!editable)\n            return { editing: edit };\n        return Object.assign({ editing: edit }, (typeof editable === 'object' ? editable : null));\n    }\n    getEllipsis(props) {\n        const { ellipsis } = props || this.props;\n        if (!ellipsis)\n            return {};\n        return Object.assign({ rows: 1, expandable: false }, (typeof ellipsis === 'object' ? ellipsis : null));\n    }\n    canUseCSSEllipsis() {\n        const { clientRendered } = this.state;\n        const { editable, copyable } = this.props;\n        const { rows, expandable } = this.getEllipsis();\n        // Can't use css ellipsis since we need to provide the place for button\n        if (editable || copyable || expandable || !clientRendered) {\n            return false;\n        }\n        if (rows === 1) {\n            return isTextOverflowSupport;\n        }\n        return isLineClampSupport;\n    }\n    syncEllipsis() {\n        const { ellipsisText, isEllipsis, expanded } = this.state;\n        const { rows } = this.getEllipsis();\n        const { children } = this.props;\n        if (!rows || rows < 0 || !this.content || expanded)\n            return;\n        // Do not measure if css already support ellipsis\n        if (this.canUseCSSEllipsis())\n            return;\n        warning(toArray(children).every((child) => typeof child === 'string'), 'Typography', '`ellipsis` should use string as children only.');\n        const { content, text, ellipsis } = measure(findDOMNode(this.content), rows, children, this.renderOperations(true), ELLIPSIS_STR);\n        if (ellipsisText !== text || isEllipsis !== ellipsis) {\n            this.setState({ ellipsisText: text, ellipsisContent: content, isEllipsis: ellipsis });\n        }\n    }\n    renderExpand(forceRender) {\n        const { expandable } = this.getEllipsis();\n        const { prefixCls } = this.props;\n        const { expanded, isEllipsis } = this.state;\n        if (!expandable)\n            return null;\n        // force render expand icon for measure usage or it will cause dead loop\n        if (!forceRender && (expanded || !isEllipsis))\n            return null;\n        return (<a key=\"expand\" className={`${prefixCls}-expand`} onClick={this.onExpandClick} aria-label={this.expandStr}>\n        {this.expandStr}\n      </a>);\n    }\n    renderEdit() {\n        const { editable, prefixCls } = this.props;\n        if (!editable)\n            return;\n        return (<Tooltip key=\"edit\" title={this.editStr}>\n        <TransButton ref={this.setEditRef} className={`${prefixCls}-edit`} onClick={this.onEditClick} aria-label={this.editStr}>\n          <Icon role=\"button\" type=\"edit\"/>\n        </TransButton>\n      </Tooltip>);\n    }\n    renderCopy() {\n        const { copied } = this.state;\n        const { copyable, prefixCls } = this.props;\n        if (!copyable)\n            return;\n        const title = copied ? this.copiedStr : this.copyStr;\n        return (<Tooltip key=\"copy\" title={title}>\n        <TransButton className={classNames(`${prefixCls}-copy`, copied && `${prefixCls}-copy-success`)} onClick={this.onCopyClick} aria-label={title}>\n          <Icon role=\"button\" type={copied ? 'check' : 'copy'}/>\n        </TransButton>\n      </Tooltip>);\n    }\n    renderEditInput() {\n        const { children, prefixCls, className, style } = this.props;\n        return (<Editable value={typeof children === 'string' ? children : ''} onSave={this.onEditChange} onCancel={this.onEditCancel} prefixCls={prefixCls} className={className} style={style}/>);\n    }\n    renderOperations(forceRenderExpanded) {\n        return [this.renderExpand(forceRenderExpanded), this.renderEdit(), this.renderCopy()].filter(node => node);\n    }\n    renderContent() {\n        const { ellipsisContent, isEllipsis, expanded } = this.state;\n        const _a = this.props, { component, children, className, prefixCls, type, disabled, style } = _a, restProps = __rest(_a, [\"component\", \"children\", \"className\", \"prefixCls\", \"type\", \"disabled\", \"style\"]);\n        const { rows } = this.getEllipsis();\n        const textProps = omit(restProps, [\n            'prefixCls',\n            'editable',\n            'copyable',\n            'ellipsis',\n            'mark',\n            'underline',\n            'mark',\n            'code',\n            'delete',\n            'underline',\n            'strong',\n            ...configConsumerProps,\n        ]);\n        const cssEllipsis = this.canUseCSSEllipsis();\n        const cssTextOverflow = rows === 1 && cssEllipsis;\n        const cssLineClamp = rows && rows > 1 && cssEllipsis;\n        let textNode = children;\n        let ariaLabel = null;\n        // Only use js ellipsis when css ellipsis not support\n        if (rows && isEllipsis && !expanded && !cssEllipsis) {\n            ariaLabel = String(children);\n            // We move full content to outer element to avoid repeat read the content by accessibility\n            textNode = (<span title={String(children)} aria-hidden=\"true\">\n          {ellipsisContent}\n          {ELLIPSIS_STR}\n        </span>);\n        }\n        textNode = wrapperDecorations(this.props, textNode);\n        return (<LocaleReceiver componentName=\"Text\">\n        {({ edit, copy: copyStr, copied, expand }) => {\n            this.editStr = edit;\n            this.copyStr = copyStr;\n            this.copiedStr = copied;\n            this.expandStr = expand;\n            return (<ResizeObserver onResize={this.resizeOnNextFrame} disabled={!rows}>\n              <Typography className={classNames(className, {\n                [`${prefixCls}-${type}`]: type,\n                [`${prefixCls}-disabled`]: disabled,\n                [`${prefixCls}-ellipsis`]: rows,\n                [`${prefixCls}-ellipsis-single-line`]: cssTextOverflow,\n                [`${prefixCls}-ellipsis-multiple-line`]: cssLineClamp,\n            })} style={Object.assign(Object.assign({}, style), { WebkitLineClamp: cssLineClamp ? rows : null })} component={component} ref={this.setContentRef} aria-label={ariaLabel} {...textProps}>\n                {textNode}\n                {this.renderOperations()}\n              </Typography>\n            </ResizeObserver>);\n        }}\n      </LocaleReceiver>);\n    }\n    render() {\n        const { editing } = this.getEditable();\n        if (editing) {\n            return this.renderEditInput();\n        }\n        return this.renderContent();\n    }\n}\nBase.defaultProps = {\n    children: '',\n};\npolyfill(Base);\nexport default withConfigConsumer({\n    prefixCls: 'typography',\n})(Base);\n"]},"metadata":{},"sourceType":"module"}