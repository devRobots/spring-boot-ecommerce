{"ast":null,"code":"\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar classnames_1 = __importDefault(require(\"classnames\"));\n\nvar component_classes_1 = __importDefault(require(\"component-classes\"));\n\nvar rc_animate_1 = __importDefault(require(\"rc-animate\"));\n\nvar rc_menu_1 = require(\"rc-menu\");\n\nvar toArray_1 = __importDefault(require(\"rc-util/lib/Children/toArray\"));\n\nvar KeyCode_1 = __importDefault(require(\"rc-util/lib/KeyCode\"));\n\nvar React = __importStar(require(\"react\"));\n\nvar ReactDOM = __importStar(require(\"react-dom\"));\n\nvar react_lifecycles_compat_1 = require(\"react-lifecycles-compat\");\n\nvar warning_1 = __importDefault(require(\"warning\"));\n\nvar Option_1 = __importDefault(require(\"./Option\")); // Where el is the DOM element you'd like to test for visibility\n\n\nfunction isHidden(node) {\n  return !node || node.offsetParent === null;\n}\n\nvar PropTypes_1 = __importDefault(require(\"./PropTypes\"));\n\nvar SelectTrigger_1 = __importDefault(require(\"./SelectTrigger\"));\n\nvar util_1 = require(\"./util\");\n\nvar SELECT_EMPTY_VALUE_KEY = 'RC_SELECT_EMPTY_VALUE_KEY';\n\nvar noop = function noop() {\n  return null;\n};\n\nfunction chaining() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    } // tslint:disable-next-line:prefer-for-of\n\n\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i] && typeof fns[i] === 'function') {\n        fns[i].apply(chaining, args);\n      }\n    }\n  };\n}\n\nvar Select =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Select, _React$Component);\n\n  function Select(props) {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Select).call(this, props));\n    _this.inputRef = null;\n    _this.inputMirrorRef = null;\n    _this.topCtrlRef = null;\n    _this.selectTriggerRef = null;\n    _this.rootRef = null;\n    _this.selectionRef = null;\n    _this.dropdownContainer = null;\n    _this.blurTimer = null;\n    _this.focusTimer = null;\n    _this.comboboxTimer = null; // tslint:disable-next-line:variable-name\n\n    _this._focused = false; // tslint:disable-next-line:variable-name\n\n    _this._mouseDown = false; // tslint:disable-next-line:variable-name\n\n    _this._options = []; // tslint:disable-next-line:variable-name\n\n    _this._empty = false;\n\n    _this.onInputChange = function (event) {\n      var tokenSeparators = _this.props.tokenSeparators;\n      var val = event.target.value;\n\n      if (util_1.isMultipleOrTags(_this.props) && tokenSeparators.length && util_1.includesSeparators(val, tokenSeparators)) {\n        var nextValue = _this.getValueByInput(val);\n\n        if (nextValue !== undefined) {\n          _this.fireChange(nextValue);\n        }\n\n        _this.setOpenState(false, {\n          needFocus: true\n        });\n\n        _this.setInputValue('', false);\n\n        return;\n      }\n\n      _this.setInputValue(val);\n\n      _this.setState({\n        open: true\n      });\n\n      if (util_1.isCombobox(_this.props)) {\n        _this.fireChange([val]);\n      }\n    };\n\n    _this.onDropdownVisibleChange = function (open) {\n      if (open && !_this._focused) {\n        _this.clearBlurTime();\n\n        _this.timeoutFocus();\n\n        _this._focused = true;\n\n        _this.updateFocusClassName();\n      }\n\n      _this.setOpenState(open);\n    }; // combobox ignore\n\n\n    _this.onKeyDown = function (event) {\n      var open = _this.state.open;\n      var disabled = _this.props.disabled;\n\n      if (disabled) {\n        return;\n      }\n\n      var keyCode = event.keyCode;\n\n      if (open && !_this.getInputDOMNode()) {\n        _this.onInputKeyDown(event);\n      } else if (keyCode === KeyCode_1[\"default\"].ENTER || keyCode === KeyCode_1[\"default\"].DOWN) {\n        if (!open) {\n          _this.setOpenState(true);\n        }\n\n        event.preventDefault();\n      } else if (keyCode === KeyCode_1[\"default\"].SPACE) {\n        // Not block space if popup is shown\n        if (!open) {\n          _this.setOpenState(true);\n\n          event.preventDefault();\n        }\n      }\n    };\n\n    _this.onInputKeyDown = function (event) {\n      var _this$props = _this.props,\n          disabled = _this$props.disabled,\n          combobox = _this$props.combobox,\n          defaultActiveFirstOption = _this$props.defaultActiveFirstOption;\n\n      if (disabled) {\n        return;\n      }\n\n      var state = _this.state;\n\n      var isRealOpen = _this.getRealOpenState(state); // magic code\n\n\n      var keyCode = event.keyCode;\n\n      if (util_1.isMultipleOrTags(_this.props) && !event.target.value && keyCode === KeyCode_1[\"default\"].BACKSPACE) {\n        event.preventDefault();\n        var value = state.value;\n\n        if (value.length) {\n          _this.removeSelected(value[value.length - 1]);\n        }\n\n        return;\n      }\n\n      if (keyCode === KeyCode_1[\"default\"].DOWN) {\n        if (!state.open) {\n          _this.openIfHasChildren();\n\n          event.preventDefault();\n          event.stopPropagation();\n          return;\n        }\n      } else if (keyCode === KeyCode_1[\"default\"].ENTER && state.open) {\n        // Aviod trigger form submit when select item\n        // https://github.com/ant-design/ant-design/issues/10861\n        // https://github.com/ant-design/ant-design/issues/14544\n        if (isRealOpen || !combobox) {\n          event.preventDefault();\n        } // Hard close popup to avoid lock of non option in combobox mode\n\n\n        if (isRealOpen && combobox && defaultActiveFirstOption === false) {\n          _this.comboboxTimer = setTimeout(function () {\n            _this.setOpenState(false);\n          });\n        }\n      } else if (keyCode === KeyCode_1[\"default\"].ESC) {\n        if (state.open) {\n          _this.setOpenState(false);\n\n          event.preventDefault();\n          event.stopPropagation();\n        }\n\n        return;\n      }\n\n      if (isRealOpen && _this.selectTriggerRef) {\n        var menu = _this.selectTriggerRef.getInnerMenu();\n\n        if (menu && menu.onKeyDown(event, _this.handleBackfill)) {\n          event.preventDefault();\n          event.stopPropagation();\n        }\n      }\n    };\n\n    _this.onMenuSelect = function (_ref) {\n      var item = _ref.item;\n\n      if (!item) {\n        return;\n      }\n\n      var value = _this.state.value;\n      var props = _this.props;\n      var selectedValue = util_1.getValuePropValue(item);\n      var lastValue = value[value.length - 1];\n      var skipTrigger = false;\n\n      if (util_1.isMultipleOrTags(props)) {\n        if (util_1.findIndexInValueBySingleValue(value, selectedValue) !== -1) {\n          skipTrigger = true;\n        } else {\n          value = value.concat([selectedValue]);\n        }\n      } else {\n        if (!util_1.isCombobox(props) && lastValue !== undefined && lastValue === selectedValue && selectedValue !== _this.state.backfillValue) {\n          _this.setOpenState(false, {\n            needFocus: true,\n            fireSearch: false\n          });\n\n          skipTrigger = true;\n        } else {\n          value = [selectedValue];\n\n          _this.setOpenState(false, {\n            needFocus: true,\n            fireSearch: false\n          });\n        }\n      }\n\n      if (!skipTrigger) {\n        _this.fireChange(value);\n      }\n\n      _this.fireSelect(selectedValue);\n\n      if (!skipTrigger) {\n        var inputValue = util_1.isCombobox(props) ? util_1.getPropValue(item, props.optionLabelProp) : '';\n\n        if (props.autoClearSearchValue) {\n          _this.setInputValue(inputValue, false);\n        }\n      }\n    };\n\n    _this.onMenuDeselect = function (_ref2) {\n      var item = _ref2.item,\n          domEvent = _ref2.domEvent;\n\n      if (domEvent.type === 'keydown' && domEvent.keyCode === KeyCode_1[\"default\"].ENTER) {\n        var menuItemDomNode = ReactDOM.findDOMNode(item); // https://github.com/ant-design/ant-design/issues/20465#issuecomment-569033796\n\n        if (!isHidden(menuItemDomNode)) {\n          _this.removeSelected(util_1.getValuePropValue(item));\n        }\n\n        return;\n      }\n\n      if (domEvent.type === 'click') {\n        _this.removeSelected(util_1.getValuePropValue(item));\n      }\n\n      var props = _this.props;\n\n      if (props.autoClearSearchValue) {\n        _this.setInputValue('');\n      }\n    };\n\n    _this.onArrowClick = function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (!_this.props.disabled) {\n        _this.setOpenState(!_this.state.open, {\n          needFocus: !_this.state.open\n        });\n      }\n    };\n\n    _this.onPlaceholderClick = function () {\n      if (_this.getInputDOMNode && _this.getInputDOMNode()) {\n        _this.getInputDOMNode().focus();\n      }\n    };\n\n    _this.onOuterFocus = function (e) {\n      if (_this.props.disabled) {\n        e.preventDefault();\n        return;\n      }\n\n      _this.clearBlurTime(); // In IE11, onOuterFocus will be trigger twice when focus input\n      // First one: e.target is div\n      // Second one: e.target is input\n      // other browser only trigger second one\n      // https://github.com/ant-design/ant-design/issues/15942\n      // Here we ignore the first one when e.target is div\n\n\n      var inputNode = _this.getInputDOMNode();\n\n      if (inputNode && e.target === _this.rootRef) {\n        return;\n      }\n\n      if (!util_1.isMultipleOrTagsOrCombobox(_this.props) && e.target === inputNode) {\n        return;\n      }\n\n      if (_this._focused) {\n        return;\n      }\n\n      _this._focused = true;\n\n      _this.updateFocusClassName(); // only effect multiple or tag mode\n\n\n      if (!util_1.isMultipleOrTags(_this.props) || !_this._mouseDown) {\n        _this.timeoutFocus();\n      }\n    };\n\n    _this.onPopupFocus = function () {\n      // fix ie scrollbar, focus element again\n      _this.maybeFocus(true, true);\n    };\n\n    _this.onOuterBlur = function (e) {\n      if (_this.props.disabled) {\n        e.preventDefault();\n        return;\n      }\n\n      _this.blurTimer = window.setTimeout(function () {\n        _this._focused = false;\n\n        _this.updateFocusClassName();\n\n        var props = _this.props;\n        var value = _this.state.value;\n        var inputValue = _this.state.inputValue;\n\n        if (util_1.isSingleMode(props) && props.showSearch && inputValue && props.defaultActiveFirstOption) {\n          var options = _this._options || [];\n\n          if (options.length) {\n            var firstOption = util_1.findFirstMenuItem(options);\n\n            if (firstOption) {\n              value = [util_1.getValuePropValue(firstOption)];\n\n              _this.fireChange(value);\n            }\n          }\n        } else if (util_1.isMultipleOrTags(props) && inputValue) {\n          if (_this._mouseDown) {\n            // need update dropmenu when not blur\n            _this.setInputValue('');\n          } else {\n            // why not use setState?\n            // https://github.com/ant-design/ant-design/issues/14262\n            _this.state.inputValue = '';\n\n            if (_this.getInputDOMNode && _this.getInputDOMNode()) {\n              _this.getInputDOMNode().value = '';\n            }\n          }\n\n          var tmpValue = _this.getValueByInput(inputValue);\n\n          if (tmpValue !== undefined) {\n            value = tmpValue;\n\n            _this.fireChange(value);\n          }\n        } // if click the rest space of Select in multiple mode\n\n\n        if (util_1.isMultipleOrTags(props) && _this._mouseDown) {\n          _this.maybeFocus(true, true);\n\n          _this._mouseDown = false;\n          return;\n        }\n\n        _this.setOpenState(false);\n\n        if (props.onBlur) {\n          props.onBlur(_this.getVLForOnChange(value));\n        }\n      }, 10);\n    };\n\n    _this.onClearSelection = function (event) {\n      var props = _this.props;\n      var state = _this.state;\n\n      if (props.disabled) {\n        return;\n      }\n\n      var inputValue = state.inputValue;\n      var value = state.value;\n      event.stopPropagation();\n\n      if (inputValue || value.length) {\n        if (value.length) {\n          _this.fireChange([]);\n        }\n\n        _this.setOpenState(false, {\n          needFocus: true\n        });\n\n        if (inputValue) {\n          _this.setInputValue('');\n        }\n      }\n    };\n\n    _this.onChoiceAnimationLeave = function () {\n      _this.forcePopupAlign();\n    };\n\n    _this.getOptionInfoBySingleValue = function (value, optionsInfo) {\n      var info;\n      optionsInfo = optionsInfo || _this.state.optionsInfo;\n\n      if (optionsInfo[util_1.getMapKey(value)]) {\n        info = optionsInfo[util_1.getMapKey(value)];\n      }\n\n      if (info) {\n        return info;\n      }\n\n      var defaultLabel = value;\n\n      if (_this.props.labelInValue) {\n        var valueLabel = util_1.getLabelFromPropsValue(_this.props.value, value);\n        var defaultValueLabel = util_1.getLabelFromPropsValue(_this.props.defaultValue, value);\n\n        if (valueLabel !== undefined) {\n          defaultLabel = valueLabel;\n        } else if (defaultValueLabel !== undefined) {\n          defaultLabel = defaultValueLabel;\n        }\n      }\n\n      var defaultInfo = {\n        option: React.createElement(Option_1[\"default\"], {\n          value: value,\n          key: value\n        }, value),\n        value: value,\n        label: defaultLabel\n      };\n      return defaultInfo;\n    };\n\n    _this.getOptionBySingleValue = function (value) {\n      var _this$getOptionInfoBy = _this.getOptionInfoBySingleValue(value),\n          option = _this$getOptionInfoBy.option;\n\n      return option;\n    };\n\n    _this.getOptionsBySingleValue = function (values) {\n      return values.map(function (value) {\n        return _this.getOptionBySingleValue(value);\n      });\n    };\n\n    _this.getValueByLabel = function (label) {\n      if (label === undefined) {\n        return null;\n      }\n\n      var value = null;\n      Object.keys(_this.state.optionsInfo).forEach(function (key) {\n        var info = _this.state.optionsInfo[key];\n        var disabled = info.disabled;\n\n        if (disabled) {\n          return;\n        }\n\n        var oldLable = util_1.toArray(info.label);\n\n        if (oldLable && oldLable.join('') === label) {\n          value = info.value;\n        }\n      });\n      return value;\n    };\n\n    _this.getVLBySingleValue = function (value) {\n      if (_this.props.labelInValue) {\n        return {\n          key: value,\n          label: _this.getLabelBySingleValue(value)\n        };\n      }\n\n      return value;\n    };\n\n    _this.getVLForOnChange = function (vlsS) {\n      var vls = vlsS;\n\n      if (vls !== undefined) {\n        if (!_this.props.labelInValue) {\n          vls = vls.map(function (v) {\n            return v;\n          });\n        } else {\n          vls = vls.map(function (vl) {\n            return {\n              key: vl,\n              label: _this.getLabelBySingleValue(vl)\n            };\n          });\n        }\n\n        return util_1.isMultipleOrTags(_this.props) ? vls : vls[0];\n      }\n\n      return vls;\n    };\n\n    _this.getLabelBySingleValue = function (value, optionsInfo) {\n      var _this$getOptionInfoBy2 = _this.getOptionInfoBySingleValue(value, optionsInfo),\n          label = _this$getOptionInfoBy2.label;\n\n      return label;\n    };\n\n    _this.getDropdownContainer = function () {\n      if (!_this.dropdownContainer) {\n        _this.dropdownContainer = document.createElement('div');\n        document.body.appendChild(_this.dropdownContainer);\n      }\n\n      return _this.dropdownContainer;\n    };\n\n    _this.getPlaceholderElement = function () {\n      var props = _this.props;\n      var state = _this.state;\n      var hidden = false;\n\n      if (state.inputValue) {\n        hidden = true;\n      }\n\n      var value = state.value;\n\n      if (value.length) {\n        hidden = true;\n      }\n\n      if (util_1.isCombobox(props) && value.length === 1 && state.value && !state.value[0]) {\n        hidden = false;\n      }\n\n      var placeholder = props.placeholder;\n\n      if (placeholder) {\n        return React.createElement(\"div\", _extends({\n          onMouseDown: util_1.preventDefaultEvent,\n          style: _objectSpread({\n            display: hidden ? 'none' : 'block'\n          }, util_1.UNSELECTABLE_STYLE)\n        }, util_1.UNSELECTABLE_ATTRIBUTE, {\n          onClick: _this.onPlaceholderClick,\n          className: \"\".concat(props.prefixCls, \"-selection__placeholder\")\n        }), placeholder);\n      }\n\n      return null;\n    };\n\n    _this.getInputElement = function () {\n      var props = _this.props;\n      var defaultInput = React.createElement(\"input\", {\n        id: props.id,\n        autoComplete: \"off\"\n      }); // tslint:disable-next-line:typedef-whitespace\n\n      var inputElement = props.getInputElement ? props.getInputElement() : defaultInput;\n      var inputCls = classnames_1[\"default\"](inputElement.props.className, _defineProperty({}, \"\".concat(props.prefixCls, \"-search__field\"), true)); // https://github.com/ant-design/ant-design/issues/4992#issuecomment-281542159\n      // Add space to the end of the inputValue as the width measurement tolerance\n\n      return React.createElement(\"div\", {\n        className: \"\".concat(props.prefixCls, \"-search__field__wrap\")\n      }, React.cloneElement(inputElement, {\n        ref: _this.saveInputRef,\n        onChange: _this.onInputChange,\n        onKeyDown: chaining(_this.onInputKeyDown, inputElement.props.onKeyDown, _this.props.onInputKeyDown),\n        value: _this.state.inputValue,\n        disabled: props.disabled,\n        className: inputCls\n      }), React.createElement(\"span\", {\n        ref: _this.saveInputMirrorRef,\n        className: \"\".concat(props.prefixCls, \"-search__field__mirror\")\n      }, _this.state.inputValue, \"\\xA0\"));\n    };\n\n    _this.getInputDOMNode = function () {\n      return _this.topCtrlRef ? _this.topCtrlRef.querySelector('input,textarea,div[contentEditable]') : _this.inputRef;\n    };\n\n    _this.getInputMirrorDOMNode = function () {\n      return _this.inputMirrorRef;\n    };\n\n    _this.getPopupDOMNode = function () {\n      if (_this.selectTriggerRef) {\n        return _this.selectTriggerRef.getPopupDOMNode();\n      }\n    };\n\n    _this.getPopupMenuComponent = function () {\n      if (_this.selectTriggerRef) {\n        return _this.selectTriggerRef.getInnerMenu();\n      }\n    };\n\n    _this.setOpenState = function (open) {\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var needFocus = config.needFocus,\n          fireSearch = config.fireSearch;\n      var props = _this.props;\n      var state = _this.state;\n\n      if (state.open === open) {\n        _this.maybeFocus(open, !!needFocus);\n\n        return;\n      }\n\n      if (_this.props.onDropdownVisibleChange) {\n        _this.props.onDropdownVisibleChange(open);\n      }\n\n      var nextState = {\n        open: open,\n        backfillValue: ''\n      }; // clear search input value when open is false in singleMode.\n      // https://github.com/ant-design/ant-design/issues/16572\n\n      if (!open && util_1.isSingleMode(props) && props.showSearch) {\n        _this.setInputValue('', fireSearch);\n      }\n\n      if (!open) {\n        _this.maybeFocus(open, !!needFocus);\n      }\n\n      _this.setState(_objectSpread({\n        open: open\n      }, nextState), function () {\n        if (open) {\n          _this.maybeFocus(open, !!needFocus);\n        }\n      });\n    };\n\n    _this.setInputValue = function (inputValue) {\n      var fireSearch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var onSearch = _this.props.onSearch;\n\n      if (inputValue !== _this.state.inputValue) {\n        _this.setState(function (prevState) {\n          // Additional check if `inputValue` changed in latest state.\n          if (fireSearch && inputValue !== prevState.inputValue && onSearch) {\n            onSearch(inputValue);\n          }\n\n          return {\n            inputValue: inputValue\n          };\n        }, _this.forcePopupAlign);\n      }\n    };\n\n    _this.getValueByInput = function (str) {\n      var _this$props2 = _this.props,\n          multiple = _this$props2.multiple,\n          tokenSeparators = _this$props2.tokenSeparators;\n      var nextValue = _this.state.value;\n      var hasNewValue = false;\n      util_1.splitBySeparators(str, tokenSeparators).forEach(function (label) {\n        var selectedValue = [label];\n\n        if (multiple) {\n          var value = _this.getValueByLabel(label);\n\n          if (value && util_1.findIndexInValueBySingleValue(nextValue, value) === -1) {\n            nextValue = nextValue.concat(value);\n            hasNewValue = true;\n\n            _this.fireSelect(value);\n          }\n        } else if (util_1.findIndexInValueBySingleValue(nextValue, label) === -1) {\n          nextValue = nextValue.concat(selectedValue);\n          hasNewValue = true;\n\n          _this.fireSelect(label);\n        }\n      });\n      return hasNewValue ? nextValue : undefined;\n    };\n\n    _this.getRealOpenState = function (state) {\n      // tslint:disable-next-line:variable-name\n      var _open = _this.props.open;\n\n      if (typeof _open === 'boolean') {\n        return _open;\n      }\n\n      var open = (state || _this.state).open;\n      var options = _this._options || [];\n\n      if (util_1.isMultipleOrTagsOrCombobox(_this.props) || !_this.props.showSearch) {\n        if (open && !options.length) {\n          open = false;\n        }\n      }\n\n      return open;\n    };\n\n    _this.markMouseDown = function () {\n      _this._mouseDown = true;\n    };\n\n    _this.markMouseLeave = function () {\n      _this._mouseDown = false;\n    };\n\n    _this.handleBackfill = function (item) {\n      if (!_this.props.backfill || !(util_1.isSingleMode(_this.props) || util_1.isCombobox(_this.props))) {\n        return;\n      }\n\n      var key = util_1.getValuePropValue(item);\n\n      if (util_1.isCombobox(_this.props)) {\n        _this.setInputValue(key, false);\n      }\n\n      _this.setState({\n        value: [key],\n        backfillValue: key\n      });\n    };\n\n    _this.filterOption = function (input, child) {\n      var defaultFilter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : util_1.defaultFilterFn;\n      var value = _this.state.value;\n      var lastValue = value[value.length - 1];\n\n      if (!input || lastValue && lastValue === _this.state.backfillValue) {\n        return true;\n      }\n\n      var filterFn = _this.props.filterOption;\n\n      if ('filterOption' in _this.props) {\n        if (filterFn === true) {\n          filterFn = defaultFilter.bind(_assertThisInitialized(_this));\n        }\n      } else {\n        filterFn = defaultFilter.bind(_assertThisInitialized(_this));\n      }\n\n      if (!filterFn) {\n        return true;\n      } else if (typeof filterFn === 'function') {\n        return filterFn.call(_assertThisInitialized(_this), input, child);\n      } else if (child.props.disabled) {\n        return false;\n      }\n\n      return true;\n    };\n\n    _this.timeoutFocus = function () {\n      var onFocus = _this.props.onFocus;\n\n      if (_this.focusTimer) {\n        _this.clearFocusTime();\n      }\n\n      _this.focusTimer = window.setTimeout(function () {\n        if (onFocus) {\n          onFocus();\n        }\n      }, 10);\n    };\n\n    _this.clearFocusTime = function () {\n      if (_this.focusTimer) {\n        clearTimeout(_this.focusTimer);\n        _this.focusTimer = null;\n      }\n    };\n\n    _this.clearBlurTime = function () {\n      if (_this.blurTimer) {\n        clearTimeout(_this.blurTimer);\n        _this.blurTimer = null;\n      }\n    };\n\n    _this.clearComboboxTime = function () {\n      if (_this.comboboxTimer) {\n        clearTimeout(_this.comboboxTimer);\n        _this.comboboxTimer = null;\n      }\n    };\n\n    _this.updateFocusClassName = function () {\n      var rootRef = _this.rootRef;\n      var props = _this.props; // avoid setState and its side effect\n\n      if (_this._focused) {\n        component_classes_1[\"default\"](rootRef).add(\"\".concat(props.prefixCls, \"-focused\"));\n      } else {\n        component_classes_1[\"default\"](rootRef).remove(\"\".concat(props.prefixCls, \"-focused\"));\n      }\n    };\n\n    _this.maybeFocus = function (open, needFocus) {\n      if (needFocus || open) {\n        var input = _this.getInputDOMNode();\n\n        var _document = document,\n            activeElement = _document.activeElement;\n\n        if (input && (open || util_1.isMultipleOrTagsOrCombobox(_this.props))) {\n          if (activeElement !== input) {\n            input.focus();\n            _this._focused = true;\n          }\n        } else if (activeElement !== _this.selectionRef && _this.selectionRef) {\n          _this.selectionRef.focus();\n\n          _this._focused = true;\n        }\n      }\n    };\n\n    _this.removeSelected = function (selectedKey, e) {\n      var props = _this.props;\n\n      if (props.disabled || _this.isChildDisabled(selectedKey)) {\n        return;\n      } // Do not trigger Trigger popup\n\n\n      if (e && e.stopPropagation) {\n        e.stopPropagation();\n      }\n\n      var oldValue = _this.state.value;\n      var value = oldValue.filter(function (singleValue) {\n        return singleValue !== selectedKey;\n      });\n      var canMultiple = util_1.isMultipleOrTags(props);\n\n      if (canMultiple) {\n        var event = selectedKey;\n\n        if (props.labelInValue) {\n          event = {\n            key: selectedKey,\n            label: _this.getLabelBySingleValue(selectedKey)\n          };\n        }\n\n        if (props.onDeselect) {\n          props.onDeselect(event, _this.getOptionBySingleValue(selectedKey));\n        }\n      }\n\n      _this.fireChange(value);\n    };\n\n    _this.openIfHasChildren = function () {\n      var props = _this.props;\n\n      if (React.Children.count(props.children) || util_1.isSingleMode(props)) {\n        _this.setOpenState(true);\n      }\n    };\n\n    _this.fireSelect = function (value) {\n      if (_this.props.onSelect) {\n        _this.props.onSelect(_this.getVLBySingleValue(value), _this.getOptionBySingleValue(value));\n      }\n    };\n\n    _this.fireChange = function (value) {\n      var props = _this.props;\n\n      if (!('value' in props)) {\n        _this.setState({\n          value: value\n        }, _this.forcePopupAlign);\n      }\n\n      var vls = _this.getVLForOnChange(value);\n\n      var options = _this.getOptionsBySingleValue(value);\n\n      if (props.onChange) {\n        props.onChange(vls, util_1.isMultipleOrTags(_this.props) ? options : options[0]);\n      }\n    };\n\n    _this.isChildDisabled = function (key) {\n      return toArray_1[\"default\"](_this.props.children).some(function (child) {\n        var childValue = util_1.getValuePropValue(child);\n        return childValue === key && child.props && child.props.disabled;\n      });\n    };\n\n    _this.forcePopupAlign = function () {\n      if (!_this.state.open) {\n        return;\n      }\n\n      if (_this.selectTriggerRef && _this.selectTriggerRef.triggerRef) {\n        _this.selectTriggerRef.triggerRef.forcePopupAlign();\n      }\n    };\n\n    _this.renderFilterOptions = function () {\n      var inputValue = _this.state.inputValue;\n      var _this$props3 = _this.props,\n          children = _this$props3.children,\n          tags = _this$props3.tags,\n          notFoundContent = _this$props3.notFoundContent;\n      var menuItems = [];\n      var childrenKeys = [];\n      var empty = false;\n\n      var options = _this.renderFilterOptionsFromChildren(children, childrenKeys, menuItems);\n\n      if (tags) {\n        // tags value must be string\n        var value = _this.state.value;\n        value = value.filter(function (singleValue) {\n          return childrenKeys.indexOf(singleValue) === -1 && (!inputValue || String(singleValue).indexOf(String(inputValue)) > -1);\n        }); // sort by length\n\n        value.sort(function (val1, val2) {\n          return val1.length - val2.length;\n        });\n        value.forEach(function (singleValue) {\n          var key = singleValue;\n          var menuItem = React.createElement(rc_menu_1.Item, {\n            style: util_1.UNSELECTABLE_STYLE,\n            role: \"option\",\n            attribute: util_1.UNSELECTABLE_ATTRIBUTE,\n            value: key,\n            key: key\n          }, key);\n          options.push(menuItem);\n          menuItems.push(menuItem);\n        }); // ref: https://github.com/ant-design/ant-design/issues/14090\n\n        if (inputValue && menuItems.every(function (option) {\n          return util_1.getValuePropValue(option) !== inputValue;\n        })) {\n          options.unshift(React.createElement(rc_menu_1.Item, {\n            style: util_1.UNSELECTABLE_STYLE,\n            role: \"option\",\n            attribute: util_1.UNSELECTABLE_ATTRIBUTE,\n            value: inputValue,\n            key: inputValue\n          }, inputValue));\n        }\n      }\n\n      if (!options.length && notFoundContent) {\n        empty = true;\n        options = [React.createElement(rc_menu_1.Item, {\n          style: util_1.UNSELECTABLE_STYLE,\n          attribute: util_1.UNSELECTABLE_ATTRIBUTE,\n          disabled: true,\n          role: \"option\",\n          value: \"NOT_FOUND\",\n          key: \"NOT_FOUND\"\n        }, notFoundContent)];\n      }\n\n      return {\n        empty: empty,\n        options: options\n      };\n    };\n\n    _this.renderFilterOptionsFromChildren = function (children, childrenKeys, menuItems) {\n      var sel = [];\n      var props = _this.props;\n      var inputValue = _this.state.inputValue;\n      var tags = props.tags;\n      React.Children.forEach(children, function (child) {\n        if (!child) {\n          return;\n        }\n\n        var type = child.type;\n\n        if (type.isSelectOptGroup) {\n          var label = child.props.label;\n          var key = child.key;\n\n          if (!key && typeof label === 'string') {\n            key = label;\n          } else if (!label && key) {\n            label = key;\n          } // Match option group label\n\n\n          if (inputValue && _this.filterOption(inputValue, child)) {\n            var innerItems = toArray_1[\"default\"](child.props.children).map(function (subChild) {\n              var childValueSub = util_1.getValuePropValue(subChild) || subChild.key;\n              return React.createElement(rc_menu_1.Item, _extends({\n                key: childValueSub,\n                value: childValueSub\n              }, subChild.props));\n            });\n            sel.push(React.createElement(rc_menu_1.ItemGroup, {\n              key: key,\n              title: label\n            }, innerItems)); // Not match\n          } else {\n            var _innerItems = _this.renderFilterOptionsFromChildren(child.props.children, childrenKeys, menuItems);\n\n            if (_innerItems.length) {\n              sel.push(React.createElement(rc_menu_1.ItemGroup, {\n                key: key,\n                title: label\n              }, _innerItems));\n            }\n          }\n\n          return;\n        }\n\n        warning_1[\"default\"](type.isSelectOption, 'the children of `Select` should be `Select.Option` or `Select.OptGroup`, ' + \"instead of `\".concat(type.name || type.displayName || child.type, \"`.\"));\n        var childValue = util_1.getValuePropValue(child);\n        util_1.validateOptionValue(childValue, _this.props);\n\n        if (_this.filterOption(inputValue, child)) {\n          var menuItem = React.createElement(rc_menu_1.Item, _extends({\n            style: util_1.UNSELECTABLE_STYLE,\n            attribute: util_1.UNSELECTABLE_ATTRIBUTE,\n            value: childValue,\n            key: childValue,\n            role: \"option\"\n          }, child.props));\n          sel.push(menuItem);\n          menuItems.push(menuItem);\n        }\n\n        if (tags) {\n          childrenKeys.push(childValue);\n        }\n      });\n      return sel;\n    };\n\n    _this.renderTopControlNode = function () {\n      var _this$state = _this.state,\n          open = _this$state.open,\n          inputValue = _this$state.inputValue;\n      var value = _this.state.value;\n      var props = _this.props;\n      var choiceTransitionName = props.choiceTransitionName,\n          prefixCls = props.prefixCls,\n          maxTagTextLength = props.maxTagTextLength,\n          maxTagCount = props.maxTagCount,\n          showSearch = props.showSearch,\n          removeIcon = props.removeIcon;\n      var maxTagPlaceholder = props.maxTagPlaceholder;\n      var className = \"\".concat(prefixCls, \"-selection__rendered\"); // search input is inside topControlNode in single, multiple & combobox. 2016/04/13\n\n      var innerNode = null;\n\n      if (util_1.isSingleMode(props)) {\n        var selectedValue = null;\n\n        if (value.length) {\n          var showSelectedValue = false;\n          var opacity = 1;\n\n          if (!showSearch) {\n            showSelectedValue = true;\n          } else if (open) {\n            showSelectedValue = !inputValue;\n\n            if (showSelectedValue) {\n              opacity = 0.4;\n            }\n          } else {\n            showSelectedValue = true;\n          }\n\n          var singleValue = value[0];\n\n          var _this$getOptionInfoBy3 = _this.getOptionInfoBySingleValue(singleValue),\n              label = _this$getOptionInfoBy3.label,\n              title = _this$getOptionInfoBy3.title;\n\n          selectedValue = React.createElement(\"div\", {\n            key: \"value\",\n            className: \"\".concat(prefixCls, \"-selection-selected-value\"),\n            title: util_1.toTitle(title || label),\n            style: {\n              display: showSelectedValue ? 'block' : 'none',\n              opacity: opacity\n            }\n          }, label);\n        }\n\n        if (!showSearch) {\n          innerNode = [selectedValue];\n        } else {\n          innerNode = [selectedValue, React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\n            key: \"input\",\n            style: {\n              display: open ? 'block' : 'none'\n            }\n          }, _this.getInputElement())];\n        }\n      } else {\n        var selectedValueNodes = [];\n        var limitedCountValue = value;\n        var maxTagPlaceholderEl;\n\n        if (maxTagCount !== undefined && value.length > maxTagCount) {\n          limitedCountValue = limitedCountValue.slice(0, maxTagCount);\n\n          var omittedValues = _this.getVLForOnChange(value.slice(maxTagCount, value.length));\n\n          var content = \"+ \".concat(value.length - maxTagCount, \" ...\");\n\n          if (maxTagPlaceholder) {\n            content = typeof maxTagPlaceholder === 'function' ? maxTagPlaceholder(omittedValues) : maxTagPlaceholder;\n          }\n\n          maxTagPlaceholderEl = React.createElement(\"li\", _extends({\n            style: util_1.UNSELECTABLE_STYLE\n          }, util_1.UNSELECTABLE_ATTRIBUTE, {\n            role: \"presentation\",\n            onMouseDown: util_1.preventDefaultEvent,\n            className: \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\"),\n            key: \"maxTagPlaceholder\",\n            title: util_1.toTitle(content)\n          }), React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-selection__choice__content\")\n          }, content));\n        }\n\n        if (util_1.isMultipleOrTags(props)) {\n          selectedValueNodes = limitedCountValue.map(function (singleValue) {\n            var info = _this.getOptionInfoBySingleValue(singleValue);\n\n            var content = info.label;\n            var title = info.title || content;\n\n            if (maxTagTextLength && typeof content === 'string' && content.length > maxTagTextLength) {\n              content = \"\".concat(content.slice(0, maxTagTextLength), \"...\");\n            }\n\n            var disabled = _this.isChildDisabled(singleValue);\n\n            var choiceClassName = disabled ? \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\") : \"\".concat(prefixCls, \"-selection__choice\");\n            return React.createElement(\"li\", _extends({\n              style: util_1.UNSELECTABLE_STYLE\n            }, util_1.UNSELECTABLE_ATTRIBUTE, {\n              onMouseDown: util_1.preventDefaultEvent,\n              className: choiceClassName,\n              role: \"presentation\",\n              key: singleValue || SELECT_EMPTY_VALUE_KEY,\n              title: util_1.toTitle(title)\n            }), React.createElement(\"div\", {\n              className: \"\".concat(prefixCls, \"-selection__choice__content\")\n            }, content), disabled ? null : React.createElement(\"span\", {\n              onClick: function onClick(event) {\n                _this.removeSelected(singleValue, event);\n              },\n              className: \"\".concat(prefixCls, \"-selection__choice__remove\")\n            }, removeIcon || React.createElement(\"i\", {\n              className: \"\".concat(prefixCls, \"-selection__choice__remove-icon\")\n            }, \"\\xD7\")));\n          });\n        }\n\n        if (maxTagPlaceholderEl) {\n          selectedValueNodes.push(maxTagPlaceholderEl);\n        }\n\n        selectedValueNodes.push(React.createElement(\"li\", {\n          className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\n          key: \"__input\"\n        }, _this.getInputElement()));\n\n        if (util_1.isMultipleOrTags(props) && choiceTransitionName) {\n          innerNode = React.createElement(rc_animate_1[\"default\"], {\n            onLeave: _this.onChoiceAnimationLeave,\n            component: \"ul\",\n            transitionName: choiceTransitionName\n          }, selectedValueNodes);\n        } else {\n          innerNode = React.createElement(\"ul\", null, selectedValueNodes);\n        }\n      }\n\n      return React.createElement(\"div\", {\n        className: className,\n        ref: _this.saveTopCtrlRef\n      }, _this.getPlaceholderElement(), innerNode);\n    };\n\n    var optionsInfo = Select.getOptionsInfoFromProps(props);\n\n    if (props.tags && typeof props.filterOption !== 'function') {\n      var isDisabledExist = Object.keys(optionsInfo).some(function (key) {\n        return optionsInfo[key].disabled;\n      });\n      warning_1[\"default\"](!isDisabledExist, 'Please avoid setting option to disabled in tags mode since user can always type text as tag.');\n    }\n\n    _this.state = {\n      value: Select.getValueFromProps(props, true),\n      inputValue: props.combobox ? Select.getInputValueForCombobox(props, optionsInfo, true) : '',\n      open: props.defaultOpen,\n      optionsInfo: optionsInfo,\n      backfillValue: '',\n      // a flag for aviod redundant getOptionsInfoFromProps call\n      skipBuildOptionsInfo: true,\n      ariaId: ''\n    };\n    _this.saveInputRef = util_1.saveRef(_assertThisInitialized(_this), 'inputRef');\n    _this.saveInputMirrorRef = util_1.saveRef(_assertThisInitialized(_this), 'inputMirrorRef');\n    _this.saveTopCtrlRef = util_1.saveRef(_assertThisInitialized(_this), 'topCtrlRef');\n    _this.saveSelectTriggerRef = util_1.saveRef(_assertThisInitialized(_this), 'selectTriggerRef');\n    _this.saveRootRef = util_1.saveRef(_assertThisInitialized(_this), 'rootRef');\n    _this.saveSelectionRef = util_1.saveRef(_assertThisInitialized(_this), 'selectionRef');\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // when defaultOpen is true, we should auto focus search input\n      // https://github.com/ant-design/ant-design/issues/14254\n      if (this.props.autoFocus || this.state.open) {\n        this.focus();\n      }\n\n      this.setState({\n        ariaId: util_1.generateUUID()\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (util_1.isMultipleOrTags(this.props)) {\n        var inputNode = this.getInputDOMNode();\n        var mirrorNode = this.getInputMirrorDOMNode();\n\n        if (inputNode && inputNode.value && mirrorNode) {\n          inputNode.style.width = '';\n          inputNode.style.width = \"\".concat(mirrorNode.clientWidth, \"px\");\n        } else if (inputNode) {\n          inputNode.style.width = '';\n        }\n      }\n\n      this.forcePopupAlign();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clearFocusTime();\n      this.clearBlurTime();\n      this.clearComboboxTime();\n\n      if (this.dropdownContainer) {\n        ReactDOM.unmountComponentAtNode(this.dropdownContainer);\n        document.body.removeChild(this.dropdownContainer);\n        this.dropdownContainer = null;\n      }\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      if (util_1.isSingleMode(this.props) && this.selectionRef) {\n        this.selectionRef.focus();\n      } else if (this.getInputDOMNode()) {\n        this.getInputDOMNode().focus();\n      }\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      if (util_1.isSingleMode(this.props) && this.selectionRef) {\n        this.selectionRef.blur();\n      } else if (this.getInputDOMNode()) {\n        this.getInputDOMNode().blur();\n      }\n    }\n  }, {\n    key: \"renderArrow\",\n    value: function renderArrow(multiple) {\n      // showArrow : Set to true if not multiple by default but keep set value.\n      var _this$props4 = this.props,\n          _this$props4$showArro = _this$props4.showArrow,\n          showArrow = _this$props4$showArro === void 0 ? !multiple : _this$props4$showArro,\n          loading = _this$props4.loading,\n          inputIcon = _this$props4.inputIcon,\n          prefixCls = _this$props4.prefixCls;\n\n      if (!showArrow && !loading) {\n        return null;\n      } // if loading  have loading icon\n\n\n      var defaultIcon = loading ? React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow-loading\")\n      }) : React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow-icon\")\n      });\n      return React.createElement(\"span\", _extends({\n        key: \"arrow\",\n        className: \"\".concat(prefixCls, \"-arrow\"),\n        style: util_1.UNSELECTABLE_STYLE\n      }, util_1.UNSELECTABLE_ATTRIBUTE, {\n        onClick: this.onArrowClick\n      }), inputIcon || defaultIcon);\n    }\n  }, {\n    key: \"renderClear\",\n    value: function renderClear() {\n      var _this$props5 = this.props,\n          prefixCls = _this$props5.prefixCls,\n          allowClear = _this$props5.allowClear,\n          clearIcon = _this$props5.clearIcon;\n      var inputValue = this.state.inputValue;\n      var value = this.state.value;\n      var clear = React.createElement(\"span\", _extends({\n        key: \"clear\",\n        className: \"\".concat(prefixCls, \"-selection__clear\"),\n        onMouseDown: util_1.preventDefaultEvent,\n        style: util_1.UNSELECTABLE_STYLE\n      }, util_1.UNSELECTABLE_ATTRIBUTE, {\n        onClick: this.onClearSelection\n      }), clearIcon || React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-selection__clear-icon\")\n      }, \"\\xD7\"));\n\n      if (!allowClear) {\n        return null;\n      }\n\n      if (util_1.isCombobox(this.props)) {\n        if (inputValue) {\n          return clear;\n        }\n\n        return null;\n      }\n\n      if (inputValue || value.length) {\n        return clear;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _rootCls;\n\n      var props = this.props;\n      var multiple = util_1.isMultipleOrTags(props); // Default set showArrow to true if not set (not set directly in defaultProps to handle multiple case)\n\n      var _props$showArrow = props.showArrow,\n          showArrow = _props$showArrow === void 0 ? true : _props$showArrow;\n      var state = this.state;\n      var className = props.className,\n          disabled = props.disabled,\n          prefixCls = props.prefixCls,\n          loading = props.loading;\n      var ctrlNode = this.renderTopControlNode();\n      var _this$state2 = this.state,\n          open = _this$state2.open,\n          ariaId = _this$state2.ariaId;\n\n      if (open) {\n        var filterOptions = this.renderFilterOptions();\n        this._empty = filterOptions.empty;\n        this._options = filterOptions.options;\n      }\n\n      var realOpen = this.getRealOpenState();\n      var empty = this._empty;\n      var options = this._options || [];\n      var dataOrAriaAttributeProps = {};\n      Object.keys(props).forEach(function (key) {\n        if (Object.prototype.hasOwnProperty.call(props, key) && (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')) {\n          dataOrAriaAttributeProps[key] = props[key];\n        }\n      }); // for (const key in props) {\n      //   if (\n      //     Object.prototype.hasOwnProperty.call(props, key) &&\n      //     (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')\n      //   ) {\n      //     dataOrAriaAttributeProps[key] = props[key];\n      //   }\n      // }\n\n      var extraSelectionProps = _objectSpread({}, dataOrAriaAttributeProps);\n\n      if (!util_1.isMultipleOrTagsOrCombobox(props)) {\n        extraSelectionProps = _objectSpread({}, extraSelectionProps, {\n          onKeyDown: this.onKeyDown,\n          tabIndex: props.disabled ? -1 : props.tabIndex\n        });\n      }\n\n      var rootCls = (_rootCls = {}, _defineProperty(_rootCls, className, !!className), _defineProperty(_rootCls, prefixCls, 1), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-focused\"), open || !!this._focused), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-combobox\"), util_1.isCombobox(props)), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-enabled\"), !disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-allow-clear\"), !!props.allowClear), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-no-arrow\"), !showArrow), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-loading\"), !!loading), _rootCls);\n      return React.createElement(SelectTrigger_1[\"default\"], {\n        onPopupFocus: this.onPopupFocus,\n        onMouseEnter: this.props.onMouseEnter,\n        onMouseLeave: this.props.onMouseLeave,\n        dropdownAlign: props.dropdownAlign,\n        dropdownClassName: props.dropdownClassName,\n        dropdownMatchSelectWidth: props.dropdownMatchSelectWidth,\n        defaultActiveFirstOption: props.defaultActiveFirstOption,\n        dropdownMenuStyle: props.dropdownMenuStyle,\n        transitionName: props.transitionName,\n        animation: props.animation,\n        prefixCls: props.prefixCls,\n        dropdownStyle: props.dropdownStyle,\n        combobox: props.combobox,\n        showSearch: props.showSearch,\n        options: options,\n        empty: empty,\n        multiple: multiple,\n        disabled: disabled,\n        visible: realOpen,\n        inputValue: state.inputValue,\n        value: state.value,\n        backfillValue: state.backfillValue,\n        firstActiveValue: props.firstActiveValue,\n        onDropdownVisibleChange: this.onDropdownVisibleChange,\n        getPopupContainer: props.getPopupContainer,\n        onMenuSelect: this.onMenuSelect,\n        onMenuDeselect: this.onMenuDeselect,\n        onPopupScroll: props.onPopupScroll,\n        showAction: props.showAction,\n        ref: this.saveSelectTriggerRef,\n        menuItemSelectedIcon: props.menuItemSelectedIcon,\n        dropdownRender: props.dropdownRender,\n        ariaId: ariaId\n      }, React.createElement(\"div\", {\n        id: props.id,\n        style: props.style,\n        ref: this.saveRootRef,\n        onBlur: this.onOuterBlur,\n        onFocus: this.onOuterFocus,\n        className: classnames_1[\"default\"](rootCls),\n        onMouseDown: this.markMouseDown,\n        onMouseUp: this.markMouseLeave,\n        onMouseOut: this.markMouseLeave\n      }, React.createElement(\"div\", _extends({\n        ref: this.saveSelectionRef,\n        key: \"selection\",\n        className: \"\".concat(prefixCls, \"-selection\\n            \").concat(prefixCls, \"-selection--\").concat(multiple ? 'multiple' : 'single'),\n        role: \"combobox\",\n        \"aria-autocomplete\": \"list\",\n        \"aria-haspopup\": \"true\",\n        \"aria-controls\": ariaId,\n        \"aria-expanded\": realOpen\n      }, extraSelectionProps), ctrlNode, this.renderClear(), this.renderArrow(!!multiple))));\n    }\n  }]);\n\n  return Select;\n}(React.Component);\n\nSelect.propTypes = PropTypes_1[\"default\"];\nSelect.defaultProps = {\n  prefixCls: 'rc-select',\n  defaultOpen: false,\n  labelInValue: false,\n  defaultActiveFirstOption: true,\n  showSearch: true,\n  allowClear: false,\n  placeholder: '',\n  onChange: noop,\n  onFocus: noop,\n  onBlur: noop,\n  onSelect: noop,\n  onSearch: noop,\n  onDeselect: noop,\n  onInputKeyDown: noop,\n  dropdownMatchSelectWidth: true,\n  dropdownStyle: {},\n  dropdownMenuStyle: {},\n  optionFilterProp: 'value',\n  optionLabelProp: 'value',\n  notFoundContent: 'Not Found',\n  backfill: false,\n  showAction: ['click'],\n  tokenSeparators: [],\n  autoClearSearchValue: true,\n  tabIndex: 0,\n  dropdownRender: function dropdownRender(menu) {\n    return menu;\n  }\n};\n\nSelect.getDerivedStateFromProps = function (nextProps, prevState) {\n  var optionsInfo = prevState.skipBuildOptionsInfo ? prevState.optionsInfo : Select.getOptionsInfoFromProps(nextProps, prevState);\n  var newState = {\n    optionsInfo: optionsInfo,\n    skipBuildOptionsInfo: false\n  };\n\n  if ('open' in nextProps) {\n    newState.open = nextProps.open;\n  }\n\n  if ('value' in nextProps) {\n    var value = Select.getValueFromProps(nextProps);\n    newState.value = value;\n\n    if (nextProps.combobox) {\n      newState.inputValue = Select.getInputValueForCombobox(nextProps, optionsInfo);\n    }\n  }\n\n  return newState;\n};\n\nSelect.getOptionsFromChildren = function (children) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  React.Children.forEach(children, function (child) {\n    if (!child) {\n      return;\n    }\n\n    var type = child.type;\n\n    if (type.isSelectOptGroup) {\n      Select.getOptionsFromChildren(child.props.children, options);\n    } else {\n      options.push(child);\n    }\n  });\n  return options;\n};\n\nSelect.getInputValueForCombobox = function (props, optionsInfo, useDefaultValue) {\n  var value = [];\n\n  if ('value' in props && !useDefaultValue) {\n    value = util_1.toArray(props.value);\n  }\n\n  if ('defaultValue' in props && useDefaultValue) {\n    value = util_1.toArray(props.defaultValue);\n  }\n\n  if (value.length) {\n    value = value[0];\n  } else {\n    return '';\n  }\n\n  var label = value;\n\n  if (props.labelInValue) {\n    label = value.label;\n  } else if (optionsInfo[util_1.getMapKey(value)]) {\n    label = optionsInfo[util_1.getMapKey(value)].label;\n  }\n\n  if (label === undefined) {\n    label = '';\n  }\n\n  return label;\n};\n\nSelect.getLabelFromOption = function (props, option) {\n  return util_1.getPropValue(option, props.optionLabelProp);\n};\n\nSelect.getOptionsInfoFromProps = function (props, preState) {\n  var options = Select.getOptionsFromChildren(props.children);\n  var optionsInfo = {};\n  options.forEach(function (option) {\n    var singleValue = util_1.getValuePropValue(option);\n    optionsInfo[util_1.getMapKey(singleValue)] = {\n      option: option,\n      value: singleValue,\n      label: Select.getLabelFromOption(props, option),\n      title: option.props.title,\n      disabled: option.props.disabled\n    };\n  });\n\n  if (preState) {\n    // keep option info in pre state value.\n    var oldOptionsInfo = preState.optionsInfo;\n    var value = preState.value;\n\n    if (value) {\n      value.forEach(function (v) {\n        var key = util_1.getMapKey(v);\n\n        if (!optionsInfo[key] && oldOptionsInfo[key] !== undefined) {\n          optionsInfo[key] = oldOptionsInfo[key];\n        }\n      });\n    }\n  }\n\n  return optionsInfo;\n};\n\nSelect.getValueFromProps = function (props, useDefaultValue) {\n  var value = [];\n\n  if ('value' in props && !useDefaultValue) {\n    value = util_1.toArray(props.value);\n  }\n\n  if ('defaultValue' in props && useDefaultValue) {\n    value = util_1.toArray(props.defaultValue);\n  }\n\n  if (props.labelInValue) {\n    value = value.map(function (v) {\n      return v.key;\n    });\n  }\n\n  return value;\n};\n\nSelect.displayName = 'Select';\nreact_lifecycles_compat_1.polyfill(Select);\nexports[\"default\"] = Select;","map":{"version":3,"sources":["/home/devrobot/Escritorio/ecommerce-frontend/node_modules/rc-select/es/Select.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","_extends","assign","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","p","__importDefault","mod","__esModule","__importStar","result","k","exports","classnames_1","require","component_classes_1","rc_animate_1","rc_menu_1","toArray_1","KeyCode_1","React","ReactDOM","react_lifecycles_compat_1","warning_1","Option_1","isHidden","node","offsetParent","PropTypes_1","SelectTrigger_1","util_1","SELECT_EMPTY_VALUE_KEY","noop","chaining","_len","fns","Array","_key","_len2","args","_key2","Select","_React$Component","_this","inputRef","inputMirrorRef","topCtrlRef","selectTriggerRef","rootRef","selectionRef","dropdownContainer","blurTimer","focusTimer","comboboxTimer","_focused","_mouseDown","_options","_empty","onInputChange","event","tokenSeparators","val","isMultipleOrTags","includesSeparators","nextValue","getValueByInput","undefined","fireChange","setOpenState","needFocus","setInputValue","setState","open","isCombobox","onDropdownVisibleChange","clearBlurTime","timeoutFocus","updateFocusClassName","onKeyDown","state","disabled","keyCode","getInputDOMNode","onInputKeyDown","ENTER","DOWN","preventDefault","SPACE","_this$props","combobox","defaultActiveFirstOption","isRealOpen","getRealOpenState","BACKSPACE","removeSelected","openIfHasChildren","stopPropagation","setTimeout","ESC","menu","getInnerMenu","handleBackfill","onMenuSelect","_ref","item","selectedValue","getValuePropValue","lastValue","skipTrigger","findIndexInValueBySingleValue","concat","backfillValue","fireSearch","fireSelect","inputValue","getPropValue","optionLabelProp","autoClearSearchValue","onMenuDeselect","_ref2","domEvent","type","menuItemDomNode","findDOMNode","onArrowClick","e","onPlaceholderClick","focus","onOuterFocus","inputNode","isMultipleOrTagsOrCombobox","onPopupFocus","maybeFocus","onOuterBlur","window","isSingleMode","showSearch","options","firstOption","findFirstMenuItem","tmpValue","onBlur","getVLForOnChange","onClearSelection","onChoiceAnimationLeave","forcePopupAlign","getOptionInfoBySingleValue","optionsInfo","info","getMapKey","defaultLabel","labelInValue","valueLabel","getLabelFromPropsValue","defaultValueLabel","defaultValue","defaultInfo","option","createElement","label","getOptionBySingleValue","_this$getOptionInfoBy","getOptionsBySingleValue","values","map","getValueByLabel","oldLable","toArray","join","getVLBySingleValue","getLabelBySingleValue","vlsS","vls","v","vl","_this$getOptionInfoBy2","getDropdownContainer","document","body","appendChild","getPlaceholderElement","hidden","placeholder","onMouseDown","preventDefaultEvent","style","display","UNSELECTABLE_STYLE","UNSELECTABLE_ATTRIBUTE","onClick","className","prefixCls","getInputElement","defaultInput","id","autoComplete","inputElement","inputCls","cloneElement","ref","saveInputRef","onChange","saveInputMirrorRef","querySelector","getInputMirrorDOMNode","getPopupDOMNode","getPopupMenuComponent","config","nextState","onSearch","prevState","str","_this$props2","multiple","hasNewValue","splitBySeparators","_open","markMouseDown","markMouseLeave","backfill","filterOption","input","child","defaultFilter","defaultFilterFn","filterFn","bind","onFocus","clearFocusTime","clearTimeout","clearComboboxTime","add","remove","_document","activeElement","selectedKey","isChildDisabled","oldValue","singleValue","canMultiple","onDeselect","Children","count","children","onSelect","some","childValue","triggerRef","renderFilterOptions","_this$props3","tags","notFoundContent","menuItems","childrenKeys","empty","renderFilterOptionsFromChildren","indexOf","String","sort","val1","val2","menuItem","Item","role","attribute","every","unshift","sel","isSelectOptGroup","innerItems","subChild","childValueSub","ItemGroup","title","_innerItems","isSelectOption","name","displayName","validateOptionValue","renderTopControlNode","_this$state","choiceTransitionName","maxTagTextLength","maxTagCount","removeIcon","maxTagPlaceholder","innerNode","showSelectedValue","opacity","_this$getOptionInfoBy3","toTitle","selectedValueNodes","limitedCountValue","maxTagPlaceholderEl","slice","omittedValues","content","choiceClassName","onLeave","component","transitionName","saveTopCtrlRef","getOptionsInfoFromProps","isDisabledExist","getValueFromProps","getInputValueForCombobox","defaultOpen","skipBuildOptionsInfo","ariaId","saveRef","saveSelectTriggerRef","saveRootRef","saveSelectionRef","componentDidMount","autoFocus","generateUUID","componentDidUpdate","mirrorNode","width","clientWidth","componentWillUnmount","unmountComponentAtNode","removeChild","blur","renderArrow","_this$props4","_this$props4$showArro","showArrow","loading","inputIcon","defaultIcon","renderClear","_this$props5","allowClear","clearIcon","clear","render","_rootCls","_props$showArrow","ctrlNode","_this$state2","filterOptions","realOpen","dataOrAriaAttributeProps","substr","extraSelectionProps","tabIndex","rootCls","onMouseEnter","onMouseLeave","dropdownAlign","dropdownClassName","dropdownMatchSelectWidth","dropdownMenuStyle","animation","dropdownStyle","visible","firstActiveValue","getPopupContainer","onPopupScroll","showAction","menuItemSelectedIcon","dropdownRender","onMouseUp","onMouseOut","Component","propTypes","defaultProps","optionFilterProp","getDerivedStateFromProps","nextProps","newState","getOptionsFromChildren","useDefaultValue","getLabelFromOption","preState","oldOptionsInfo","polyfill"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar classnames_1 = __importDefault(require(\"classnames\"));\n\nvar component_classes_1 = __importDefault(require(\"component-classes\"));\n\nvar rc_animate_1 = __importDefault(require(\"rc-animate\"));\n\nvar rc_menu_1 = require(\"rc-menu\");\n\nvar toArray_1 = __importDefault(require(\"rc-util/lib/Children/toArray\"));\n\nvar KeyCode_1 = __importDefault(require(\"rc-util/lib/KeyCode\"));\n\nvar React = __importStar(require(\"react\"));\n\nvar ReactDOM = __importStar(require(\"react-dom\"));\n\nvar react_lifecycles_compat_1 = require(\"react-lifecycles-compat\");\n\nvar warning_1 = __importDefault(require(\"warning\"));\n\nvar Option_1 = __importDefault(require(\"./Option\")); // Where el is the DOM element you'd like to test for visibility\n\n\nfunction isHidden(node) {\n  return !node || node.offsetParent === null;\n}\n\nvar PropTypes_1 = __importDefault(require(\"./PropTypes\"));\n\nvar SelectTrigger_1 = __importDefault(require(\"./SelectTrigger\"));\n\nvar util_1 = require(\"./util\");\n\nvar SELECT_EMPTY_VALUE_KEY = 'RC_SELECT_EMPTY_VALUE_KEY';\n\nvar noop = function noop() {\n  return null;\n};\n\nfunction chaining() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    // tslint:disable-next-line:prefer-for-of\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i] && typeof fns[i] === 'function') {\n        fns[i].apply(chaining, args);\n      }\n    }\n  };\n}\n\nvar Select =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Select, _React$Component);\n\n  function Select(props) {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Select).call(this, props));\n    _this.inputRef = null;\n    _this.inputMirrorRef = null;\n    _this.topCtrlRef = null;\n    _this.selectTriggerRef = null;\n    _this.rootRef = null;\n    _this.selectionRef = null;\n    _this.dropdownContainer = null;\n    _this.blurTimer = null;\n    _this.focusTimer = null;\n    _this.comboboxTimer = null; // tslint:disable-next-line:variable-name\n\n    _this._focused = false; // tslint:disable-next-line:variable-name\n\n    _this._mouseDown = false; // tslint:disable-next-line:variable-name\n\n    _this._options = []; // tslint:disable-next-line:variable-name\n\n    _this._empty = false;\n\n    _this.onInputChange = function (event) {\n      var tokenSeparators = _this.props.tokenSeparators;\n      var val = event.target.value;\n\n      if (util_1.isMultipleOrTags(_this.props) && tokenSeparators.length && util_1.includesSeparators(val, tokenSeparators)) {\n        var nextValue = _this.getValueByInput(val);\n\n        if (nextValue !== undefined) {\n          _this.fireChange(nextValue);\n        }\n\n        _this.setOpenState(false, {\n          needFocus: true\n        });\n\n        _this.setInputValue('', false);\n\n        return;\n      }\n\n      _this.setInputValue(val);\n\n      _this.setState({\n        open: true\n      });\n\n      if (util_1.isCombobox(_this.props)) {\n        _this.fireChange([val]);\n      }\n    };\n\n    _this.onDropdownVisibleChange = function (open) {\n      if (open && !_this._focused) {\n        _this.clearBlurTime();\n\n        _this.timeoutFocus();\n\n        _this._focused = true;\n\n        _this.updateFocusClassName();\n      }\n\n      _this.setOpenState(open);\n    }; // combobox ignore\n\n\n    _this.onKeyDown = function (event) {\n      var open = _this.state.open;\n      var disabled = _this.props.disabled;\n\n      if (disabled) {\n        return;\n      }\n\n      var keyCode = event.keyCode;\n\n      if (open && !_this.getInputDOMNode()) {\n        _this.onInputKeyDown(event);\n      } else if (keyCode === KeyCode_1[\"default\"].ENTER || keyCode === KeyCode_1[\"default\"].DOWN) {\n        if (!open) {\n          _this.setOpenState(true);\n        }\n\n        event.preventDefault();\n      } else if (keyCode === KeyCode_1[\"default\"].SPACE) {\n        // Not block space if popup is shown\n        if (!open) {\n          _this.setOpenState(true);\n\n          event.preventDefault();\n        }\n      }\n    };\n\n    _this.onInputKeyDown = function (event) {\n      var _this$props = _this.props,\n          disabled = _this$props.disabled,\n          combobox = _this$props.combobox,\n          defaultActiveFirstOption = _this$props.defaultActiveFirstOption;\n\n      if (disabled) {\n        return;\n      }\n\n      var state = _this.state;\n\n      var isRealOpen = _this.getRealOpenState(state); // magic code\n\n\n      var keyCode = event.keyCode;\n\n      if (util_1.isMultipleOrTags(_this.props) && !event.target.value && keyCode === KeyCode_1[\"default\"].BACKSPACE) {\n        event.preventDefault();\n        var value = state.value;\n\n        if (value.length) {\n          _this.removeSelected(value[value.length - 1]);\n        }\n\n        return;\n      }\n\n      if (keyCode === KeyCode_1[\"default\"].DOWN) {\n        if (!state.open) {\n          _this.openIfHasChildren();\n\n          event.preventDefault();\n          event.stopPropagation();\n          return;\n        }\n      } else if (keyCode === KeyCode_1[\"default\"].ENTER && state.open) {\n        // Aviod trigger form submit when select item\n        // https://github.com/ant-design/ant-design/issues/10861\n        // https://github.com/ant-design/ant-design/issues/14544\n        if (isRealOpen || !combobox) {\n          event.preventDefault();\n        } // Hard close popup to avoid lock of non option in combobox mode\n\n\n        if (isRealOpen && combobox && defaultActiveFirstOption === false) {\n          _this.comboboxTimer = setTimeout(function () {\n            _this.setOpenState(false);\n          });\n        }\n      } else if (keyCode === KeyCode_1[\"default\"].ESC) {\n        if (state.open) {\n          _this.setOpenState(false);\n\n          event.preventDefault();\n          event.stopPropagation();\n        }\n\n        return;\n      }\n\n      if (isRealOpen && _this.selectTriggerRef) {\n        var menu = _this.selectTriggerRef.getInnerMenu();\n\n        if (menu && menu.onKeyDown(event, _this.handleBackfill)) {\n          event.preventDefault();\n          event.stopPropagation();\n        }\n      }\n    };\n\n    _this.onMenuSelect = function (_ref) {\n      var item = _ref.item;\n\n      if (!item) {\n        return;\n      }\n\n      var value = _this.state.value;\n      var props = _this.props;\n      var selectedValue = util_1.getValuePropValue(item);\n      var lastValue = value[value.length - 1];\n      var skipTrigger = false;\n\n      if (util_1.isMultipleOrTags(props)) {\n        if (util_1.findIndexInValueBySingleValue(value, selectedValue) !== -1) {\n          skipTrigger = true;\n        } else {\n          value = value.concat([selectedValue]);\n        }\n      } else {\n        if (!util_1.isCombobox(props) && lastValue !== undefined && lastValue === selectedValue && selectedValue !== _this.state.backfillValue) {\n          _this.setOpenState(false, {\n            needFocus: true,\n            fireSearch: false\n          });\n\n          skipTrigger = true;\n        } else {\n          value = [selectedValue];\n\n          _this.setOpenState(false, {\n            needFocus: true,\n            fireSearch: false\n          });\n        }\n      }\n\n      if (!skipTrigger) {\n        _this.fireChange(value);\n      }\n\n      _this.fireSelect(selectedValue);\n\n      if (!skipTrigger) {\n        var inputValue = util_1.isCombobox(props) ? util_1.getPropValue(item, props.optionLabelProp) : '';\n\n        if (props.autoClearSearchValue) {\n          _this.setInputValue(inputValue, false);\n        }\n      }\n    };\n\n    _this.onMenuDeselect = function (_ref2) {\n      var item = _ref2.item,\n          domEvent = _ref2.domEvent;\n\n      if (domEvent.type === 'keydown' && domEvent.keyCode === KeyCode_1[\"default\"].ENTER) {\n        var menuItemDomNode = ReactDOM.findDOMNode(item); // https://github.com/ant-design/ant-design/issues/20465#issuecomment-569033796\n\n        if (!isHidden(menuItemDomNode)) {\n          _this.removeSelected(util_1.getValuePropValue(item));\n        }\n\n        return;\n      }\n\n      if (domEvent.type === 'click') {\n        _this.removeSelected(util_1.getValuePropValue(item));\n      }\n\n      var props = _this.props;\n\n      if (props.autoClearSearchValue) {\n        _this.setInputValue('');\n      }\n    };\n\n    _this.onArrowClick = function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (!_this.props.disabled) {\n        _this.setOpenState(!_this.state.open, {\n          needFocus: !_this.state.open\n        });\n      }\n    };\n\n    _this.onPlaceholderClick = function () {\n      if (_this.getInputDOMNode && _this.getInputDOMNode()) {\n        _this.getInputDOMNode().focus();\n      }\n    };\n\n    _this.onOuterFocus = function (e) {\n      if (_this.props.disabled) {\n        e.preventDefault();\n        return;\n      }\n\n      _this.clearBlurTime(); // In IE11, onOuterFocus will be trigger twice when focus input\n      // First one: e.target is div\n      // Second one: e.target is input\n      // other browser only trigger second one\n      // https://github.com/ant-design/ant-design/issues/15942\n      // Here we ignore the first one when e.target is div\n\n\n      var inputNode = _this.getInputDOMNode();\n\n      if (inputNode && e.target === _this.rootRef) {\n        return;\n      }\n\n      if (!util_1.isMultipleOrTagsOrCombobox(_this.props) && e.target === inputNode) {\n        return;\n      }\n\n      if (_this._focused) {\n        return;\n      }\n\n      _this._focused = true;\n\n      _this.updateFocusClassName(); // only effect multiple or tag mode\n\n\n      if (!util_1.isMultipleOrTags(_this.props) || !_this._mouseDown) {\n        _this.timeoutFocus();\n      }\n    };\n\n    _this.onPopupFocus = function () {\n      // fix ie scrollbar, focus element again\n      _this.maybeFocus(true, true);\n    };\n\n    _this.onOuterBlur = function (e) {\n      if (_this.props.disabled) {\n        e.preventDefault();\n        return;\n      }\n\n      _this.blurTimer = window.setTimeout(function () {\n        _this._focused = false;\n\n        _this.updateFocusClassName();\n\n        var props = _this.props;\n        var value = _this.state.value;\n        var inputValue = _this.state.inputValue;\n\n        if (util_1.isSingleMode(props) && props.showSearch && inputValue && props.defaultActiveFirstOption) {\n          var options = _this._options || [];\n\n          if (options.length) {\n            var firstOption = util_1.findFirstMenuItem(options);\n\n            if (firstOption) {\n              value = [util_1.getValuePropValue(firstOption)];\n\n              _this.fireChange(value);\n            }\n          }\n        } else if (util_1.isMultipleOrTags(props) && inputValue) {\n          if (_this._mouseDown) {\n            // need update dropmenu when not blur\n            _this.setInputValue('');\n          } else {\n            // why not use setState?\n            // https://github.com/ant-design/ant-design/issues/14262\n            _this.state.inputValue = '';\n\n            if (_this.getInputDOMNode && _this.getInputDOMNode()) {\n              _this.getInputDOMNode().value = '';\n            }\n          }\n\n          var tmpValue = _this.getValueByInput(inputValue);\n\n          if (tmpValue !== undefined) {\n            value = tmpValue;\n\n            _this.fireChange(value);\n          }\n        } // if click the rest space of Select in multiple mode\n\n\n        if (util_1.isMultipleOrTags(props) && _this._mouseDown) {\n          _this.maybeFocus(true, true);\n\n          _this._mouseDown = false;\n          return;\n        }\n\n        _this.setOpenState(false);\n\n        if (props.onBlur) {\n          props.onBlur(_this.getVLForOnChange(value));\n        }\n      }, 10);\n    };\n\n    _this.onClearSelection = function (event) {\n      var props = _this.props;\n      var state = _this.state;\n\n      if (props.disabled) {\n        return;\n      }\n\n      var inputValue = state.inputValue;\n      var value = state.value;\n      event.stopPropagation();\n\n      if (inputValue || value.length) {\n        if (value.length) {\n          _this.fireChange([]);\n        }\n\n        _this.setOpenState(false, {\n          needFocus: true\n        });\n\n        if (inputValue) {\n          _this.setInputValue('');\n        }\n      }\n    };\n\n    _this.onChoiceAnimationLeave = function () {\n      _this.forcePopupAlign();\n    };\n\n    _this.getOptionInfoBySingleValue = function (value, optionsInfo) {\n      var info;\n      optionsInfo = optionsInfo || _this.state.optionsInfo;\n\n      if (optionsInfo[util_1.getMapKey(value)]) {\n        info = optionsInfo[util_1.getMapKey(value)];\n      }\n\n      if (info) {\n        return info;\n      }\n\n      var defaultLabel = value;\n\n      if (_this.props.labelInValue) {\n        var valueLabel = util_1.getLabelFromPropsValue(_this.props.value, value);\n        var defaultValueLabel = util_1.getLabelFromPropsValue(_this.props.defaultValue, value);\n\n        if (valueLabel !== undefined) {\n          defaultLabel = valueLabel;\n        } else if (defaultValueLabel !== undefined) {\n          defaultLabel = defaultValueLabel;\n        }\n      }\n\n      var defaultInfo = {\n        option: React.createElement(Option_1[\"default\"], {\n          value: value,\n          key: value\n        }, value),\n        value: value,\n        label: defaultLabel\n      };\n      return defaultInfo;\n    };\n\n    _this.getOptionBySingleValue = function (value) {\n      var _this$getOptionInfoBy = _this.getOptionInfoBySingleValue(value),\n          option = _this$getOptionInfoBy.option;\n\n      return option;\n    };\n\n    _this.getOptionsBySingleValue = function (values) {\n      return values.map(function (value) {\n        return _this.getOptionBySingleValue(value);\n      });\n    };\n\n    _this.getValueByLabel = function (label) {\n      if (label === undefined) {\n        return null;\n      }\n\n      var value = null;\n      Object.keys(_this.state.optionsInfo).forEach(function (key) {\n        var info = _this.state.optionsInfo[key];\n        var disabled = info.disabled;\n\n        if (disabled) {\n          return;\n        }\n\n        var oldLable = util_1.toArray(info.label);\n\n        if (oldLable && oldLable.join('') === label) {\n          value = info.value;\n        }\n      });\n      return value;\n    };\n\n    _this.getVLBySingleValue = function (value) {\n      if (_this.props.labelInValue) {\n        return {\n          key: value,\n          label: _this.getLabelBySingleValue(value)\n        };\n      }\n\n      return value;\n    };\n\n    _this.getVLForOnChange = function (vlsS) {\n      var vls = vlsS;\n\n      if (vls !== undefined) {\n        if (!_this.props.labelInValue) {\n          vls = vls.map(function (v) {\n            return v;\n          });\n        } else {\n          vls = vls.map(function (vl) {\n            return {\n              key: vl,\n              label: _this.getLabelBySingleValue(vl)\n            };\n          });\n        }\n\n        return util_1.isMultipleOrTags(_this.props) ? vls : vls[0];\n      }\n\n      return vls;\n    };\n\n    _this.getLabelBySingleValue = function (value, optionsInfo) {\n      var _this$getOptionInfoBy2 = _this.getOptionInfoBySingleValue(value, optionsInfo),\n          label = _this$getOptionInfoBy2.label;\n\n      return label;\n    };\n\n    _this.getDropdownContainer = function () {\n      if (!_this.dropdownContainer) {\n        _this.dropdownContainer = document.createElement('div');\n        document.body.appendChild(_this.dropdownContainer);\n      }\n\n      return _this.dropdownContainer;\n    };\n\n    _this.getPlaceholderElement = function () {\n      var props = _this.props;\n      var state = _this.state;\n      var hidden = false;\n\n      if (state.inputValue) {\n        hidden = true;\n      }\n\n      var value = state.value;\n\n      if (value.length) {\n        hidden = true;\n      }\n\n      if (util_1.isCombobox(props) && value.length === 1 && state.value && !state.value[0]) {\n        hidden = false;\n      }\n\n      var placeholder = props.placeholder;\n\n      if (placeholder) {\n        return React.createElement(\"div\", _extends({\n          onMouseDown: util_1.preventDefaultEvent,\n          style: _objectSpread({\n            display: hidden ? 'none' : 'block'\n          }, util_1.UNSELECTABLE_STYLE)\n        }, util_1.UNSELECTABLE_ATTRIBUTE, {\n          onClick: _this.onPlaceholderClick,\n          className: \"\".concat(props.prefixCls, \"-selection__placeholder\")\n        }), placeholder);\n      }\n\n      return null;\n    };\n\n    _this.getInputElement = function () {\n      var props = _this.props;\n      var defaultInput = React.createElement(\"input\", {\n        id: props.id,\n        autoComplete: \"off\"\n      }); // tslint:disable-next-line:typedef-whitespace\n\n      var inputElement = props.getInputElement ? props.getInputElement() : defaultInput;\n      var inputCls = classnames_1[\"default\"](inputElement.props.className, _defineProperty({}, \"\".concat(props.prefixCls, \"-search__field\"), true)); // https://github.com/ant-design/ant-design/issues/4992#issuecomment-281542159\n      // Add space to the end of the inputValue as the width measurement tolerance\n\n      return React.createElement(\"div\", {\n        className: \"\".concat(props.prefixCls, \"-search__field__wrap\")\n      }, React.cloneElement(inputElement, {\n        ref: _this.saveInputRef,\n        onChange: _this.onInputChange,\n        onKeyDown: chaining(_this.onInputKeyDown, inputElement.props.onKeyDown, _this.props.onInputKeyDown),\n        value: _this.state.inputValue,\n        disabled: props.disabled,\n        className: inputCls\n      }), React.createElement(\"span\", {\n        ref: _this.saveInputMirrorRef,\n        className: \"\".concat(props.prefixCls, \"-search__field__mirror\")\n      }, _this.state.inputValue, \"\\xA0\"));\n    };\n\n    _this.getInputDOMNode = function () {\n      return _this.topCtrlRef ? _this.topCtrlRef.querySelector('input,textarea,div[contentEditable]') : _this.inputRef;\n    };\n\n    _this.getInputMirrorDOMNode = function () {\n      return _this.inputMirrorRef;\n    };\n\n    _this.getPopupDOMNode = function () {\n      if (_this.selectTriggerRef) {\n        return _this.selectTriggerRef.getPopupDOMNode();\n      }\n    };\n\n    _this.getPopupMenuComponent = function () {\n      if (_this.selectTriggerRef) {\n        return _this.selectTriggerRef.getInnerMenu();\n      }\n    };\n\n    _this.setOpenState = function (open) {\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var needFocus = config.needFocus,\n          fireSearch = config.fireSearch;\n      var props = _this.props;\n      var state = _this.state;\n\n      if (state.open === open) {\n        _this.maybeFocus(open, !!needFocus);\n\n        return;\n      }\n\n      if (_this.props.onDropdownVisibleChange) {\n        _this.props.onDropdownVisibleChange(open);\n      }\n\n      var nextState = {\n        open: open,\n        backfillValue: ''\n      }; // clear search input value when open is false in singleMode.\n      // https://github.com/ant-design/ant-design/issues/16572\n\n      if (!open && util_1.isSingleMode(props) && props.showSearch) {\n        _this.setInputValue('', fireSearch);\n      }\n\n      if (!open) {\n        _this.maybeFocus(open, !!needFocus);\n      }\n\n      _this.setState(_objectSpread({\n        open: open\n      }, nextState), function () {\n        if (open) {\n          _this.maybeFocus(open, !!needFocus);\n        }\n      });\n    };\n\n    _this.setInputValue = function (inputValue) {\n      var fireSearch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var onSearch = _this.props.onSearch;\n\n      if (inputValue !== _this.state.inputValue) {\n        _this.setState(function (prevState) {\n          // Additional check if `inputValue` changed in latest state.\n          if (fireSearch && inputValue !== prevState.inputValue && onSearch) {\n            onSearch(inputValue);\n          }\n\n          return {\n            inputValue: inputValue\n          };\n        }, _this.forcePopupAlign);\n      }\n    };\n\n    _this.getValueByInput = function (str) {\n      var _this$props2 = _this.props,\n          multiple = _this$props2.multiple,\n          tokenSeparators = _this$props2.tokenSeparators;\n      var nextValue = _this.state.value;\n      var hasNewValue = false;\n      util_1.splitBySeparators(str, tokenSeparators).forEach(function (label) {\n        var selectedValue = [label];\n\n        if (multiple) {\n          var value = _this.getValueByLabel(label);\n\n          if (value && util_1.findIndexInValueBySingleValue(nextValue, value) === -1) {\n            nextValue = nextValue.concat(value);\n            hasNewValue = true;\n\n            _this.fireSelect(value);\n          }\n        } else if (util_1.findIndexInValueBySingleValue(nextValue, label) === -1) {\n          nextValue = nextValue.concat(selectedValue);\n          hasNewValue = true;\n\n          _this.fireSelect(label);\n        }\n      });\n      return hasNewValue ? nextValue : undefined;\n    };\n\n    _this.getRealOpenState = function (state) {\n      // tslint:disable-next-line:variable-name\n      var _open = _this.props.open;\n\n      if (typeof _open === 'boolean') {\n        return _open;\n      }\n\n      var open = (state || _this.state).open;\n      var options = _this._options || [];\n\n      if (util_1.isMultipleOrTagsOrCombobox(_this.props) || !_this.props.showSearch) {\n        if (open && !options.length) {\n          open = false;\n        }\n      }\n\n      return open;\n    };\n\n    _this.markMouseDown = function () {\n      _this._mouseDown = true;\n    };\n\n    _this.markMouseLeave = function () {\n      _this._mouseDown = false;\n    };\n\n    _this.handleBackfill = function (item) {\n      if (!_this.props.backfill || !(util_1.isSingleMode(_this.props) || util_1.isCombobox(_this.props))) {\n        return;\n      }\n\n      var key = util_1.getValuePropValue(item);\n\n      if (util_1.isCombobox(_this.props)) {\n        _this.setInputValue(key, false);\n      }\n\n      _this.setState({\n        value: [key],\n        backfillValue: key\n      });\n    };\n\n    _this.filterOption = function (input, child) {\n      var defaultFilter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : util_1.defaultFilterFn;\n      var value = _this.state.value;\n      var lastValue = value[value.length - 1];\n\n      if (!input || lastValue && lastValue === _this.state.backfillValue) {\n        return true;\n      }\n\n      var filterFn = _this.props.filterOption;\n\n      if ('filterOption' in _this.props) {\n        if (filterFn === true) {\n          filterFn = defaultFilter.bind(_assertThisInitialized(_this));\n        }\n      } else {\n        filterFn = defaultFilter.bind(_assertThisInitialized(_this));\n      }\n\n      if (!filterFn) {\n        return true;\n      } else if (typeof filterFn === 'function') {\n        return filterFn.call(_assertThisInitialized(_this), input, child);\n      } else if (child.props.disabled) {\n        return false;\n      }\n\n      return true;\n    };\n\n    _this.timeoutFocus = function () {\n      var onFocus = _this.props.onFocus;\n\n      if (_this.focusTimer) {\n        _this.clearFocusTime();\n      }\n\n      _this.focusTimer = window.setTimeout(function () {\n        if (onFocus) {\n          onFocus();\n        }\n      }, 10);\n    };\n\n    _this.clearFocusTime = function () {\n      if (_this.focusTimer) {\n        clearTimeout(_this.focusTimer);\n        _this.focusTimer = null;\n      }\n    };\n\n    _this.clearBlurTime = function () {\n      if (_this.blurTimer) {\n        clearTimeout(_this.blurTimer);\n        _this.blurTimer = null;\n      }\n    };\n\n    _this.clearComboboxTime = function () {\n      if (_this.comboboxTimer) {\n        clearTimeout(_this.comboboxTimer);\n        _this.comboboxTimer = null;\n      }\n    };\n\n    _this.updateFocusClassName = function () {\n      var rootRef = _this.rootRef;\n      var props = _this.props; // avoid setState and its side effect\n\n      if (_this._focused) {\n        component_classes_1[\"default\"](rootRef).add(\"\".concat(props.prefixCls, \"-focused\"));\n      } else {\n        component_classes_1[\"default\"](rootRef).remove(\"\".concat(props.prefixCls, \"-focused\"));\n      }\n    };\n\n    _this.maybeFocus = function (open, needFocus) {\n      if (needFocus || open) {\n        var input = _this.getInputDOMNode();\n\n        var _document = document,\n            activeElement = _document.activeElement;\n\n        if (input && (open || util_1.isMultipleOrTagsOrCombobox(_this.props))) {\n          if (activeElement !== input) {\n            input.focus();\n            _this._focused = true;\n          }\n        } else if (activeElement !== _this.selectionRef && _this.selectionRef) {\n          _this.selectionRef.focus();\n\n          _this._focused = true;\n        }\n      }\n    };\n\n    _this.removeSelected = function (selectedKey, e) {\n      var props = _this.props;\n\n      if (props.disabled || _this.isChildDisabled(selectedKey)) {\n        return;\n      } // Do not trigger Trigger popup\n\n\n      if (e && e.stopPropagation) {\n        e.stopPropagation();\n      }\n\n      var oldValue = _this.state.value;\n      var value = oldValue.filter(function (singleValue) {\n        return singleValue !== selectedKey;\n      });\n      var canMultiple = util_1.isMultipleOrTags(props);\n\n      if (canMultiple) {\n        var event = selectedKey;\n\n        if (props.labelInValue) {\n          event = {\n            key: selectedKey,\n            label: _this.getLabelBySingleValue(selectedKey)\n          };\n        }\n\n        if (props.onDeselect) {\n          props.onDeselect(event, _this.getOptionBySingleValue(selectedKey));\n        }\n      }\n\n      _this.fireChange(value);\n    };\n\n    _this.openIfHasChildren = function () {\n      var props = _this.props;\n\n      if (React.Children.count(props.children) || util_1.isSingleMode(props)) {\n        _this.setOpenState(true);\n      }\n    };\n\n    _this.fireSelect = function (value) {\n      if (_this.props.onSelect) {\n        _this.props.onSelect(_this.getVLBySingleValue(value), _this.getOptionBySingleValue(value));\n      }\n    };\n\n    _this.fireChange = function (value) {\n      var props = _this.props;\n\n      if (!('value' in props)) {\n        _this.setState({\n          value: value\n        }, _this.forcePopupAlign);\n      }\n\n      var vls = _this.getVLForOnChange(value);\n\n      var options = _this.getOptionsBySingleValue(value);\n\n      if (props.onChange) {\n        props.onChange(vls, util_1.isMultipleOrTags(_this.props) ? options : options[0]);\n      }\n    };\n\n    _this.isChildDisabled = function (key) {\n      return toArray_1[\"default\"](_this.props.children).some(function (child) {\n        var childValue = util_1.getValuePropValue(child);\n        return childValue === key && child.props && child.props.disabled;\n      });\n    };\n\n    _this.forcePopupAlign = function () {\n      if (!_this.state.open) {\n        return;\n      }\n\n      if (_this.selectTriggerRef && _this.selectTriggerRef.triggerRef) {\n        _this.selectTriggerRef.triggerRef.forcePopupAlign();\n      }\n    };\n\n    _this.renderFilterOptions = function () {\n      var inputValue = _this.state.inputValue;\n      var _this$props3 = _this.props,\n          children = _this$props3.children,\n          tags = _this$props3.tags,\n          notFoundContent = _this$props3.notFoundContent;\n      var menuItems = [];\n      var childrenKeys = [];\n      var empty = false;\n\n      var options = _this.renderFilterOptionsFromChildren(children, childrenKeys, menuItems);\n\n      if (tags) {\n        // tags value must be string\n        var value = _this.state.value;\n        value = value.filter(function (singleValue) {\n          return childrenKeys.indexOf(singleValue) === -1 && (!inputValue || String(singleValue).indexOf(String(inputValue)) > -1);\n        }); // sort by length\n\n        value.sort(function (val1, val2) {\n          return val1.length - val2.length;\n        });\n        value.forEach(function (singleValue) {\n          var key = singleValue;\n          var menuItem = React.createElement(rc_menu_1.Item, {\n            style: util_1.UNSELECTABLE_STYLE,\n            role: \"option\",\n            attribute: util_1.UNSELECTABLE_ATTRIBUTE,\n            value: key,\n            key: key\n          }, key);\n          options.push(menuItem);\n          menuItems.push(menuItem);\n        }); // ref: https://github.com/ant-design/ant-design/issues/14090\n\n        if (inputValue && menuItems.every(function (option) {\n          return util_1.getValuePropValue(option) !== inputValue;\n        })) {\n          options.unshift(React.createElement(rc_menu_1.Item, {\n            style: util_1.UNSELECTABLE_STYLE,\n            role: \"option\",\n            attribute: util_1.UNSELECTABLE_ATTRIBUTE,\n            value: inputValue,\n            key: inputValue\n          }, inputValue));\n        }\n      }\n\n      if (!options.length && notFoundContent) {\n        empty = true;\n        options = [React.createElement(rc_menu_1.Item, {\n          style: util_1.UNSELECTABLE_STYLE,\n          attribute: util_1.UNSELECTABLE_ATTRIBUTE,\n          disabled: true,\n          role: \"option\",\n          value: \"NOT_FOUND\",\n          key: \"NOT_FOUND\"\n        }, notFoundContent)];\n      }\n\n      return {\n        empty: empty,\n        options: options\n      };\n    };\n\n    _this.renderFilterOptionsFromChildren = function (children, childrenKeys, menuItems) {\n      var sel = [];\n      var props = _this.props;\n      var inputValue = _this.state.inputValue;\n      var tags = props.tags;\n      React.Children.forEach(children, function (child) {\n        if (!child) {\n          return;\n        }\n\n        var type = child.type;\n\n        if (type.isSelectOptGroup) {\n          var label = child.props.label;\n          var key = child.key;\n\n          if (!key && typeof label === 'string') {\n            key = label;\n          } else if (!label && key) {\n            label = key;\n          } // Match option group label\n\n\n          if (inputValue && _this.filterOption(inputValue, child)) {\n            var innerItems = toArray_1[\"default\"](child.props.children).map(function (subChild) {\n              var childValueSub = util_1.getValuePropValue(subChild) || subChild.key;\n              return React.createElement(rc_menu_1.Item, _extends({\n                key: childValueSub,\n                value: childValueSub\n              }, subChild.props));\n            });\n            sel.push(React.createElement(rc_menu_1.ItemGroup, {\n              key: key,\n              title: label\n            }, innerItems)); // Not match\n          } else {\n            var _innerItems = _this.renderFilterOptionsFromChildren(child.props.children, childrenKeys, menuItems);\n\n            if (_innerItems.length) {\n              sel.push(React.createElement(rc_menu_1.ItemGroup, {\n                key: key,\n                title: label\n              }, _innerItems));\n            }\n          }\n\n          return;\n        }\n\n        warning_1[\"default\"](type.isSelectOption, 'the children of `Select` should be `Select.Option` or `Select.OptGroup`, ' + \"instead of `\".concat(type.name || type.displayName || child.type, \"`.\"));\n        var childValue = util_1.getValuePropValue(child);\n        util_1.validateOptionValue(childValue, _this.props);\n\n        if (_this.filterOption(inputValue, child)) {\n          var menuItem = React.createElement(rc_menu_1.Item, _extends({\n            style: util_1.UNSELECTABLE_STYLE,\n            attribute: util_1.UNSELECTABLE_ATTRIBUTE,\n            value: childValue,\n            key: childValue,\n            role: \"option\"\n          }, child.props));\n          sel.push(menuItem);\n          menuItems.push(menuItem);\n        }\n\n        if (tags) {\n          childrenKeys.push(childValue);\n        }\n      });\n      return sel;\n    };\n\n    _this.renderTopControlNode = function () {\n      var _this$state = _this.state,\n          open = _this$state.open,\n          inputValue = _this$state.inputValue;\n      var value = _this.state.value;\n      var props = _this.props;\n      var choiceTransitionName = props.choiceTransitionName,\n          prefixCls = props.prefixCls,\n          maxTagTextLength = props.maxTagTextLength,\n          maxTagCount = props.maxTagCount,\n          showSearch = props.showSearch,\n          removeIcon = props.removeIcon;\n      var maxTagPlaceholder = props.maxTagPlaceholder;\n      var className = \"\".concat(prefixCls, \"-selection__rendered\"); // search input is inside topControlNode in single, multiple & combobox. 2016/04/13\n\n      var innerNode = null;\n\n      if (util_1.isSingleMode(props)) {\n        var selectedValue = null;\n\n        if (value.length) {\n          var showSelectedValue = false;\n          var opacity = 1;\n\n          if (!showSearch) {\n            showSelectedValue = true;\n          } else if (open) {\n            showSelectedValue = !inputValue;\n\n            if (showSelectedValue) {\n              opacity = 0.4;\n            }\n          } else {\n            showSelectedValue = true;\n          }\n\n          var singleValue = value[0];\n\n          var _this$getOptionInfoBy3 = _this.getOptionInfoBySingleValue(singleValue),\n              label = _this$getOptionInfoBy3.label,\n              title = _this$getOptionInfoBy3.title;\n\n          selectedValue = React.createElement(\"div\", {\n            key: \"value\",\n            className: \"\".concat(prefixCls, \"-selection-selected-value\"),\n            title: util_1.toTitle(title || label),\n            style: {\n              display: showSelectedValue ? 'block' : 'none',\n              opacity: opacity\n            }\n          }, label);\n        }\n\n        if (!showSearch) {\n          innerNode = [selectedValue];\n        } else {\n          innerNode = [selectedValue, React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\n            key: \"input\",\n            style: {\n              display: open ? 'block' : 'none'\n            }\n          }, _this.getInputElement())];\n        }\n      } else {\n        var selectedValueNodes = [];\n        var limitedCountValue = value;\n        var maxTagPlaceholderEl;\n\n        if (maxTagCount !== undefined && value.length > maxTagCount) {\n          limitedCountValue = limitedCountValue.slice(0, maxTagCount);\n\n          var omittedValues = _this.getVLForOnChange(value.slice(maxTagCount, value.length));\n\n          var content = \"+ \".concat(value.length - maxTagCount, \" ...\");\n\n          if (maxTagPlaceholder) {\n            content = typeof maxTagPlaceholder === 'function' ? maxTagPlaceholder(omittedValues) : maxTagPlaceholder;\n          }\n\n          maxTagPlaceholderEl = React.createElement(\"li\", _extends({\n            style: util_1.UNSELECTABLE_STYLE\n          }, util_1.UNSELECTABLE_ATTRIBUTE, {\n            role: \"presentation\",\n            onMouseDown: util_1.preventDefaultEvent,\n            className: \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\"),\n            key: \"maxTagPlaceholder\",\n            title: util_1.toTitle(content)\n          }), React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-selection__choice__content\")\n          }, content));\n        }\n\n        if (util_1.isMultipleOrTags(props)) {\n          selectedValueNodes = limitedCountValue.map(function (singleValue) {\n            var info = _this.getOptionInfoBySingleValue(singleValue);\n\n            var content = info.label;\n            var title = info.title || content;\n\n            if (maxTagTextLength && typeof content === 'string' && content.length > maxTagTextLength) {\n              content = \"\".concat(content.slice(0, maxTagTextLength), \"...\");\n            }\n\n            var disabled = _this.isChildDisabled(singleValue);\n\n            var choiceClassName = disabled ? \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\") : \"\".concat(prefixCls, \"-selection__choice\");\n            return React.createElement(\"li\", _extends({\n              style: util_1.UNSELECTABLE_STYLE\n            }, util_1.UNSELECTABLE_ATTRIBUTE, {\n              onMouseDown: util_1.preventDefaultEvent,\n              className: choiceClassName,\n              role: \"presentation\",\n              key: singleValue || SELECT_EMPTY_VALUE_KEY,\n              title: util_1.toTitle(title)\n            }), React.createElement(\"div\", {\n              className: \"\".concat(prefixCls, \"-selection__choice__content\")\n            }, content), disabled ? null : React.createElement(\"span\", {\n              onClick: function onClick(event) {\n                _this.removeSelected(singleValue, event);\n              },\n              className: \"\".concat(prefixCls, \"-selection__choice__remove\")\n            }, removeIcon || React.createElement(\"i\", {\n              className: \"\".concat(prefixCls, \"-selection__choice__remove-icon\")\n            }, \"\\xD7\")));\n          });\n        }\n\n        if (maxTagPlaceholderEl) {\n          selectedValueNodes.push(maxTagPlaceholderEl);\n        }\n\n        selectedValueNodes.push(React.createElement(\"li\", {\n          className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\n          key: \"__input\"\n        }, _this.getInputElement()));\n\n        if (util_1.isMultipleOrTags(props) && choiceTransitionName) {\n          innerNode = React.createElement(rc_animate_1[\"default\"], {\n            onLeave: _this.onChoiceAnimationLeave,\n            component: \"ul\",\n            transitionName: choiceTransitionName\n          }, selectedValueNodes);\n        } else {\n          innerNode = React.createElement(\"ul\", null, selectedValueNodes);\n        }\n      }\n\n      return React.createElement(\"div\", {\n        className: className,\n        ref: _this.saveTopCtrlRef\n      }, _this.getPlaceholderElement(), innerNode);\n    };\n\n    var optionsInfo = Select.getOptionsInfoFromProps(props);\n\n    if (props.tags && typeof props.filterOption !== 'function') {\n      var isDisabledExist = Object.keys(optionsInfo).some(function (key) {\n        return optionsInfo[key].disabled;\n      });\n      warning_1[\"default\"](!isDisabledExist, 'Please avoid setting option to disabled in tags mode since user can always type text as tag.');\n    }\n\n    _this.state = {\n      value: Select.getValueFromProps(props, true),\n      inputValue: props.combobox ? Select.getInputValueForCombobox(props, optionsInfo, true) : '',\n      open: props.defaultOpen,\n      optionsInfo: optionsInfo,\n      backfillValue: '',\n      // a flag for aviod redundant getOptionsInfoFromProps call\n      skipBuildOptionsInfo: true,\n      ariaId: ''\n    };\n    _this.saveInputRef = util_1.saveRef(_assertThisInitialized(_this), 'inputRef');\n    _this.saveInputMirrorRef = util_1.saveRef(_assertThisInitialized(_this), 'inputMirrorRef');\n    _this.saveTopCtrlRef = util_1.saveRef(_assertThisInitialized(_this), 'topCtrlRef');\n    _this.saveSelectTriggerRef = util_1.saveRef(_assertThisInitialized(_this), 'selectTriggerRef');\n    _this.saveRootRef = util_1.saveRef(_assertThisInitialized(_this), 'rootRef');\n    _this.saveSelectionRef = util_1.saveRef(_assertThisInitialized(_this), 'selectionRef');\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // when defaultOpen is true, we should auto focus search input\n      // https://github.com/ant-design/ant-design/issues/14254\n      if (this.props.autoFocus || this.state.open) {\n        this.focus();\n      }\n\n      this.setState({\n        ariaId: util_1.generateUUID()\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (util_1.isMultipleOrTags(this.props)) {\n        var inputNode = this.getInputDOMNode();\n        var mirrorNode = this.getInputMirrorDOMNode();\n\n        if (inputNode && inputNode.value && mirrorNode) {\n          inputNode.style.width = '';\n          inputNode.style.width = \"\".concat(mirrorNode.clientWidth, \"px\");\n        } else if (inputNode) {\n          inputNode.style.width = '';\n        }\n      }\n\n      this.forcePopupAlign();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clearFocusTime();\n      this.clearBlurTime();\n      this.clearComboboxTime();\n\n      if (this.dropdownContainer) {\n        ReactDOM.unmountComponentAtNode(this.dropdownContainer);\n        document.body.removeChild(this.dropdownContainer);\n        this.dropdownContainer = null;\n      }\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      if (util_1.isSingleMode(this.props) && this.selectionRef) {\n        this.selectionRef.focus();\n      } else if (this.getInputDOMNode()) {\n        this.getInputDOMNode().focus();\n      }\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      if (util_1.isSingleMode(this.props) && this.selectionRef) {\n        this.selectionRef.blur();\n      } else if (this.getInputDOMNode()) {\n        this.getInputDOMNode().blur();\n      }\n    }\n  }, {\n    key: \"renderArrow\",\n    value: function renderArrow(multiple) {\n      // showArrow : Set to true if not multiple by default but keep set value.\n      var _this$props4 = this.props,\n          _this$props4$showArro = _this$props4.showArrow,\n          showArrow = _this$props4$showArro === void 0 ? !multiple : _this$props4$showArro,\n          loading = _this$props4.loading,\n          inputIcon = _this$props4.inputIcon,\n          prefixCls = _this$props4.prefixCls;\n\n      if (!showArrow && !loading) {\n        return null;\n      } // if loading  have loading icon\n\n\n      var defaultIcon = loading ? React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow-loading\")\n      }) : React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow-icon\")\n      });\n      return React.createElement(\"span\", _extends({\n        key: \"arrow\",\n        className: \"\".concat(prefixCls, \"-arrow\"),\n        style: util_1.UNSELECTABLE_STYLE\n      }, util_1.UNSELECTABLE_ATTRIBUTE, {\n        onClick: this.onArrowClick\n      }), inputIcon || defaultIcon);\n    }\n  }, {\n    key: \"renderClear\",\n    value: function renderClear() {\n      var _this$props5 = this.props,\n          prefixCls = _this$props5.prefixCls,\n          allowClear = _this$props5.allowClear,\n          clearIcon = _this$props5.clearIcon;\n      var inputValue = this.state.inputValue;\n      var value = this.state.value;\n      var clear = React.createElement(\"span\", _extends({\n        key: \"clear\",\n        className: \"\".concat(prefixCls, \"-selection__clear\"),\n        onMouseDown: util_1.preventDefaultEvent,\n        style: util_1.UNSELECTABLE_STYLE\n      }, util_1.UNSELECTABLE_ATTRIBUTE, {\n        onClick: this.onClearSelection\n      }), clearIcon || React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-selection__clear-icon\")\n      }, \"\\xD7\"));\n\n      if (!allowClear) {\n        return null;\n      }\n\n      if (util_1.isCombobox(this.props)) {\n        if (inputValue) {\n          return clear;\n        }\n\n        return null;\n      }\n\n      if (inputValue || value.length) {\n        return clear;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _rootCls;\n\n      var props = this.props;\n      var multiple = util_1.isMultipleOrTags(props); // Default set showArrow to true if not set (not set directly in defaultProps to handle multiple case)\n\n      var _props$showArrow = props.showArrow,\n          showArrow = _props$showArrow === void 0 ? true : _props$showArrow;\n      var state = this.state;\n      var className = props.className,\n          disabled = props.disabled,\n          prefixCls = props.prefixCls,\n          loading = props.loading;\n      var ctrlNode = this.renderTopControlNode();\n      var _this$state2 = this.state,\n          open = _this$state2.open,\n          ariaId = _this$state2.ariaId;\n\n      if (open) {\n        var filterOptions = this.renderFilterOptions();\n        this._empty = filterOptions.empty;\n        this._options = filterOptions.options;\n      }\n\n      var realOpen = this.getRealOpenState();\n      var empty = this._empty;\n      var options = this._options || [];\n      var dataOrAriaAttributeProps = {};\n      Object.keys(props).forEach(function (key) {\n        if (Object.prototype.hasOwnProperty.call(props, key) && (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')) {\n          dataOrAriaAttributeProps[key] = props[key];\n        }\n      }); // for (const key in props) {\n      //   if (\n      //     Object.prototype.hasOwnProperty.call(props, key) &&\n      //     (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')\n      //   ) {\n      //     dataOrAriaAttributeProps[key] = props[key];\n      //   }\n      // }\n\n      var extraSelectionProps = _objectSpread({}, dataOrAriaAttributeProps);\n\n      if (!util_1.isMultipleOrTagsOrCombobox(props)) {\n        extraSelectionProps = _objectSpread({}, extraSelectionProps, {\n          onKeyDown: this.onKeyDown,\n          tabIndex: props.disabled ? -1 : props.tabIndex\n        });\n      }\n\n      var rootCls = (_rootCls = {}, _defineProperty(_rootCls, className, !!className), _defineProperty(_rootCls, prefixCls, 1), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-focused\"), open || !!this._focused), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-combobox\"), util_1.isCombobox(props)), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-enabled\"), !disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-allow-clear\"), !!props.allowClear), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-no-arrow\"), !showArrow), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-loading\"), !!loading), _rootCls);\n      return React.createElement(SelectTrigger_1[\"default\"], {\n        onPopupFocus: this.onPopupFocus,\n        onMouseEnter: this.props.onMouseEnter,\n        onMouseLeave: this.props.onMouseLeave,\n        dropdownAlign: props.dropdownAlign,\n        dropdownClassName: props.dropdownClassName,\n        dropdownMatchSelectWidth: props.dropdownMatchSelectWidth,\n        defaultActiveFirstOption: props.defaultActiveFirstOption,\n        dropdownMenuStyle: props.dropdownMenuStyle,\n        transitionName: props.transitionName,\n        animation: props.animation,\n        prefixCls: props.prefixCls,\n        dropdownStyle: props.dropdownStyle,\n        combobox: props.combobox,\n        showSearch: props.showSearch,\n        options: options,\n        empty: empty,\n        multiple: multiple,\n        disabled: disabled,\n        visible: realOpen,\n        inputValue: state.inputValue,\n        value: state.value,\n        backfillValue: state.backfillValue,\n        firstActiveValue: props.firstActiveValue,\n        onDropdownVisibleChange: this.onDropdownVisibleChange,\n        getPopupContainer: props.getPopupContainer,\n        onMenuSelect: this.onMenuSelect,\n        onMenuDeselect: this.onMenuDeselect,\n        onPopupScroll: props.onPopupScroll,\n        showAction: props.showAction,\n        ref: this.saveSelectTriggerRef,\n        menuItemSelectedIcon: props.menuItemSelectedIcon,\n        dropdownRender: props.dropdownRender,\n        ariaId: ariaId\n      }, React.createElement(\"div\", {\n        id: props.id,\n        style: props.style,\n        ref: this.saveRootRef,\n        onBlur: this.onOuterBlur,\n        onFocus: this.onOuterFocus,\n        className: classnames_1[\"default\"](rootCls),\n        onMouseDown: this.markMouseDown,\n        onMouseUp: this.markMouseLeave,\n        onMouseOut: this.markMouseLeave\n      }, React.createElement(\"div\", _extends({\n        ref: this.saveSelectionRef,\n        key: \"selection\",\n        className: \"\".concat(prefixCls, \"-selection\\n            \").concat(prefixCls, \"-selection--\").concat(multiple ? 'multiple' : 'single'),\n        role: \"combobox\",\n        \"aria-autocomplete\": \"list\",\n        \"aria-haspopup\": \"true\",\n        \"aria-controls\": ariaId,\n        \"aria-expanded\": realOpen\n      }, extraSelectionProps), ctrlNode, this.renderClear(), this.renderArrow(!!multiple))));\n    }\n  }]);\n\n  return Select;\n}(React.Component);\n\nSelect.propTypes = PropTypes_1[\"default\"];\nSelect.defaultProps = {\n  prefixCls: 'rc-select',\n  defaultOpen: false,\n  labelInValue: false,\n  defaultActiveFirstOption: true,\n  showSearch: true,\n  allowClear: false,\n  placeholder: '',\n  onChange: noop,\n  onFocus: noop,\n  onBlur: noop,\n  onSelect: noop,\n  onSearch: noop,\n  onDeselect: noop,\n  onInputKeyDown: noop,\n  dropdownMatchSelectWidth: true,\n  dropdownStyle: {},\n  dropdownMenuStyle: {},\n  optionFilterProp: 'value',\n  optionLabelProp: 'value',\n  notFoundContent: 'Not Found',\n  backfill: false,\n  showAction: ['click'],\n  tokenSeparators: [],\n  autoClearSearchValue: true,\n  tabIndex: 0,\n  dropdownRender: function dropdownRender(menu) {\n    return menu;\n  }\n};\n\nSelect.getDerivedStateFromProps = function (nextProps, prevState) {\n  var optionsInfo = prevState.skipBuildOptionsInfo ? prevState.optionsInfo : Select.getOptionsInfoFromProps(nextProps, prevState);\n  var newState = {\n    optionsInfo: optionsInfo,\n    skipBuildOptionsInfo: false\n  };\n\n  if ('open' in nextProps) {\n    newState.open = nextProps.open;\n  }\n\n  if ('value' in nextProps) {\n    var value = Select.getValueFromProps(nextProps);\n    newState.value = value;\n\n    if (nextProps.combobox) {\n      newState.inputValue = Select.getInputValueForCombobox(nextProps, optionsInfo);\n    }\n  }\n\n  return newState;\n};\n\nSelect.getOptionsFromChildren = function (children) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  React.Children.forEach(children, function (child) {\n    if (!child) {\n      return;\n    }\n\n    var type = child.type;\n\n    if (type.isSelectOptGroup) {\n      Select.getOptionsFromChildren(child.props.children, options);\n    } else {\n      options.push(child);\n    }\n  });\n  return options;\n};\n\nSelect.getInputValueForCombobox = function (props, optionsInfo, useDefaultValue) {\n  var value = [];\n\n  if ('value' in props && !useDefaultValue) {\n    value = util_1.toArray(props.value);\n  }\n\n  if ('defaultValue' in props && useDefaultValue) {\n    value = util_1.toArray(props.defaultValue);\n  }\n\n  if (value.length) {\n    value = value[0];\n  } else {\n    return '';\n  }\n\n  var label = value;\n\n  if (props.labelInValue) {\n    label = value.label;\n  } else if (optionsInfo[util_1.getMapKey(value)]) {\n    label = optionsInfo[util_1.getMapKey(value)].label;\n  }\n\n  if (label === undefined) {\n    label = '';\n  }\n\n  return label;\n};\n\nSelect.getLabelFromOption = function (props, option) {\n  return util_1.getPropValue(option, props.optionLabelProp);\n};\n\nSelect.getOptionsInfoFromProps = function (props, preState) {\n  var options = Select.getOptionsFromChildren(props.children);\n  var optionsInfo = {};\n  options.forEach(function (option) {\n    var singleValue = util_1.getValuePropValue(option);\n    optionsInfo[util_1.getMapKey(singleValue)] = {\n      option: option,\n      value: singleValue,\n      label: Select.getLabelFromOption(props, option),\n      title: option.props.title,\n      disabled: option.props.disabled\n    };\n  });\n\n  if (preState) {\n    // keep option info in pre state value.\n    var oldOptionsInfo = preState.optionsInfo;\n    var value = preState.value;\n\n    if (value) {\n      value.forEach(function (v) {\n        var key = util_1.getMapKey(v);\n\n        if (!optionsInfo[key] && oldOptionsInfo[key] !== undefined) {\n          optionsInfo[key] = oldOptionsInfo[key];\n        }\n      });\n    }\n  }\n\n  return optionsInfo;\n};\n\nSelect.getValueFromProps = function (props, useDefaultValue) {\n  var value = [];\n\n  if ('value' in props && !useDefaultValue) {\n    value = util_1.toArray(props.value);\n  }\n\n  if ('defaultValue' in props && useDefaultValue) {\n    value = util_1.toArray(props.defaultValue);\n  }\n\n  if (props.labelInValue) {\n    value = value.map(function (v) {\n      return v.key;\n    });\n  }\n\n  return value;\n};\n\nSelect.displayName = 'Select';\nreact_lifecycles_compat_1.polyfill(Select);\nexports[\"default\"] = Select;"]},"metadata":{},"sourceType":"script"}